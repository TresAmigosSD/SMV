
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>smv package &#8212; Spark Modularized View v2r12 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="smv.conn package" href="smv.conn.html" />
    <link rel="prev" title="Welcome to smv’s documentation!" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="smv.conn.html" title="smv.conn package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to smv’s documentation!"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Spark Modularized View v2r12 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="smv-package">
<h1>smv package<a class="headerlink" href="#smv-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="smv.conn.html">smv.conn package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="smv.conn.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="smv.conn.html#module-smv.conn.conninfos">smv.conn.conninfos module</a></li>
<li class="toctree-l2"><a class="reference internal" href="smv.conn.html#module-smv.conn.smvconnectioninfo">smv.conn.smvconnectioninfo module</a></li>
<li class="toctree-l2"><a class="reference internal" href="smv.conn.html#module-smv.conn">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="smv.iomod.html">smv.iomod package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="smv.iomod.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="smv.iomod.html#module-smv.iomod.base">smv.iomod.base module</a></li>
<li class="toctree-l2"><a class="reference internal" href="smv.iomod.html#module-smv.iomod.inputs">smv.iomod.inputs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="smv.iomod.html#module-smv.iomod.outputs">smv.iomod.outputs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="smv.iomod.html#module-smv.iomod">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-smv.csv_attributes">
<span id="smv-csv-attributes-module"></span><h2>smv.csv_attributes module<a class="headerlink" href="#module-smv.csv_attributes" title="Permalink to this headline">¶</a></h2>
<p>SMV User Run Configuration Parameters</p>
<p>This module defined the SmvRunConfig class which can be mixed-in into an
SmvModule to get user configuration parameters at run-time.</p>
<dl class="function">
<dt id="smv.csv_attributes.CsvAttributes">
<code class="descclassname">smv.csv_attributes.</code><code class="descname">CsvAttributes</code><span class="sig-paren">(</span><em>delimiter='</em>, <em>'</em>, <em>quotechar='&quot;'</em>, <em>hasHeader=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/csv_attributes.html#CsvAttributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.csv_attributes.CsvAttributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-smv.datasetmgr">
<span id="smv-datasetmgr-module"></span><h2>smv.datasetmgr module<a class="headerlink" href="#module-smv.datasetmgr" title="Permalink to this headline">¶</a></h2>
<p>DataSetMgr entry class
This module provides the python entry point to DataSetMgr on scala side</p>
<dl class="class">
<dt id="smv.datasetmgr.DataSetMgr">
<em class="property">class </em><code class="descclassname">smv.datasetmgr.</code><code class="descname">DataSetMgr</code><span class="sig-paren">(</span><em>_jvm</em>, <em>smvconfig</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#DataSetMgr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.DataSetMgr" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The Python representation of DataSetMgr.</p>
<dl class="method">
<dt id="smv.datasetmgr.DataSetMgr.allDataSets">
<code class="descname">allDataSets</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#DataSetMgr.allDataSets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.DataSetMgr.allDataSets" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all the SmvGenericModules in the app</p>
</dd></dl>

<dl class="method">
<dt id="smv.datasetmgr.DataSetMgr.inferDS">
<code class="descname">inferDS</code><span class="sig-paren">(</span><em>*partial_names</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#DataSetMgr.inferDS"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.DataSetMgr.inferDS" title="Permalink to this definition">¶</a></dt>
<dd><p>Return DSs from a list of partial names</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*partial_names</strong> (<em>str</em>) – list of partial names</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of SmvGenericModules</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(SmvGenericModules)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.datasetmgr.DataSetMgr.inferFqn">
<code class="descname">inferFqn</code><span class="sig-paren">(</span><em>partial_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#DataSetMgr.inferFqn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.DataSetMgr.inferFqn" title="Permalink to this definition">¶</a></dt>
<dd><p>Return FQN string from partial name</p>
</dd></dl>

<dl class="method">
<dt id="smv.datasetmgr.DataSetMgr.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>*fqns</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#DataSetMgr.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.DataSetMgr.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load SmvGenericModules for specified FQNs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*fqns</strong> (<em>str</em>) – list of FQNs as strings</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of Scala SmvGenericModules (j_ds)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(SmvGenericModules)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.datasetmgr.DataSetMgr.modulesToRun">
<code class="descname">modulesToRun</code><span class="sig-paren">(</span><em>modPartialNames</em>, <em>stageNames</em>, <em>allMods</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#DataSetMgr.modulesToRun"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.DataSetMgr.modulesToRun" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a modules need to run
Combine specified modules, (-m), stages, (-s) and if
(–run-app) specified, all output modules</p>
</dd></dl>

<dl class="method">
<dt id="smv.datasetmgr.DataSetMgr.register">
<code class="descname">register</code><span class="sig-paren">(</span><em>repo_factory</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#DataSetMgr.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.DataSetMgr.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register python repo factory</p>
</dd></dl>

<dl class="method">
<dt id="smv.datasetmgr.DataSetMgr.stages">
<code class="descname">stages</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#DataSetMgr.stages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.DataSetMgr.stages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.datasetmgr.DataSetMgr.tx">
<code class="descname">tx</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#DataSetMgr.tx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.DataSetMgr.tx" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a TXContext for multiple places, avoid the long TXContext line</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.datasetmgr.TX">
<em class="property">class </em><code class="descclassname">smv.datasetmgr.</code><code class="descname">TX</code><span class="sig-paren">(</span><em>_jvm</em>, <em>resourceFactories</em>, <em>stages</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#TX"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.TX" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Abstraction of the transaction boundary for loading SmvGenericModules.
A TX object</p>
<ul class="simple">
<li><p>will instantiate a set of repos when itself instantiated and will</p></li>
<li><p>reuse the same repos for all queries. This means that each new TX object will</p></li>
<li><p>reload the SmvGenericModules from source <strong>once</strong> during its lifetime.</p></li>
</ul>
<p>NOTE: Once a new TX is created, the well-formedness of the SmvGenericModules provided
by the previous TX is not guaranteed. Particularly it may become impossible
to run modules from the previous TX.</p>
<dl class="method">
<dt id="smv.datasetmgr.TX.allDataSets">
<code class="descname">allDataSets</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#TX.allDataSets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.TX.allDataSets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.datasetmgr.TX.allOutputModules">
<code class="descname">allOutputModules</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#TX.allOutputModules"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.TX.allOutputModules" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.datasetmgr.TX.inferDS">
<code class="descname">inferDS</code><span class="sig-paren">(</span><em>partial_names</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#TX.inferDS"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.TX.inferDS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.datasetmgr.TX.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>fqns</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#TX.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.TX.load" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.datasetmgr.TX.outputModulesForStage">
<code class="descname">outputModulesForStage</code><span class="sig-paren">(</span><em>stageNames</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#TX.outputModulesForStage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.TX.outputModulesForStage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.datasetmgr.TXContext">
<em class="property">class </em><code class="descclassname">smv.datasetmgr.</code><code class="descname">TXContext</code><span class="sig-paren">(</span><em>_jvm</em>, <em>resourceFactories</em>, <em>stages</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetmgr.html#TXContext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetmgr.TXContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Create a TX context for “with tx() as tx” syntax</p>
</dd></dl>

</div>
<div class="section" id="module-smv.datasetrepo">
<span id="smv-datasetrepo-module"></span><h2>smv.datasetrepo module<a class="headerlink" href="#module-smv.datasetrepo" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="smv.datasetrepo.DataSetRepo">
<em class="property">class </em><code class="descclassname">smv.datasetrepo.</code><code class="descname">DataSetRepo</code><span class="sig-paren">(</span><em>smvApp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetrepo.html#DataSetRepo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetrepo.DataSetRepo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="smv.datasetrepo.DataSetRepo.all_project_pymodules">
<code class="descname">all_project_pymodules</code><a class="headerlink" href="#smv.datasetrepo.DataSetRepo.all_project_pymodules" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.datasetrepo.DataSetRepo.dataSetsForStage">
<code class="descname">dataSetsForStage</code><span class="sig-paren">(</span><em>stageName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetrepo.html#DataSetRepo.dataSetsForStage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetrepo.DataSetRepo.dataSetsForStage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.datasetrepo.DataSetRepo.loadDataSet">
<code class="descname">loadDataSet</code><span class="sig-paren">(</span><em>fqn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetrepo.html#DataSetRepo.loadDataSet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetrepo.DataSetRepo.loadDataSet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.datasetrepo.DataSetRepo.load_pymodule">
<code class="descname">load_pymodule</code><span class="sig-paren">(</span><em>fqn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetrepo.html#DataSetRepo.load_pymodule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetrepo.DataSetRepo.load_pymodule" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.datasetrepo.DataSetRepoFactory">
<em class="property">class </em><code class="descclassname">smv.datasetrepo.</code><code class="descname">DataSetRepoFactory</code><span class="sig-paren">(</span><em>smvApp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetrepo.html#DataSetRepoFactory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetrepo.DataSetRepoFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="smv.datasetrepo.DataSetRepoFactory.createRepo">
<code class="descname">createRepo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetrepo.html#DataSetRepoFactory.createRepo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetrepo.DataSetRepoFactory.createRepo" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.datasetresolver">
<span id="smv-datasetresolver-module"></span><h2>smv.datasetresolver module<a class="headerlink" href="#module-smv.datasetresolver" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="smv.datasetresolver.DataSetResolver">
<em class="property">class </em><code class="descclassname">smv.datasetresolver.</code><code class="descname">DataSetResolver</code><span class="sig-paren">(</span><em>repo</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetresolver.html#DataSetResolver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetresolver.DataSetResolver" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>DataSetResolver (DSR) is the entrypoint through which the DataSetMgr acquires
SmvGenericModules. A DSR object represent a single transaction. Each DSR creates a
set of DataSetRepos at instantiation. When asked for an SmvGenericModules, DSR queries
the repos for that SmvGenericModule and resolves it. The SmvGenericModule is responsible for
resolving itself, given access to the DSR to load/resolve the SmvGenericModule’s
dependencies. DSR caches the SmvGenericModule it has already resolved to ensure that
any SmvGenericModule is only resolved once.</p>
<dl class="method">
<dt id="smv.datasetresolver.DataSetResolver.loadDataSet">
<code class="descname">loadDataSet</code><span class="sig-paren">(</span><em>fqns</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetresolver.html#DataSetResolver.loadDataSet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetresolver.DataSetResolver.loadDataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of FQNs, return cached resolved version SmvGenericModules if exists, or
otherwise load unresolved version from source and resolve them.</p>
</dd></dl>

<dl class="method">
<dt id="smv.datasetresolver.DataSetResolver.resolveDataSet">
<code class="descname">resolveDataSet</code><span class="sig-paren">(</span><em>ds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/datasetresolver.html#DataSetResolver.resolveDataSet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.datasetresolver.DataSetResolver.resolveDataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Return cached resolved version of given SmvGenericModule if it exists, or resolve
it otherwise.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.dqm">
<span id="smv-dqm-module"></span><h2>smv.dqm module<a class="headerlink" href="#module-smv.dqm" title="Permalink to this headline">¶</a></h2>
<p>SMV DataSet Framework interface</p>
<p>This module defines the abstract classes which formed the SmvGenericModule Framework for clients’ projects</p>
<dl class="function">
<dt id="smv.dqm.DQMFix">
<code class="descclassname">smv.dqm.</code><code class="descname">DQMFix</code><span class="sig-paren">(</span><em>condition</em>, <em>fix</em>, <em>name=None</em>, <em>taskPolicy=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/dqm.html#DQMFix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.dqm.DQMFix" title="Permalink to this definition">¶</a></dt>
<dd><p>DQMFix will fix a column with a default value</p>
<p class="rubric">Example</p>
<p>If “age” greater than 100, make it 100</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">DQMFix</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">,</span> <span class="n">lit</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">),</span> <span class="s1">&#39;age_cap100&#39;</span><span class="p">,</span> <span class="n">FailNone</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>condition</strong> (<em>Column</em>) – boolean condition that determines when the fix should occur on the records of a DF</p></li>
<li><p><strong>fix</strong> (<em>Column</em>) – the fix to use when replacing a value that does not pass the condition</p></li>
<li><p><strong>name</strong> (<em>String</em>) – optional parameter for naming the DQMFix. if not specified, defaults to the condition text</p></li>
<li><p><strong>taskPolicy</strong> (<em>DQMTaskPolicy</em>) – optional parameter for the DQM policy. if not specified, defaults to FailNone()</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a DQMFix object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DQMFix)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.dqm.DQMRule">
<code class="descclassname">smv.dqm.</code><code class="descname">DQMRule</code><span class="sig-paren">(</span><em>rule</em>, <em>name=None</em>, <em>taskPolicy=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/dqm.html#DQMRule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.dqm.DQMRule" title="Permalink to this definition">¶</a></dt>
<dd><p>DQMRule defines a requirement on the records of a DF</p>
<p class="rubric">Example</p>
<p>Require the sum of “a” and “b” columns less than 100</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">DQMRule</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">col</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">100.0</span><span class="p">,</span> <span class="s1">&#39;a_b_sum_lt100&#39;</span><span class="p">,</span> <span class="n">FailPercent</span><span class="p">(</span><span class="mf">0.01</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rule</strong> (<em>Column</em>) – boolean condition that defines the requirement on the records of a DF</p></li>
<li><p><strong>name</strong> (<em>string</em>) – optional parameter for naming the DQMRule. if not specified, defaults to the rule text</p></li>
<li><p><strong>taskPolicy</strong> (<em>DQMTaskPolicy</em>) – optional parameter for the DQM policy. if not specified, defaults to FailNone()</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a DQMRule object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DQMRule)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.dqm.FailAny">
<code class="descclassname">smv.dqm.</code><code class="descname">FailAny</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/dqm.html#FailAny"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.dqm.FailAny" title="Permalink to this definition">¶</a></dt>
<dd><p>Any rule fail or fix with FailAny will cause the entire DF to fail</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>policy for DQM Task</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DQMTaskPolicy)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.dqm.FailCount">
<code class="descclassname">smv.dqm.</code><code class="descname">FailCount</code><span class="sig-paren">(</span><em>threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/dqm.html#FailCount"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.dqm.FailCount" title="Permalink to this definition">¶</a></dt>
<dd><p>Tasks with FailCount(n) will fail the DF if the task is triggered &gt;= n times</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>threshold</strong> (<em>int</em>) – the threshold after which the DF fails</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>policy for DQM Task</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DQMTaskPolicy)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.dqm.FailNone">
<code class="descclassname">smv.dqm.</code><code class="descname">FailNone</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/dqm.html#FailNone"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.dqm.FailNone" title="Permalink to this definition">¶</a></dt>
<dd><p>Tasks with FailNone will not trigger any DF level policy</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>policy for DQM Task</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DQMTaskPolicy)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.dqm.FailParserCountPolicy">
<code class="descclassname">smv.dqm.</code><code class="descname">FailParserCountPolicy</code><span class="sig-paren">(</span><em>threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/dqm.html#FailParserCountPolicy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.dqm.FailParserCountPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>If the total time of parser fails &gt;= threshold, fail the DF</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>threshold</strong> (<em>int</em>) – the threshold after which the DF fails</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>policy for DQM</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DQMPolicy)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.dqm.FailPercent">
<code class="descclassname">smv.dqm.</code><code class="descname">FailPercent</code><span class="sig-paren">(</span><em>threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/dqm.html#FailPercent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.dqm.FailPercent" title="Permalink to this definition">¶</a></dt>
<dd><p>Tasks with FailPercent(r) will fail the DF if the task is triggered &gt;= r percent of the
total number of records in the DF</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>threshold</strong> (<em>double</em>) – the threshold after which the DF fails. value is between 0.0 and 1.0</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>policy for DQM Task</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DQMTaskPolicy)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.dqm.FailTotalFixCountPolicy">
<code class="descclassname">smv.dqm.</code><code class="descname">FailTotalFixCountPolicy</code><span class="sig-paren">(</span><em>threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/dqm.html#FailTotalFixCountPolicy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.dqm.FailTotalFixCountPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>For all the fixes in a DQM, if the total number of times they are triggered is &gt;= threshold, fail the DF</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>threshold</strong> (<em>int</em>) – the threshold after which the DF fails</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>policy for DQM</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DQMPolicy)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.dqm.FailTotalFixPercentPolicy">
<code class="descclassname">smv.dqm.</code><code class="descname">FailTotalFixPercentPolicy</code><span class="sig-paren">(</span><em>threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/dqm.html#FailTotalFixPercentPolicy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.dqm.FailTotalFixPercentPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>For all the fixes in a DQM, if the total number of times they are triggered is &gt;= threshold * total Records, fail the DF</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>threshold</strong> (<em>double</em>) – the threshold after which the DF fails. value is between 0.0 and 1.0</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>policy for DQM</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DQMPolicy)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.dqm.FailTotalRuleCountPolicy">
<code class="descclassname">smv.dqm.</code><code class="descname">FailTotalRuleCountPolicy</code><span class="sig-paren">(</span><em>threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/dqm.html#FailTotalRuleCountPolicy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.dqm.FailTotalRuleCountPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>For all the rules in a DQM, if the total number of times they are triggered is &gt;= threshold, fail the DF</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>threshold</strong> (<em>int</em>) – the threshold after which the DF fails</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>policy for DQM</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DQMPolicy)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.dqm.FailTotalRulePercentPolicy">
<code class="descclassname">smv.dqm.</code><code class="descname">FailTotalRulePercentPolicy</code><span class="sig-paren">(</span><em>threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/dqm.html#FailTotalRulePercentPolicy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.dqm.FailTotalRulePercentPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>For all the rules in a DQM, if the total number of times they are triggered is &gt;= threshold * total Records, fail the DF</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>threshold</strong> (<em>double</em>) – the threshold after which the DF fails. value is between 0.0 and 1.0</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>policy for DQM</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DQMPolicy)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.dqm.SmvDQM">
<code class="descclassname">smv.dqm.</code><code class="descname">SmvDQM</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/dqm.html#SmvDQM"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.dqm.SmvDQM" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory method for Scala SmvDQM</p>
</dd></dl>

</div>
<div class="section" id="module-smv.error">
<span id="smv-error-module"></span><h2>smv.error module<a class="headerlink" href="#module-smv.error" title="Permalink to this headline">¶</a></h2>
<p>Errors thrown by SMV</p>
<dl class="exception">
<dt id="smv.error.SmvDqmValidationError">
<em class="property">exception </em><code class="descclassname">smv.error.</code><code class="descname">SmvDqmValidationError</code><span class="sig-paren">(</span><em>dqmValidationResult</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/error.html#SmvDqmValidationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.error.SmvDqmValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.error.SmvRuntimeError" title="smv.error.SmvRuntimeError"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.error.SmvRuntimeError</span></code></a></p>
<p>This class has an instance of dqmValidationResult(dict)</p>
</dd></dl>

<dl class="exception">
<dt id="smv.error.SmvMetadataValidationError">
<em class="property">exception </em><code class="descclassname">smv.error.</code><code class="descname">SmvMetadataValidationError</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/error.html#SmvMetadataValidationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.error.SmvMetadataValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.error.SmvRuntimeError" title="smv.error.SmvRuntimeError"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.error.SmvRuntimeError</span></code></a></p>
</dd></dl>

<dl class="exception">
<dt id="smv.error.SmvRuntimeError">
<em class="property">exception </em><code class="descclassname">smv.error.</code><code class="descname">SmvRuntimeError</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/error.html#SmvRuntimeError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.error.SmvRuntimeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeError</span></code></p>
</dd></dl>

</div>
<div class="section" id="module-smv.functions">
<span id="smv-functions-module"></span><h2>smv.functions module<a class="headerlink" href="#module-smv.functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="smv.functions.diceSorensen">
<code class="descclassname">smv.functions.</code><code class="descname">diceSorensen</code><span class="sig-paren">(</span><em>c1</em>, <em>c2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/functions.html#diceSorensen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.functions.diceSorensen" title="Permalink to this definition">¶</a></dt>
<dd><p>2-gram UDF with formula (2 * number of overlaped gramCnt)/(s1.gramCnt + s2.gramCnt)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c1</strong> (<em>Column</em>) – first column</p></li>
<li><p><strong>c2</strong> (<em>Column</em>) – second column</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>2-gram</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.functions.jaroWinkler">
<code class="descclassname">smv.functions.</code><code class="descname">jaroWinkler</code><span class="sig-paren">(</span><em>c1</em>, <em>c2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/functions.html#jaroWinkler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.functions.jaroWinkler" title="Permalink to this definition">¶</a></dt>
<dd><p>Jaro-Winkler edit distance metric UDF</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c1</strong> (<em>Column</em>) – first column</p></li>
<li><p><strong>c2</strong> (<em>Column</em>) – second column</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>distances</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.functions.nGram2">
<code class="descclassname">smv.functions.</code><code class="descname">nGram2</code><span class="sig-paren">(</span><em>c1</em>, <em>c2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/functions.html#nGram2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.functions.nGram2" title="Permalink to this definition">¶</a></dt>
<dd><p>2-gram UDF with formula (number of overlaped gramCnt)/max(c1.gramCnt, c2.gramCnt)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c1</strong> (<em>Column</em>) – first column</p></li>
<li><p><strong>c2</strong> (<em>Column</em>) – second column</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>2-gram</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.functions.nGram3">
<code class="descclassname">smv.functions.</code><code class="descname">nGram3</code><span class="sig-paren">(</span><em>c1</em>, <em>c2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/functions.html#nGram3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.functions.nGram3" title="Permalink to this definition">¶</a></dt>
<dd><p>3-gram UDF with formula (number of overlaped gramCnt)/max(s1.gramCnt, s2.gramCnt)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c1</strong> (<em>Column</em>) – first column</p></li>
<li><p><strong>c2</strong> (<em>Column</em>) – second column</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>3-gram</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.functions.normlevenshtein">
<code class="descclassname">smv.functions.</code><code class="descname">normlevenshtein</code><span class="sig-paren">(</span><em>c1</em>, <em>c2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/functions.html#normlevenshtein"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.functions.normlevenshtein" title="Permalink to this definition">¶</a></dt>
<dd><p>Levenshtein edit distance metric UDF</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c1</strong> (<em>Column</em>) – first column</p></li>
<li><p><strong>c2</strong> (<em>Column</em>) – second column</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>distances</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.functions.smvArrayCat">
<code class="descclassname">smv.functions.</code><code class="descname">smvArrayCat</code><span class="sig-paren">(</span><em>sep</em>, <em>col</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/functions.html#smvArrayCat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.functions.smvArrayCat" title="Permalink to this definition">¶</a></dt>
<dd><p>For an array typed column, concat the elements to a string with the given separater.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sep</strong> – a Python string to separate the fields</p></li>
<li><p><strong>col</strong> – a Column with ArrayType</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a Column in StringType with array elements concatenated</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(col)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.functions.smvCollectSet">
<code class="descclassname">smv.functions.</code><code class="descname">smvCollectSet</code><span class="sig-paren">(</span><em>col</em>, <em>datatype</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/functions.html#smvCollectSet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.functions.smvCollectSet" title="Permalink to this definition">¶</a></dt>
<dd><p>An aggregate function, which will collect all the values of the given column and create a set as an array typed column.
Since Spark 1.6, a spark function collect_set was introduced, so as migrate to Spark 1.6 and later, this smvCollectSet
will be depricated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> (<em>Column</em>) – column to be aggregated on</p></li>
<li><p><strong>datatype</strong> (<em>DataType</em>) – datatype of the input column</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.functions.smvCreateLookUp">
<code class="descclassname">smv.functions.</code><code class="descname">smvCreateLookUp</code><span class="sig-paren">(</span><em>m</em>, <em>default</em>, <em>outputType</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/functions.html#smvCreateLookUp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.functions.smvCreateLookUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a Python UDF which will perform a dictionary lookup on a column</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>m</strong> (<em>dictionary</em>) – a Python dictionary to be applied</p></li>
<li><p><strong>default</strong> (<em>any</em>) – default value if dictionary lookup failed</p></li>
<li><p><strong>outputType</strong> (<em>DataType</em>) – output value’s data type</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an udf which can apply to a column and apply the lookup</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(udf)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.functions.smvFirst">
<code class="descclassname">smv.functions.</code><code class="descname">smvFirst</code><span class="sig-paren">(</span><em>c</em>, <em>nonNull=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/functions.html#smvFirst"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.functions.smvFirst" title="Permalink to this definition">¶</a></dt>
<dd><p>Variation of Spark “first” which also returns null values</p>
<p>Since Spark “first” will return the first non-null value, we have to
create our version smvFirst which to retune the real first value, even
if it’s null. Alternatively can return the first non-null value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>Column</strong> (<em>c</em>) – column to extract first value from</p></li>
<li><p><strong>nonNull</strong> (<em>bool</em>) – If false, return first value even if null. If true, return first non-null value. Defaults to false.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>first value</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(object)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.functions.smvHashKey">
<code class="descclassname">smv.functions.</code><code class="descname">smvHashKey</code><span class="sig-paren">(</span><em>head</em>, <em>*others</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/functions.html#smvHashKey"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.functions.smvHashKey" title="Permalink to this definition">¶</a></dt>
<dd><p>Create MD5 on concatenated columns.
Return “Prefix” + MD5 Hex string(size 32 string) as the unique key</p>
<p>MD5’s collisions rate on real data records could be ignored based on the following discussion.</p>
<p><a class="reference external" href="https://marc-stevens.nl/research/md5-1block-collision/">https://marc-stevens.nl/research/md5-1block-collision/</a>
The shortest messages have the same MD5 are 512-bit (64-byte) messages as below</p>
<p>4dc968ff0ee35c209572d4777b721587d36fa7b21bdc56b74a3dc0783e7b9518afbfa200a8284bf36e8e4b55b35f427593d849676da0d1555d8360fb5f07fea2
and the (different by two bits)
4dc968ff0ee35c209572d4777b721587d36fa7b21bdc56b74a3dc0783e7b9518afbfa202a8284bf36e8e4b55b35f427593d849676da0d1d55d8360fb5f07fea2
both have MD5 hash
008ee33a9d58b51cfeb425b0959121c9</p>
<p>There are other those pairs, but all carefully constructed.
Theoretically the random collisions will happen on data size approaching 2^64 (since MD5 has
128-bit), which is much larger than the number of records we deal with (a billion is about 2^30)
There for using MD5 to hash primary key columns is good enough for creating an unique key</p>
<p>This function can take 2 forms:
- smvHashKey(prefix, col1, col2, …)
- smvHashKey(col1, col2, …)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefix</strong> (<em>String</em>) – return string’s prefix</p></li>
<li><p><strong>col.</strong> (<em>Column</em>) – columns to be part of hash</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a StringType column as Prefix + MD5 Hex string</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(col)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.functions.smvStrCat">
<code class="descclassname">smv.functions.</code><code class="descname">smvStrCat</code><span class="sig-paren">(</span><em>head</em>, <em>*others</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/functions.html#smvStrCat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.functions.smvStrCat" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenate multiple columns to a single string. Similar to <cite>concat</cite> and <cite>concat_ws</cite> functions in Spark but behaves differently
when some columns are nulls.
The Spark version will return null if any of the inputs is null.
smvStrCat will return null if all of the inputs are nulls, otherwise it will coalesce null cols to blank.</p>
<p>This function can take 2 forms:
- smvStrCat(sep, col1, col2, …)
- smvStrCat(col1, col2, …)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sep</strong> (<em>String</em>) – separater for the concats</p></li>
<li><p><strong>col.</strong> (<em>Column</em>) – columns to be concatenated</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a StringType column</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(col)</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-smv.helpers">
<span id="smv-helpers-module"></span><h2>smv.helpers module<a class="headerlink" href="#module-smv.helpers" title="Permalink to this headline">¶</a></h2>
<p>SMV DataFrame Helpers and Column Helpers</p>
<p>This module provides the helper functions on DataFrame objects and Column objects</p>
<dl class="class">
<dt id="smv.helpers.ColumnHelper">
<em class="property">class </em><code class="descclassname">smv.helpers.</code><code class="descname">ColumnHelper</code><span class="sig-paren">(</span><em>col</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvArrayFlatten">
<code class="descname">smvArrayFlatten</code><span class="sig-paren">(</span><em>elemType</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvArrayFlatten"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvArrayFlatten" title="Permalink to this definition">¶</a></dt>
<dd><p>smvArrayFlatten helper applies flatten operation on an Array of Array
column.</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s1">&#39;arrayOfArrayOfStr&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">smvArrayFlatten</span><span class="p">(</span><span class="n">StringType</span><span class="p">()))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>elemType</strong> (<em>DataType</em><em> or </em><em>DataFram</em>) – array element’s data type,
in object form or the DataFrame to infer the
element data type</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvDay70">
<code class="descname">smvDay70</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvDay70"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvDay70" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a Timestamp to the number of days from 1970-01-01</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;dob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvDay70</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>IntegerType. Number of days from 1970-01-01 (start from 0)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvDayOfMonth">
<code class="descname">smvDayOfMonth</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvDayOfMonth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvDayOfMonth" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract day of month component from a timestamp</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;dob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvDayOfMonth</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>IntegerType. Day of month component as integer (range 1-31), or null if input column is null</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvDayOfWeek">
<code class="descname">smvDayOfWeek</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvDayOfWeek"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvDayOfWeek" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract day of week component from a timestamp</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;dob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvDayOfWeek</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>IntegerType. Day of week component as integer (range 1-7, 1 being Monday), or null if input column is null</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvGetColName">
<code class="descname">smvGetColName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvGetColName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvGetColName" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of a Column as a sting</p>
<p>Example:
&gt;&gt;&gt; df.a.smvGetColName()</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvHour">
<code class="descname">smvHour</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvHour"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvHour" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract hour component from a timestamp</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;dob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvHour</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>IntegerType. Hour component as integer, or null if input column is null</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvIsAllIn">
<code class="descname">smvIsAllIn</code><span class="sig-paren">(</span><em>*vals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvIsAllIn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvIsAllIn" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true if ALL of the Array columns’ elements are in the given parameter sequence</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vals</strong> (<em>*any</em>) – vals must be of the same type as the Array content</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>input DF:</p>
<blockquote>
<div><table class="docutils align-center">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>k</p></th>
<th class="head"><p>v</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>a</p></td>
<td><p>b</p></td>
</tr>
<tr class="row-odd"><td><p>c</p></td>
<td><p>d</p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">array</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;k&quot;</span><span class="p">),</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;v&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">smvIsAllIn</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;isFound&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>output DF:</p>
<blockquote>
<div><table class="docutils align-center">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>isFound</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>true</p></td>
</tr>
<tr class="row-odd"><td><p>false</p></td>
</tr>
<tr class="row-even"><td><p>false</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>BooleanType</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvIsAnyIn">
<code class="descname">smvIsAnyIn</code><span class="sig-paren">(</span><em>*vals</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvIsAnyIn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvIsAnyIn" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true if ANY one of the Array columns’ elements are in the given parameter sequence</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vals</strong> (<em>*any</em>) – vals must be of the same type as the Array content</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>input DF:</p>
<blockquote>
<div><table class="docutils align-center">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>k</p></th>
<th class="head"><p>v</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>a</p></td>
<td><p>b</p></td>
</tr>
<tr class="row-odd"><td><p>c</p></td>
<td><p>d</p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">array</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;k&quot;</span><span class="p">),</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;v&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">smvIsAnyIn</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;isFound&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>output DF:</p>
<blockquote>
<div><table class="docutils align-center">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>isFound</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>true</p></td>
</tr>
<tr class="row-odd"><td><p>true</p></td>
</tr>
<tr class="row-even"><td><p>false</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>BooleanType</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvMonth">
<code class="descname">smvMonth</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvMonth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvMonth" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract month component from a timestamp</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;dob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvMonth</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>IntegerType. Month component as integer, or null if input column is null</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvMonth70">
<code class="descname">smvMonth70</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvMonth70"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvMonth70" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a Timestamp to the number of months from 1970-01-01</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;dob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvMonth70</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>IntegerType. Number of months from 1970-01-01 (start from 0)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvPlusDays">
<code class="descname">smvPlusDays</code><span class="sig-paren">(</span><em>delta</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvPlusDays"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvPlusDays" title="Permalink to this definition">¶</a></dt>
<dd><p>Add N days to <cite>Timestamp</cite> or <cite>Date</cite> column</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>delta</strong> (<em>int</em><em> or </em><em>Column</em>) – the number of days to add</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;dob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvPlusDays</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>TimestampType. The incremented Timestamp, or null if input is null.</dt><dd><p><strong>Note</strong> even if the input is DateType, the output is TimestampType</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
<p>Please note that although Spark’s <cite>date_add</cite> function does the similar
thing, they are actually different.</p>
<ul class="simple">
<li><p>Both can act on both <cite>Timestamp</cite> and <cite>Date</cite> types</p></li>
<li><p><cite>smvPlusDays</cite> always returns <cite>Timestamp</cite>, while <cite>F.date_add</cite> always returns
<cite>Date</cite></p></li>
</ul>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvPlusMonths">
<code class="descname">smvPlusMonths</code><span class="sig-paren">(</span><em>delta</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvPlusMonths"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvPlusMonths" title="Permalink to this definition">¶</a></dt>
<dd><p>Add N months to <cite>Timestamp</cite> or <cite>Date</cite> column</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>delta</strong> (<em>int</em><em> or </em><em>Column</em>) – the number of months to add</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The calculation will do its best to only change the month field retaining the same day of month. However, in certain circumstances, it may be necessary to alter smaller fields. For example, 2007-03-31 plus one month cannot result in 2007-04-31, so the day of month is adjusted to 2007-04-30.</p>
</div>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;dob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvPlusMonths</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>TimestampType. The incremented Timestamp, or null if input is null.</dt><dd><p><strong>Note</strong> even if the input is DateType, the output is TimestampType</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
<p>Please note that although Spark’s <cite>add_months</cite> function does the similar
thing, they are actually different.</p>
<ul class="simple">
<li><p>Both can act on both <cite>Timestamp</cite> and <cite>Date</cite> types</p></li>
<li><p><cite>smvPlusMonths</cite> always returns <cite>Timestamp</cite>, while <cite>F.add_months</cite> always returns
<cite>Date</cite></p></li>
</ul>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvPlusWeeks">
<code class="descname">smvPlusWeeks</code><span class="sig-paren">(</span><em>delta</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvPlusWeeks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvPlusWeeks" title="Permalink to this definition">¶</a></dt>
<dd><p>Add N weeks to <cite>Timestamp</cite> or <cite>Date</cite> column</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>delta</strong> (<em>int</em><em> or </em><em>Column</em>) – the number of weeks to add</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;dob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvPlusWeeks</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>TimestampType. The incremented Timestamp, or null if input is null.</dt><dd><p><strong>Note</strong> even if the input is DateType, the output is TimestampType</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvPlusYears">
<code class="descname">smvPlusYears</code><span class="sig-paren">(</span><em>delta</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvPlusYears"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvPlusYears" title="Permalink to this definition">¶</a></dt>
<dd><p>Add N years to <cite>Timestamp</cite> or <cite>Date</cite> column</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>delta</strong> (<em>int</em><em> or </em><em>Column</em>) – the number of years to add</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;dob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvPlusYears</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>TimestampType. The incremented Timestamp, or null if input is null.</dt><dd><p><strong>Note</strong> even if the input is DateType, the output is TimestampType</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvQuarter">
<code class="descname">smvQuarter</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvQuarter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvQuarter" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract quarter component from a timestamp</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;dob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvQuarter</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>IntegerType. Quarter component as integer (1-based), or null if input column is null</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvStrToTimestamp">
<code class="descname">smvStrToTimestamp</code><span class="sig-paren">(</span><em>fmt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvStrToTimestamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvStrToTimestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a timestamp from a string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fmt</strong> (<em>string</em>) – the format is the same as the Java <cite>Date</cite> format</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;dob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvStrToTimestamp</span><span class="p">(</span><span class="s2">&quot;yyyy-MM-dd&quot;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>TimestampType. The converted Timestamp</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvTimeToIndex">
<code class="descname">smvTimeToIndex</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvTimeToIndex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvTimeToIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>smvTime helper to convert <cite>smvTime</cite> column to time index integer</p>
<p>Example <cite>smvTime</cite> values (as String): “Q201301”, “M201512”, “D20141201”
Example output 172, 551, 16405 (# of quarters, months, and days from 19700101)</p>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvTimeToLabel">
<code class="descname">smvTimeToLabel</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvTimeToLabel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvTimeToLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>smvTime helper to convert <cite>smvTime</cite> column to human readable form</p>
<p>Example <cite>smvTime</cite> values (as String): “Q201301”, “M201512”, “D20141201”
Example output “2013-Q1”, “2015-12”, “2014-12-01”</p>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvTimeToTimestamp">
<code class="descname">smvTimeToTimestamp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvTimeToTimestamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvTimeToTimestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>smvTime helper to convert <cite>smvTime</cite> column to a timestamp at the beginning of
the given time pireod.</p>
<blockquote>
<div><p>Example <cite>smvTime</cite> values (as String): “Q201301”, “M201512”, “D20141201”
Example output “2013-01-01 00:00:00.0”, “2015-12-01 00:00:00.0”, “2014-12-01 00:00:00.0”</p>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvTimeToType">
<code class="descname">smvTimeToType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvTimeToType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvTimeToType" title="Permalink to this definition">¶</a></dt>
<dd><p>smvTime helper to convert <cite>smvTime</cite> column to time type string</p>
<p>Example <cite>smvTime</cite> values (as String): “Q201301”, “M201512”, “D20141201”
Example output type “quarter”, “month”, “day”</p>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvTimestampToStr">
<code class="descname">smvTimestampToStr</code><span class="sig-paren">(</span><em>timezone</em>, <em>fmt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvTimestampToStr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvTimestampToStr" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a string from a timestamp and timezone</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timezone</strong> (<em>string</em><em> or </em><em>Column</em>) – the timezone follows the rules in
<a class="reference external" href="https://www.joda.org/joda-time/apidocs/org/joda/time/DateTimeZone.html#forID-java.lang.String">https://www.joda.org/joda-time/apidocs/org/joda/time/DateTimeZone.html#forID-java.lang.String</a>-
It can be a string like “America/Los_Angeles” or “+1000”. If it is null, use current system time zone.</p></li>
<li><p><strong>fmt</strong> (<em>string</em>) – the format is the same as the Java <cite>Date</cite> format</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;ts&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvTimestampToStr</span><span class="p">(</span><span class="s2">&quot;America/Los_Angeles&quot;</span><span class="p">,</span><span class="s2">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>StringType. The converted String with given format</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.ColumnHelper.smvYear">
<code class="descname">smvYear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#ColumnHelper.smvYear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.ColumnHelper.smvYear" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract year component from a timestamp</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;dob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvYear</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>IntegerType. Year component as integer, or null if input column is null</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Column)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.helpers.DataFrameHelper">
<em class="property">class </em><code class="descclassname">smv.helpers.</code><code class="descname">DataFrameHelper</code><span class="sig-paren">(</span><em>df</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="smv.helpers.DataFrameHelper.peek">
<code class="descname">peek</code><span class="sig-paren">(</span><em>pos=1</em>, <em>colRegex='.*'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.peek"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.peek" title="Permalink to this definition">¶</a></dt>
<dd><p>Display a DataFrame row in transposed view</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pos</strong> (<em>integer</em>) – the n-th row to display, default as 1</p></li>
<li><p><strong>colRegex</strong> (<em>string</em>) – show the columns with name matching the regex, default as “.*”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.peekSave">
<code class="descname">peekSave</code><span class="sig-paren">(</span><em>path</em>, <em>pos=1</em>, <em>colRegex='.*'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.peekSave"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.peekSave" title="Permalink to this definition">¶</a></dt>
<dd><p>Write <cite>peek</cite> result to a file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>string</em>) – local file name to Write</p></li>
<li><p><strong>pos</strong> (<em>integer</em>) – the n-th row to display, default as 1</p></li>
<li><p><strong>colRegex</strong> (<em>string</em>) – show the columns with name matching the regex, default as “.*”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.selectByLabel">
<code class="descname">selectByLabel</code><span class="sig-paren">(</span><em>labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.selectByLabel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.selectByLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Select columns whose metadata contains the specified labels</p>
<p>If the labels is empty, returns a DataFrame with all the unlabeled columns.
Will throw if there are no columns that satisfy the condition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>labels</strong> – (list(string)) a list of label strings for the columns to match</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">selectByLabel</span><span class="p">([</span><span class="s2">&quot;tag_1&quot;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the DataFrame with the selected columns</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvBinHist">
<code class="descname">smvBinHist</code><span class="sig-paren">(</span><em>*colWithBin</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvBinHist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvBinHist" title="Permalink to this definition">¶</a></dt>
<dd><p>Print distributions on numerical columns with applying the specified bin size</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>colWithBin</strong> (<em>*tuple</em>) – each tuple must be of size 2, where the first element is the column name, and the second is the bin size for that column</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvBinHist</span><span class="p">((</span><span class="s2">&quot;col_a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvConcatHist">
<code class="descname">smvConcatHist</code><span class="sig-paren">(</span><em>*cols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvConcatHist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvConcatHist" title="Permalink to this definition">¶</a></dt>
<dd><p>Display EDD histogram of a group of columns (joint distribution)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cols</strong> (<em>*string</em>) – The columns on which to perform EDD histogram</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvConcatHist</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvCountHist">
<code class="descname">smvCountHist</code><span class="sig-paren">(</span><em>keys</em>, <em>binSize</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvCountHist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvCountHist" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the distribution of the value frequency on specific columns</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>list</em><em>(</em><em>string</em><em>)</em>) – the column names on which the EDD histogram is performed</p></li>
<li><p><strong>binSize</strong> (<em>integer</em>) – the bin size for the histogram</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvCountHist</span><span class="p">([</span><span class="s2">&quot;k&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvDedupByKey">
<code class="descname">smvDedupByKey</code><span class="sig-paren">(</span><em>*keys</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvDedupByKey"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvDedupByKey" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove duplicate records from the DataFrame by arbitrarily selecting the first record from a set of records with same primary key or key combo.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>keys</strong> (<em>*string</em><em> or </em><em>*Column</em>) – the column names or Columns on which to apply dedup</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>input DataFrame:</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 22%" />
<col style="width: 39%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>id</p></th>
<th class="head"><p>product</p></th>
<th class="head"><p>Company</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>A</p></td>
<td><p>C1</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>C</p></td>
<td><p>C2</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>B</p></td>
<td><p>C3</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>B</p></td>
<td><p>C4</p></td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvDedupByKey</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>output DataFrame:</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 22%" />
<col style="width: 39%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>id</p></th>
<th class="head"><p>product</p></th>
<th class="head"><p>Company</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>A</p></td>
<td><p>C1</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>B</p></td>
<td><p>C3</p></td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvDedupByKey</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;product&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>output DataFrame:</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 22%" />
<col style="width: 39%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>id</p></th>
<th class="head"><p>product</p></th>
<th class="head"><p>Company</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>A</p></td>
<td><p>C1</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>C</p></td>
<td><p>C2</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>B</p></td>
<td><p>C3</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a DataFrame without duplicates for the specified keys</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvDedupByKeyWithOrder">
<code class="descname">smvDedupByKeyWithOrder</code><span class="sig-paren">(</span><em>*keys</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvDedupByKeyWithOrder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvDedupByKeyWithOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove duplicated records by selecting the first record relative to a given ordering</p>
<p>The order is specified in another set of parentheses, as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">smvDedupByKeyWithOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">keys</span><span class="p">)(</span><span class="o">*</span><span class="n">orderCols</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Same as the <cite>smvDedupByKey</cite> method, we use RDD groupBy in the implementation of this method to make sure we can handle large key space.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>keys</strong> (<em>*string</em><em> or </em><em>*Column</em>) – the column names or Columns on which to apply dedup</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>input DataFrame:</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 22%" />
<col style="width: 39%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>id</p></th>
<th class="head"><p>product</p></th>
<th class="head"><p>Company</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>A</p></td>
<td><p>C1</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>C</p></td>
<td><p>C2</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>B</p></td>
<td><p>C3</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>B</p></td>
<td><p>C4</p></td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvDedupByKeyWithOrder</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">))(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;product&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">desc</span><span class="p">())</span>
</pre></div>
</div>
<p>output DataFrame:</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 22%" />
<col style="width: 39%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>id</p></th>
<th class="head"><p>product</p></th>
<th class="head"><p>Company</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>C</p></td>
<td><p>C2</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>B</p></td>
<td><p>C3</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a DataFrame without duplicates for the specified keys / order</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvDesc">
<code class="descname">smvDesc</code><span class="sig-paren">(</span><em>*colDescs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvDesc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvDesc" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds column descriptions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>colDescs</strong> (<em>*tuple</em>) – tuples of strings where the first is the column name, and the second is the description to add</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvDesc</span><span class="p">((</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;description of col a&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;description of col b&quot;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the DataFrame with column descriptions added</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvDescFromDF">
<code class="descname">smvDescFromDF</code><span class="sig-paren">(</span><em>descDF</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvDescFromDF"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvDescFromDF" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds column descriptions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>descDF</strong> (<em>DataFrame</em>) – a companion 2-column desciptionDF that has variable names as column 1 and corresponding variable descriptions as column 2</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvDescFromDF</span><span class="p">(</span><span class="n">desciptionDF</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the DataFrame with column descriptions added</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvDiscoverPK">
<code class="descname">smvDiscoverPK</code><span class="sig-paren">(</span><em>n=10000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvDiscoverPK"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvDiscoverPK" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a column combination which uniquely identifies a row from the data</p>
<p>The resulting output is printed out</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The algorithm only looks for a set of keys which uniquely identifies the row. There could be more key combinations which can also be the primary key.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n</strong> (<em>integer</em>) – number of rows the PK discovery algorithm will run on, defaults to 10000</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvDiscoverPK</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvDumpDF">
<code class="descname">smvDumpDF</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvDumpDF"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvDumpDF" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the schema and data of given df to screen for debugging purposes</p>
<p>Similar to <cite>show()</cite> method of DF from Spark 1.3, although the format is slightly different.  This function’s format is more convenient for us and hence has remained.</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvDumpDF</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvDupeCheck">
<code class="descname">smvDupeCheck</code><span class="sig-paren">(</span><em>keys</em>, <em>n=10000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvDupeCheck"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvDupeCheck" title="Permalink to this definition">¶</a></dt>
<dd><p>For a given list of potential keys, check for duplicated records with the number of duplications and all the columns.</p>
<p>Null values are allowed in the potential keys, so duplication on Null valued keys will also be reported.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>list</em><em>(</em><em>string</em><em>)</em>) – the key column list which the duplicate check applied</p></li>
<li><p><strong>n</strong> (<em>integer</em>) – number of rows from input data for checking duplications, defaults to 10000</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>returns key columns + “_N” + the rest columns for the records with more key duplication records,</dt><dd><p>where “_N” has the count of duplications of the key values of that record</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvEdd">
<code class="descname">smvEdd</code><span class="sig-paren">(</span><em>*cols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvEdd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvEdd" title="Permalink to this definition">¶</a></dt>
<dd><p>Display EDD summary</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cols</strong> (<em>*string</em>) – column names on which to perform EDD summary</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvEdd</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvEddCompare">
<code class="descname">smvEddCompare</code><span class="sig-paren">(</span><em>df2</em>, <em>ignoreColName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvEddCompare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvEddCompare" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare 2 DFs by comparing their Edd Summary result</p>
<p>The result of the comparison is printed out.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df2</strong> (<em>DataFrame</em>) – the DataFrame to compare with</p></li>
<li><p><strong>ignoreColName</strong> (<em>boolean</em>) – specifies whether to ignore column names, default is false</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvEddCompare</span><span class="p">(</span><span class="n">df2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvEddCompare</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvExpandStruct">
<code class="descname">smvExpandStruct</code><span class="sig-paren">(</span><em>*cols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvExpandStruct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvExpandStruct" title="Permalink to this definition">¶</a></dt>
<dd><p>Expand structure type column to a group of columns</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cols</strong> (<em>*string</em>) – column names to expand</p>
</dd>
</dl>
<p class="rubric">Example</p>
<dl class="simple">
<dt>input DF:</dt><dd><p>[id: string, address: struct&lt;state:string, zip:string, street:string&gt;]</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvExpandStruct</span><span class="p">(</span><span class="s2">&quot;address&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="simple">
<dt>output DF:</dt><dd><p>[id: string, state: string, zip: string, street: string]</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>DF with expanded columns</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvExportCsv">
<code class="descname">smvExportCsv</code><span class="sig-paren">(</span><em>path</em>, <em>n=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvExportCsv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvExportCsv" title="Permalink to this definition">¶</a></dt>
<dd><p>Export DataFrame to local file system</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>string</em>) – relative path to the app running directory on local file system (instead of HDFS)</p></li>
<li><p><strong>n</strong> (<em>integer</em>) – optional. number of records to export. default is all records</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since we have to collect the DF and then call JAVA file operations, the job have to be launched as either local or yar-client mode. Also it is user’s responsibility to make sure that the DF is small enough to fit into local file system.</p>
</div>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvExportCsv</span><span class="p">(</span><span class="s2">&quot;./target/python-test-export-csv.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvFreqHist">
<code class="descname">smvFreqHist</code><span class="sig-paren">(</span><em>*cols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvFreqHist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvFreqHist" title="Permalink to this definition">¶</a></dt>
<dd><p>Print EDD histogram with frequency sorting</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cols</strong> (<em>*string</em>) – The columns on which to perform EDD histogram</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvFreqHist</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvGetDesc">
<code class="descname">smvGetDesc</code><span class="sig-paren">(</span><em>colName=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvGetDesc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvGetDesc" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns column description(s)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>colName</strong> (<em>string</em>) – optional column name for which to get the description.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGetDesc</span><span class="p">(</span><span class="s2">&quot;col_a&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGetDesc</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>description string of colName, if specified</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(string)</p>
</dd>
</dl>
<p>or:</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of (colName, description) pairs for all columns</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(list(tuple))</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvGetLabel">
<code class="descname">smvGetLabel</code><span class="sig-paren">(</span><em>colName=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvGetLabel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvGetLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of column label(s)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>colName</strong> (<em>string</em>) – optional column name for which to get the label.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGetLabel</span><span class="p">(</span><span class="s2">&quot;col_a&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGetLabel</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of label strings of colName, if specified</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(list(string))</p>
</dd>
</dl>
<p>or:</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of (colName, list(labels)) pairs for all columns</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(list(tuple))</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvGroupBy">
<code class="descname">smvGroupBy</code><span class="sig-paren">(</span><em>*cols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvGroupBy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvGroupBy" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to groupBy, instead of creating GroupedData, create an <cite>SmvGroupedData</cite> object.</p>
<p>See [[org.tresamigos.smv.SmvGroupedDataFunc]] for list of functions that can be applied to the grouped data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cols</strong> (<em>*string</em><em> or </em><em>*Column</em>) – column names or Column objects to group on</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is going away shortly and user will be able to use standard Spark <cite>groupBy</cite> method directly.</p>
</div>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGroupBy</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;k&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGroupBy</span><span class="p">(</span><span class="s2">&quot;k&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>grouped data object</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(<a class="reference internal" href="#smv.helpers.SmvGroupedData" title="smv.helpers.SmvGroupedData">SmvGroupedData</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvHashSample">
<code class="descname">smvHashSample</code><span class="sig-paren">(</span><em>key</em>, <em>rate=0.01</em>, <em>seed=23</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvHashSample"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvHashSample" title="Permalink to this definition">¶</a></dt>
<dd><p>Sample the df according to the hash of a column</p>
<p>MurmurHash3 algorithm is used for generating the hash</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>string</em><em> or </em><em>Column</em>) – column name or Column to sample on</p></li>
<li><p><strong>rate</strong> (<em>double</em>) – sample rate in range (0, 1] with a default of 0.01 (1%)</p></li>
<li><p><strong>seed</strong> (<em>int</em>) – random generator integer seed with a default of 23</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvHashSample</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="p">),</span> <span class="n">rate</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>sampled DF</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvHist">
<code class="descname">smvHist</code><span class="sig-paren">(</span><em>*cols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvHist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvHist" title="Permalink to this definition">¶</a></dt>
<dd><p>Display EDD histogram</p>
<p>Each column’s histogram prints separately</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cols</strong> (<em>*string</em>) – The columns on which to perform EDD histogram</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvHist</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvJoinByKey">
<code class="descname">smvJoinByKey</code><span class="sig-paren">(</span><em>other</em>, <em>keys</em>, <em>joinType</em>, <em>isNullSafe=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvJoinByKey"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvJoinByKey" title="Permalink to this definition">¶</a></dt>
<dd><p>joins two DataFrames on a key</p>
<p>The Spark <cite>DataFrame</cite> join operation does not handle duplicate key names.
If both left and right side of the join operation contain the same key,
the result <cite>DataFrame</cite> is unusable.</p>
<p>The <cite>smvJoinByKey</cite> method will allow the user to join two <cite>DataFrames</cite> using the same join key.
Post join, only the left side keys will remain. In case of outer-join, the
<cite>coalesce(leftkey, rightkey)</cite> will replace the left key to be kept.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> (<em>DataFrame</em>) – the DataFrame to join with</p></li>
<li><p><strong>keys</strong> (<em>list</em><em>(</em><em>string</em><em>)</em>) – a list of column names on which to apply the join</p></li>
<li><p><strong>joinType</strong> (<em>string</em>) – choose one of [‘inner’, ‘outer’, ‘leftouter’, ‘rightouter’, ‘leftsemi’]</p></li>
<li><p><strong>isNullSafe</strong> (<em>boolean</em>) – if true matches null keys between left and right tables and keep in output. Default False.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span><span class="o">.</span><span class="n">smvJoinByKey</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;k&quot;</span><span class="p">],</span> <span class="s2">&quot;inner&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_with_null_key</span><span class="o">.</span><span class="n">smvJoinByKey</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;k&quot;</span><span class="p">],</span> <span class="s2">&quot;inner&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>result of the join operation</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvJoinMultipleByKey">
<code class="descname">smvJoinMultipleByKey</code><span class="sig-paren">(</span><em>keys</em>, <em>joinType='inner'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvJoinMultipleByKey"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvJoinMultipleByKey" title="Permalink to this definition">¶</a></dt>
<dd><p>Create multiple DF join builder</p>
<p>It is used in conjunction with <cite>joinWith</cite> and <cite>doJoin</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>list</em><em>(</em><em>string</em><em>)</em>) – a list of column names on which to apply the join</p></li>
<li><p><strong>joinType</strong> (<em>string</em>) – choose one of [‘inner’, ‘outer’, ‘leftouter’, ‘rightouter’, ‘leftsemi’]</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">joinMultipleByKey</span><span class="p">([</span><span class="s2">&quot;k1&quot;</span><span class="p">,</span> <span class="s2">&quot;k2&quot;</span><span class="p">],</span> <span class="s2">&quot;inner&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">joinWith</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="s2">&quot;_df2&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">joinWith</span><span class="p">(</span><span class="n">df3</span><span class="p">,</span> <span class="s2">&quot;_df3&quot;</span><span class="p">,</span> <span class="s2">&quot;leftouter&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">doJoin</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the builder object for the multi join operation</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(<a class="reference internal" href="#smv.helpers.SmvMultiJoin" title="smv.helpers.SmvMultiJoin">SmvMultiJoin</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvLabel">
<code class="descname">smvLabel</code><span class="sig-paren">(</span><em>colNames</em>, <em>labels</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvLabel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds labels to the specified columns</p>
<p>A column may have multiple labels. Adding the same label twice
to a column has the same effect as adding that label once.</p>
<p>For multiple colNames, the same set of labels will be added to all of them.
When colNames is empty, the set of labels will be added to all columns of the df.
labels parameters must be non-empty.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels</strong> – (list(string)) a list of label strings to add</p></li>
<li><p><strong>colNames</strong> – (list(string)) list of names of columns for which to add labels</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvLabel</span><span class="p">([</span><span class="s2">&quot;col_a&quot;</span><span class="p">,</span> <span class="s2">&quot;col_b&quot;</span><span class="p">,</span> <span class="s2">&quot;col_c&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;tag_1&quot;</span><span class="p">,</span> <span class="s2">&quot;tag_2&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvLabel</span><span class="p">([],</span> <span class="p">[</span><span class="s2">&quot;tag_1&quot;</span><span class="p">,</span> <span class="s2">&quot;tag_2&quot;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the DataFrame with labels added to the specified columns</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
<p>or:</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the DataFrame with labels added to all columns</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvOverlapCheck">
<code class="descname">smvOverlapCheck</code><span class="sig-paren">(</span><em>keyColName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvOverlapCheck"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvOverlapCheck" title="Permalink to this definition">¶</a></dt>
<dd><p>For a set of DFs, which share the same key column, check the overlap across them</p>
<p>The other DataFrames are specified in another set of parentheses, as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span><span class="o">.</span><span class="n">smvOverlapCheck</span><span class="p">(</span><span class="n">key</span><span class="p">)(</span><span class="o">*</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>keyColName</strong> (<em>string</em>) – the column name for the key column</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span><span class="o">.</span><span class="n">smvOverlapCheck</span><span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="p">)(</span><span class="n">df2</span><span class="p">,</span> <span class="n">df3</span><span class="p">,</span> <span class="n">df4</span><span class="p">)</span>
</pre></div>
</div>
<dl class="simple">
<dt>output DF has 2 columns:</dt><dd><ul class="simple">
<li><p>key</p></li>
<li><p>flag: a bit-string, e.g. 0110. Each bit represents whether the original DF has this key</p></li>
</ul>
</dd>
</dl>
<p>It can be used with EDD to summarize on the flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span><span class="o">.</span><span class="n">smvOverlapCheck</span><span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="p">)(</span><span class="n">df2</span><span class="p">,</span> <span class="n">df3</span><span class="p">)</span><span class="o">.</span><span class="n">smvHist</span><span class="p">(</span><span class="s2">&quot;flag&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the DataFrame with the key and flag columns</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvPrefixFieldNames">
<code class="descname">smvPrefixFieldNames</code><span class="sig-paren">(</span><em>prefix</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvPrefixFieldNames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvPrefixFieldNames" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a prefix to all column names in the given <cite>DataFrame</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>prefix</strong> (<em>string</em>) – prefix string to be added to all the column names</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvPrefixFieldNames</span><span class="p">(</span><span class="s2">&quot;x_&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Above will add <cite>x_</cite> to the beginning of every column name in the <cite>DataFrame</cite>.
Please note that if the renamed column names over lap with existing columns,
the method will error out.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvRemoveDesc">
<code class="descname">smvRemoveDesc</code><span class="sig-paren">(</span><em>*colNames</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvRemoveDesc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvRemoveDesc" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes description for the given columns from the Dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>colNames</strong> (<em>*string</em>) – names of columns for which to remove the description</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvRemoveDesc</span><span class="p">(</span><span class="s2">&quot;col_a&quot;</span><span class="p">,</span> <span class="s2">&quot;col_b&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvRemoveDesc</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the DataFrame with column descriptions removed</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
<p>or:</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the DataFrae with all column descriptions removed</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvRemoveLabel">
<code class="descname">smvRemoveLabel</code><span class="sig-paren">(</span><em>colNames=None</em>, <em>labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvRemoveLabel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvRemoveLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes labels from the specified columns</p>
<p>For multiple colNames, the same set of labels will be removed from all of them.
When colNames is empty, the set of labels will be removed from all columns of the df.
When labels is empty, all labels will be removed from the given columns.</p>
<p>If neither columns nor labels are specified, i.e. both parameter lists are empty,
then all labels are removed from all columns in the data frame, essentially clearing
the label meta data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels</strong> – (list(string)) a list of label strings to remove</p></li>
<li><p><strong>colNames</strong> – (list(string)) list of names of columns for which to remove labels</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvRemoveLabel</span><span class="p">([</span><span class="s2">&quot;col_a&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;tag_1&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvRemoveLabel</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the DataFrame with specified labels removed from the specified columns</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
<p>or:</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the DataFrame with all label meta data cleared</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvRenameField">
<code class="descname">smvRenameField</code><span class="sig-paren">(</span><em>*namePairs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvRenameField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvRenameField" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename one or more fields of a <cite>DataFrame</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>namePairs</strong> (<em>*tuple</em>) – tuples of strings where the first is the source column name, and the second is the target column name</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvRenameField</span><span class="p">((</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;aa&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;cc&quot;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the DataFrame with renamed fields</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvSelectMinus">
<code class="descname">smvSelectMinus</code><span class="sig-paren">(</span><em>*cols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvSelectMinus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvSelectMinus" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove one or more columns from current DataFrame</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cols</strong> (<em>*string</em><em> or </em><em>*Column</em>) – column names or Columns to remove from the DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvSelectMinus</span><span class="p">(</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvSelectMinus</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;col1&quot;</span><span class="p">),</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;col2&quot;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the resulting DataFrame after removal of columns</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvSelectPlus">
<code class="descname">smvSelectPlus</code><span class="sig-paren">(</span><em>*cols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvSelectPlus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvSelectPlus" title="Permalink to this definition">¶</a></dt>
<dd><p>Selects all the current columns in current DataFrame plus the supplied expressions</p>
<p>The new columns are added to the end of the current column list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cols</strong> (<em>*Column</em>) – expressions to add to the DataFrame</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvSelectPlus</span><span class="p">((</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;count&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;amt&quot;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the resulting DataFrame after removal of columns</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvSkewJoinByKey">
<code class="descname">smvSkewJoinByKey</code><span class="sig-paren">(</span><em>other</em>, <em>joinType</em>, <em>skewVals</em>, <em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvSkewJoinByKey"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvSkewJoinByKey" title="Permalink to this definition">¶</a></dt>
<dd><p>Join that leverages broadcast (map-side) join of rows with skewed (high-frequency) values</p>
<p>Rows keyed by skewed values are joined via broadcast join while remaining
rows are joined without broadcast join. Occurrences of skewVals in df2 should be
infrequent enough that the filtered table is small enough for a broadcast join.
result is the union of the join results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> (<em>DataFrame</em>) – DataFrame to join with</p></li>
<li><p><strong>joinType</strong> (<em>str</em>) – name of type of join (e.g. “inner”)</p></li>
<li><p><strong>skewVals</strong> (<em>list</em><em>(</em><em>object</em><em>)</em>) – list of skewed values</p></li>
<li><p><strong>key</strong> (<em>str</em>) – key on which to join (also the Column with the skewed values)</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvSkewJoinByKey</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="s2">&quot;inner&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="s2">&quot;cid&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>will broadcast join the rows of df1 and df2 where col(“cid”) == “4”
and join the remaining rows of df1 and df2 without broadcast join.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the result of the join operation</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvUnion">
<code class="descname">smvUnion</code><span class="sig-paren">(</span><em>*dfothers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvUnion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvUnion" title="Permalink to this definition">¶</a></dt>
<dd><p>Unions DataFrames with different number of columns by column name and schema</p>
<p>Spark unionAll ignores column names &amp; schema, and can only be performed on tables with the same number of columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dfOthers</strong> (<em>*DataFrame</em>) – the dataframes to union with</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvUnion</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">df3</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the union of all specified DataFrames</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvUnpivot">
<code class="descname">smvUnpivot</code><span class="sig-paren">(</span><em>*cols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvUnpivot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvUnpivot" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpivot the selected columns</p>
<p>Given a set of records with value columns, turns the value columns into value rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cols</strong> (<em>*string</em>) – the names of the columns to unpivot</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>input DF:</p>
<blockquote>
<div><table class="docutils align-center">
<colgroup>
<col style="width: 31%" />
<col style="width: 23%" />
<col style="width: 23%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>id</p></th>
<th class="head"><p>X</p></th>
<th class="head"><p>Y</p></th>
<th class="head"><p>Z</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>A</p></td>
<td><p>B</p></td>
<td><p>C</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>D</p></td>
<td><p>E</p></td>
<td><p>F</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>G</p></td>
<td><p>H</p></td>
<td><p>I</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvUnpivot</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>output DF:</p>
<blockquote>
<div><table class="docutils align-center">
<colgroup>
<col style="width: 21%" />
<col style="width: 42%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>id</p></th>
<th class="head"><p>column</p></th>
<th class="head"><p>value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>X</p></td>
<td><p>A</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Y</p></td>
<td><p>B</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Z</p></td>
<td><p>C</p></td>
</tr>
<tr class="row-odd"><td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Y</p></td>
<td><p>H</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Z</p></td>
<td><p>I</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the unpivoted DataFrame</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvUnpivotRegex">
<code class="descname">smvUnpivotRegex</code><span class="sig-paren">(</span><em>cols</em>, <em>colNameFn</em>, <em>indexColName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvUnpivotRegex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvUnpivotRegex" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpivot the selected columns using the specified regex</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cols</strong> (<em>*string</em>) – the names of the columns to unpivot</p></li>
<li><p><strong>colNameFn</strong> (<em>string</em>) – a regex representing the function to be applied when unpivoting</p></li>
<li><p><strong>indexColName</strong> (<em>string</em>) – the name of the index column to be created</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>input DF:</p>
<blockquote>
<div><table class="docutils align-center">
<colgroup>
<col style="width: 13%" />
<col style="width: 22%" />
<col style="width: 22%" />
<col style="width: 22%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>id</p></th>
<th class="head"><p>A_1</p></th>
<th class="head"><p>A_2</p></th>
<th class="head"><p>B_1</p></th>
<th class="head"><p>B_2</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>1_a_1</p></td>
<td><p>1_a_2</p></td>
<td><p>1_b_1</p></td>
<td><p>1_b_2</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>2_a_1</p></td>
<td><p>2_a_2</p></td>
<td><p>2_b_1</p></td>
<td><p>2_b_2</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvUnpivotRegex</span><span class="p">(</span> <span class="p">[</span><span class="s2">&quot;A_1&quot;</span><span class="p">,</span> <span class="s2">&quot;A_2&quot;</span><span class="p">,</span> <span class="s2">&quot;B_1&quot;</span><span class="p">,</span> <span class="s2">&quot;B_2&quot;</span><span class="p">],</span> <span class="s2">&quot;(.*)_(.*)&quot;</span><span class="p">,</span> <span class="s2">&quot;index&quot;</span> <span class="p">)</span>
</pre></div>
</div>
<p>output DF:</p>
<blockquote>
<div><table class="docutils align-center">
<colgroup>
<col style="width: 16%" />
<col style="width: 28%" />
<col style="width: 28%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>id</p></th>
<th class="head"><p>index</p></th>
<th class="head"><p>A</p></th>
<th class="head"><p>B</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>1</p></td>
<td><p>1_a_1</p></td>
<td><p>1_b_1</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>2</p></td>
<td><p>1_a_2</p></td>
<td><p>1_b_2</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>1</p></td>
<td><p>2_a_1</p></td>
<td><p>2_b_1</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>2</p></td>
<td><p>2_a_2</p></td>
<td><p>2_b_2</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the unpivoted DataFrame</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.smvWithLabel">
<code class="descname">smvWithLabel</code><span class="sig-paren">(</span><em>labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.smvWithLabel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.smvWithLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all column names in the data frame that contain all the specified labels</p>
<p>If the labels is empty, returns all unlabeled columns in the data frame.
Will throw if there are no columns that satisfy the condition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>labels</strong> – (list(string)) a list of label strings for the columns to match</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvWithLabel</span><span class="p">([</span><span class="s2">&quot;tag_1&quot;</span><span class="p">,</span> <span class="s2">&quot;tag_2&quot;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of column name strings that match the specified labels</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(list(string))</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.DataFrameHelper.topNValsByFreq">
<code class="descname">topNValsByFreq</code><span class="sig-paren">(</span><em>n</em>, <em>col</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#DataFrameHelper.topNValsByFreq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.DataFrameHelper.topNValsByFreq" title="Permalink to this definition">¶</a></dt>
<dd><p>Get top N most frequent values in Column col</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> (<em>int</em>) – maximum number of values</p></li>
<li><p><strong>col</strong> (<em>Column</em>) – which column to get values from</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">topNValsByFreq</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;cid&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>will return the single most frequent value in the cid column</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>most frequent values (type depends on schema)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(list(object))</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.helpers.SmvGroupedData">
<em class="property">class </em><code class="descclassname">smv.helpers.</code><code class="descname">SmvGroupedData</code><span class="sig-paren">(</span><em>df</em>, <em>keys</em>, <em>sgd</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#SmvGroupedData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.SmvGroupedData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The result of running <cite>smvGroupBy</cite> on a DataFrame. Implements special SMV aggregations.</p>
<dl class="method">
<dt id="smv.helpers.SmvGroupedData.smvDecile">
<code class="descname">smvDecile</code><span class="sig-paren">(</span><em>value_cols</em>, <em>ignoreNull=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#SmvGroupedData.smvDecile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.SmvGroupedData.smvDecile" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute deciles of some columns on a grouped data</p>
<p>Simply an alias to <cite>smvQuantile(value_cols, 10, ignoreNull)</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value_cols</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – columns to calculate deciles on</p></li>
<li><p><strong>ignoreNull</strong> (<em>boolean</em>) – if true, null values’s percent ranks will be nulls, otherwise,
as Spark sort considers null smaller than any value, nulls percent ranks will be
zeros. Default true.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.SmvGroupedData.smvFillNullWithPrevValue">
<code class="descname">smvFillNullWithPrevValue</code><span class="sig-paren">(</span><em>*orderCols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#SmvGroupedData.smvFillNullWithPrevValue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.SmvGroupedData.smvFillNullWithPrevValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill in Null values with “previous” value according to an ordering</p>
<p class="rubric">Examples</p>
<p>Given DataFrame df representing the table</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>K</p></th>
<th class="head"><p>T</p></th>
<th class="head"><p>V</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>a</p></td>
<td><p>1</p></td>
<td><p>null</p></td>
</tr>
<tr class="row-odd"><td><p>a</p></td>
<td><p>2</p></td>
<td><p>a</p></td>
</tr>
<tr class="row-even"><td><p>a</p></td>
<td><p>3</p></td>
<td><p>b</p></td>
</tr>
<tr class="row-odd"><td><p>a</p></td>
<td><p>4</p></td>
<td><p>null</p></td>
</tr>
</tbody>
</table>
<p>we can use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; df.smvGroupBy(&quot;K&quot;).smvFillNullWithPrevValue($&quot;T&quot;.asc)(&quot;V&quot;)
</pre></div>
</div>
<p>to produce the result</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>K</p></th>
<th class="head"><p>T</p></th>
<th class="head"><p>V</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>a</p></td>
<td><p>1</p></td>
<td><p>null</p></td>
</tr>
<tr class="row-odd"><td><p>a</p></td>
<td><p>2</p></td>
<td><p>a</p></td>
</tr>
<tr class="row-even"><td><p>a</p></td>
<td><p>3</p></td>
<td><p>b</p></td>
</tr>
<tr class="row-odd"><td><p>a</p></td>
<td><p>4</p></td>
<td><p>b</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>result of fill nulls with previous value</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Dataframe)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.SmvGroupedData.smvPercentRank">
<code class="descname">smvPercentRank</code><span class="sig-paren">(</span><em>value_cols</em>, <em>ignoreNull=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#SmvGroupedData.smvPercentRank"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.SmvGroupedData.smvPercentRank" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the percent rank of a sequence of columns within a group in a given DataFrame.</p>
<p>Used Spark’s <cite>percentRank</cite> window function. The precent rank is defined as
<cite>R/(N-1)</cite>, where <cite>R</cite> is the base 0 rank, and <cite>N</cite> is the population size. Under
this definition, min value (R=0) has percent rank <cite>0.0</cite>, and max value has percent
rank <cite>1.0</cite>.</p>
<p>For each column for which the percent rank is computed (e.g. “v”), an additional column is
added to the output, <cite>v_pctrnk</cite></p>
<p>All other columns in the input are untouched and propagated to the output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value_cols</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – columns to calculate percentRank on</p></li>
<li><p><strong>ignoreNull</strong> (<em>boolean</em>) – if true, null values’s percent ranks will be nulls, otherwise,
as Spark sort considers null smaller than any value, nulls percent ranks will be
zeros. Default true.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGroupBy</span><span class="p">(</span><span class="s1">&#39;g, &#39;</span><span class="n">g2</span><span class="p">)</span><span class="o">.</span><span class="n">smvPercentRank</span><span class="p">([</span><span class="s2">&quot;v1&quot;</span><span class="p">,</span> <span class="s2">&quot;v2&quot;</span><span class="p">,</span> <span class="s2">&quot;v3&quot;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.SmvGroupedData.smvPivot">
<code class="descname">smvPivot</code><span class="sig-paren">(</span><em>pivotCols</em>, <em>valueCols</em>, <em>baseOutput</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#SmvGroupedData.smvPivot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.SmvGroupedData.smvPivot" title="Permalink to this definition">¶</a></dt>
<dd><p>smvPivot adds the pivoted columns without additional aggregation. In other words
N records in, N records out</p>
<p>SmvPivot for Pivot Operations:</p>
<p>Pivot Operation on DataFrame that transforms multiple rows per key into a columns so
they can be aggregated to a single row for a given key while preserving all the data
variance.</p>
<p class="rubric">Example</p>
<p>For input data below:</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 18%" />
<col style="width: 25%" />
<col style="width: 32%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>id</p></th>
<th class="head"><p>month</p></th>
<th class="head"><p>product</p></th>
<th class="head"><p>count</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>5/14</p></td>
<td><p>A</p></td>
<td><p>100</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>6/14</p></td>
<td><p>B</p></td>
<td><p>200</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>5/14</p></td>
<td><p>B</p></td>
<td><p>300</p></td>
</tr>
</tbody>
</table>
<p>We would like to generate a data set to be ready for aggregations.
The desired output is:</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 8%" />
<col style="width: 23%" />
<col style="width: 23%" />
<col style="width: 23%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>id</p></th>
<th class="head"><p>count_5_14_A</p></th>
<th class="head"><p>count_5_14_B</p></th>
<th class="head"><p>count_6_14_A</p></th>
<th class="head"><p>count_6_14_B</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>100</p></td>
<td><p>NULL</p></td>
<td><p>NULL</p></td>
<td><p>NULL</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>NULL</p></td>
<td><p>NULL</p></td>
<td><p>NULL</p></td>
<td><p>200</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>NULL</p></td>
<td><p>300</p></td>
<td><p>NULL</p></td>
<td><p>NULL</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>The raw input is divided into three parts.</dt><dd><ol class="arabic simple">
<li><dl class="simple">
<dt>key column: part of the primary key that is preserved in the output.</dt><dd><p>That would be the <cite>id</cite> column in the above example.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>pivot columns: the columns whose row values will become the new column names.</dt><dd><p>The cross product of all unique values for <em>each</em> column is used to generate
the output column names.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>value column: the value that will be copied/aggregated to corresponding output</dt><dd><p>column. <cite>count</cite> in our example.</p>
</dd>
</dl>
</li>
</ol>
</dd>
</dl>
<p>Example code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGroupBy</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvPivot</span><span class="p">([[</span><span class="s2">&quot;month&quot;</span><span class="p">,</span> <span class="s2">&quot;product&quot;</span><span class="p">]],</span> <span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;5_14_A&quot;</span><span class="p">,</span> <span class="s2">&quot;5_14_B&quot;</span><span class="p">,</span> <span class="s2">&quot;6_14_A&quot;</span><span class="p">,</span> <span class="s2">&quot;6_14_B&quot;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pivotCols</strong> (<em>list</em><em>(</em><em>list</em><em>(</em><em>str</em><em>)</em><em>)</em>) – specify the pivot columns, on above example, it is
[[‘month, ‘product]]. If [[‘month’], [‘month’, ‘product’]] is
used, the output columns will have “count_5_14” and “count_6_14” as
addition to the example.</p></li>
<li><p><strong>valueCols</strong> (<em>list</em><em>(</em><em>string</em><em>)</em>) – names of value columns which will be prepared for
aggregation</p></li>
<li><p><strong>baseOutput</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – expected names of the pivoted column
In above example, it is [“5_14_A”, “5_14_B”, “6_14_A”, “6_14_B”].
The user is required to supply the list of expected pivot column output names to avoid
and extra action on the input DataFrame just to extract the possible pivot columns.
If an empty sequence is provided, the base output columns will be extracted from
values in the pivot columns (will cause an action on the entire DataFrame!)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>result of pivot operation</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.SmvGroupedData.smvPivotCoalesce">
<code class="descname">smvPivotCoalesce</code><span class="sig-paren">(</span><em>pivotCols</em>, <em>valueCols</em>, <em>baseOutput</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#SmvGroupedData.smvPivotCoalesce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.SmvGroupedData.smvPivotCoalesce" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform SmvPivot, then coalesce the output
Please refer smvPivot’s document for context and details of the SmvPivot operation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pivotCols</strong> (<em>list</em><em>(</em><em>list</em><em>(</em><em>str</em><em>)</em><em>)</em>) – list of lists of column names to pivot</p></li>
<li><p><strong>valueCols</strong> (<em>list</em><em>(</em><em>string</em><em>)</em>) – names of value columns to coalesce</p></li>
<li><p><strong>baseOutput</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – expected names pivoted column</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>For example, given a DataFrame df that represents the table</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 30%" />
<col style="width: 30%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>k</p></th>
<th class="head"><p>p</p></th>
<th class="head"><p>v</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>a</p></td>
<td><p>c</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>a</p></td>
<td><p>d</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>a</p></td>
<td><p>e</p></td>
<td><p>null</p></td>
</tr>
<tr class="row-odd"><td><p>a</p></td>
<td><p>f</p></td>
<td><p>5</p></td>
</tr>
</tbody>
</table>
<p>we can use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGroupBy</span><span class="p">(</span><span class="s2">&quot;k&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvPivotCoalesce</span><span class="p">([[</span><span class="s1">&#39;p&#39;</span><span class="p">]],</span> <span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>to produce the following output</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 19%" />
<col style="width: 19%" />
<col style="width: 19%" />
<col style="width: 25%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>k</p></th>
<th class="head"><p>v_c</p></th>
<th class="head"><p>v_d</p></th>
<th class="head"><p>v_e</p></th>
<th class="head"><p>v_f</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>a</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>null</p></td>
<td><p>5</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>result of pivot coalesce</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(Dataframe)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.SmvGroupedData.smvPivotSum">
<code class="descname">smvPivotSum</code><span class="sig-paren">(</span><em>pivotCols</em>, <em>valueCols</em>, <em>baseOutput</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#SmvGroupedData.smvPivotSum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.SmvGroupedData.smvPivotSum" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform SmvPivot, then sum the results.
Please refer smvPivot’s document for context and details of the SmvPivot operation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pivotCols</strong> (<em>list</em><em>(</em><em>list</em><em>(</em><em>str</em><em>)</em><em>)</em>) – list of lists of column names to pivot</p></li>
<li><p><strong>valueCols</strong> (<em>list</em><em>(</em><em>string</em><em>)</em>) – names of value columns to sum</p></li>
<li><p><strong>baseOutput</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – expected names pivoted column</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>For example, given a DataFrame df that represents the table</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 18%" />
<col style="width: 25%" />
<col style="width: 32%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>id</p></th>
<th class="head"><p>month</p></th>
<th class="head"><p>product</p></th>
<th class="head"><p>count</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>5/14</p></td>
<td><p>A</p></td>
<td><p>100</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>6/14</p></td>
<td><p>B</p></td>
<td><p>200</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>5/14</p></td>
<td><p>B</p></td>
<td><p>300</p></td>
</tr>
</tbody>
</table>
<p>we can use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGroupBy</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvPivotSum</span><span class="p">([[</span><span class="s2">&quot;month&quot;</span><span class="p">,</span> <span class="s2">&quot;product&quot;</span><span class="p">]],</span> <span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;5_14_A&quot;</span><span class="p">,</span> <span class="s2">&quot;5_14_B&quot;</span><span class="p">,</span> <span class="s2">&quot;6_14_A&quot;</span><span class="p">,</span> <span class="s2">&quot;6_14_B&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>to produce the following output</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 8%" />
<col style="width: 23%" />
<col style="width: 23%" />
<col style="width: 23%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>id</p></th>
<th class="head"><p>count_5_14_A</p></th>
<th class="head"><p>count_5_14_B</p></th>
<th class="head"><p>count_6_14_A</p></th>
<th class="head"><p>count_6_14_B</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>100</p></td>
<td><p>300</p></td>
<td><p>NULL</p></td>
<td><p>200</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>result of pivot sum</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.SmvGroupedData.smvQuantile">
<code class="descname">smvQuantile</code><span class="sig-paren">(</span><em>value_cols</em>, <em>bin_num</em>, <em>ignoreNull=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#SmvGroupedData.smvQuantile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.SmvGroupedData.smvQuantile" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the quantile bin numbers within a group in a given DataFrame.</p>
<p>Estimate quantiles and quantile groups given a data with unknown distribution is
quite arbitrary. There are multiple ‘definitions’ used in different softwares. Please refer
<a class="reference external" href="https://en.wikipedia.org/wiki/Quantile#Estimating_quantiles_from_a_sample">https://en.wikipedia.org/wiki/Quantile#Estimating_quantiles_from_a_sample</a>
for details.</p>
<p><cite>smvQuantile</cite> calculated from Spark’s <cite>percentRank</cite>. The algorithm is equavalent to the
one labled as <cite>R-7, Excel, SciPy-(1,1), Maple-6</cite> in above wikipedia page. Please note it
is slight different from SAS’s default algorithm (labled as SAS-5).</p>
<p>Returned quantile bin numbers are 1 based. For example when <cite>bin_num=10</cite>, returned values are
integers from 1 to 10, inclusively.</p>
<p>For each column for which the quantile is computed (e.g. “v”), an additional column is added to
the output, “v_quantile”.</p>
<p>All other columns in the input are untouched and propagated to the output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value_cols</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – columns to calculate quantiles on</p></li>
<li><p><strong>bin_num</strong> (<em>int</em>) – number of quantiles, e.g. 4 for quartile, 10 for decile</p></li>
<li><p><strong>ignoreNull</strong> (<em>boolean</em>) – if true, null values’s percent ranks will be nulls, otherwise,
as Spark sort considers null smaller than any value, nulls percent ranks will be
zeros. Default true.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGroupBy</span><span class="p">(</span><span class="s1">&#39;g, &#39;</span><span class="n">g2</span><span class="p">)</span><span class="o">.</span><span class="n">smvQuantile</span><span class="p">([</span><span class="s2">&quot;v&quot;</span><span class="p">],</span> <span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.SmvGroupedData.smvRePartition">
<code class="descname">smvRePartition</code><span class="sig-paren">(</span><em>numParts</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#SmvGroupedData.smvRePartition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.SmvGroupedData.smvRePartition" title="Permalink to this definition">¶</a></dt>
<dd><p>Repartition SmvGroupedData using specified partitioner on the keys. A
HashPartitioner with the specified number of partitions will be used.</p>
<p>This method is used in the cases that the key-space is very large. In the
current Spark DF’s groupBy method, the entire key-space is actually loaded
into executor’s memory, which is very dangerous when the key space is big.
The regular DF’s repartition function doesn’t solve this issue since a random
repartition will not guaranteed to reduce the key-space on each executor.
In that case we need to use this function to linearly reduce the key-space.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGroupBy</span><span class="p">(</span><span class="s2">&quot;k1&quot;</span><span class="p">,</span> <span class="s2">&quot;k2&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvRePartition</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="s2">&quot;v&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="s2">&quot;v&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.SmvGroupedData.smvTimePanelAgg">
<code class="descname">smvTimePanelAgg</code><span class="sig-paren">(</span><em>time_col</em>, <em>start</em>, <em>end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#SmvGroupedData.smvTimePanelAgg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.SmvGroupedData.smvTimePanelAgg" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply aggregation on given keys and specified time panel period</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_col</strong> (<em>str</em>) – the column name in the data as the event timestamp</p></li>
<li><p><strong>start</strong> (<em>panel.PartialTime</em>) – could be Day, Month, Week, Quarter, refer the panel
package for details</p></li>
<li><p><strong>end</strong> (<em>panel.PartialTime</em>) – should be the same time type as the “start”</p></li>
<li><p><strong>addMissingTimeWithNull</strong> (<em>default true</em>) – fill null records</p></li>
</ul>
</dd>
</dl>
<p>Both <cite>start</cite> and <cite>end</cite> PartialTime are inclusive.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGroupBy</span><span class="p">(</span><span class="s2">&quot;K&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvTimePanelAgg</span><span class="p">(</span><span class="s2">&quot;TS&quot;</span><span class="p">,</span> <span class="n">Week</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">Week</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">))(</span>
<span class="go">        sum(&quot;V&quot;).alias(&quot;V&quot;)</span>
<span class="go">    )</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>a result data frame with keys, and a column with name <cite>smvTime</cite>, and</dt><dd><p>aggregated values. Refer the panel package for the potential forms of different
PartialTimes</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
<p>When addMissingTimeWithNull is true, the aggregation should be always on the variables
instead of on literals (should NOT be count(lit(1))).</p>
<p>Example with on data:</p>
<blockquote>
<div><p>Given DataFrame df as</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 14%" />
<col style="width: 57%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>K</p></th>
<th class="head"><p>TS</p></th>
<th class="head"><p>V</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>2012-01-01</p></td>
<td><p>1.5</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>2012-03-01</p></td>
<td><p>4.5</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>2012-07-01</p></td>
<td><p>7.5</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>2012-05-01</p></td>
<td><p>2.45</p></td>
</tr>
</tbody>
</table>
<p>after applying</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">smv.panel</span> <span class="k">as</span> <span class="nn">P</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGroupBy</span><span class="p">(</span><span class="s2">&quot;K&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvTimePanelAgg</span><span class="p">(</span><span class="s2">&quot;TS&quot;</span><span class="p">,</span> <span class="n">P</span><span class="o">.</span><span class="n">Quarter</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">P</span><span class="o">.</span><span class="n">Quarter</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">2</span><span class="p">))(</span>
<span class="go">        sum(&quot;V&quot;).alias(&quot;V&quot;)</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>the result is</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 17%" />
<col style="width: 50%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>K</p></th>
<th class="head"><p>smvTime</p></th>
<th class="head"><p>V</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Q201201</p></td>
<td><p>6.0</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Q201202</p></td>
<td><p>2.45</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.SmvGroupedData.smvTopNRecs">
<code class="descname">smvTopNRecs</code><span class="sig-paren">(</span><em>maxElems</em>, <em>*cols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#SmvGroupedData.smvTopNRecs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.SmvGroupedData.smvTopNRecs" title="Permalink to this definition">¶</a></dt>
<dd><p>For each group, return the top N records according to a given ordering</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGroupBy</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvTopNRecs</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;amt&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">desc</span><span class="p">())</span>
</pre></div>
</div>
<p>This will keep the 3 largest amt records for each id</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>maxElems</strong> (<em>int</em>) – maximum number of records per group</p></li>
<li><p><strong>cols</strong> (<em>*str</em>) – columns defining the ordering</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>result of taking top records from groups</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.SmvGroupedData.smvWithTimePanel">
<code class="descname">smvWithTimePanel</code><span class="sig-paren">(</span><em>time_col</em>, <em>start</em>, <em>end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#SmvGroupedData.smvWithTimePanel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.SmvGroupedData.smvWithTimePanel" title="Permalink to this definition">¶</a></dt>
<dd><p>Adding a specified time panel period to the DF</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_col</strong> (<em>str</em>) – the column name in the data as the event timestamp</p></li>
<li><p><strong>start</strong> (<em>panel.PartialTime</em>) – could be Day, Month, Week, Quarter, refer
the panel package for details</p></li>
<li><p><strong>end</strong> (<em>panel.PartialTime</em>) – should be the same time type as the “start”</p></li>
<li><p><strong>addMissingTimeWithNull</strong> (<em>boolean</em>) – Default True. when some PartialTime
is missing whether to fill null records</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>a result data frame with keys, and a column with name <cite>smvTime</cite>, and</dt><dd><p>other input columns. Refer the panel package for the potential forms of
different PartialTimes.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DataFrame)</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since <cite>TimePanel</cite> defines a period of time, if for some group in the data
there are missing Months (or Quarters), when addMissingTimeWithNull is true,
this function will add records with non-null keys and
all possible <cite>smvTime</cite> columns with all other columns null-valued.</p>
</div>
<p class="rubric">Example</p>
<p>Given DataFrame df as</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 14%" />
<col style="width: 57%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>K</p></th>
<th class="head"><p>TS</p></th>
<th class="head"><p>V</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>2014-01-01</p></td>
<td><p>1.2</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>2014-03-01</p></td>
<td><p>4.5</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>2014-03-25</p></td>
<td><p>10.3</p></td>
</tr>
</tbody>
</table>
<p>after applying</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">smv.panel</span> <span class="k">as</span> <span class="nn">P</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">smvGroupBy</span><span class="p">(</span><span class="s2">&quot;k&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">smvWithTimePanel</span><span class="p">(</span><span class="s2">&quot;TS&quot;</span><span class="p">,</span> <span class="n">P</span><span class="o">.</span><span class="n">Month</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">P</span><span class="o">.</span><span class="n">Month</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<p>the result is</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 10%" />
<col style="width: 40%" />
<col style="width: 20%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>K</p></th>
<th class="head"><p>TS</p></th>
<th class="head"><p>V</p></th>
<th class="head"><p>smvTime</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>2014-01-01</p></td>
<td><p>1.2</p></td>
<td><p>M201401</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>2014-03-01</p></td>
<td><p>4.5</p></td>
<td><p>M201403</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>2014-03-25</p></td>
<td><p>10.3</p></td>
<td><p>M201403</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>M201401</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>M201402</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>M201403</p></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.helpers.SmvMultiJoin">
<em class="property">class </em><code class="descclassname">smv.helpers.</code><code class="descname">SmvMultiJoin</code><span class="sig-paren">(</span><em>sqlContext</em>, <em>mj</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#SmvMultiJoin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.SmvMultiJoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper around Scala’s SmvMultiJoin</p>
<dl class="method">
<dt id="smv.helpers.SmvMultiJoin.doJoin">
<code class="descname">doJoin</code><span class="sig-paren">(</span><em>dropextra=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#SmvMultiJoin.doJoin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.SmvMultiJoin.doJoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Trigger the join operation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dropExtra</strong> (<em>boolean</em>) – default false, which will keep all duplicated name columns with the postfix.
when true, the duplicated columns will be dropped</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">joindf</span><span class="o">.</span><span class="n">doJoin</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>result of executing the join operation</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.helpers.SmvMultiJoin.joinWith">
<code class="descname">joinWith</code><span class="sig-paren">(</span><em>df</em>, <em>postfix</em>, <em>jointype=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#SmvMultiJoin.joinWith"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.SmvMultiJoin.joinWith" title="Permalink to this definition">¶</a></dt>
<dd><p>Append SmvMultiJoin Chain</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>DataFrame</em>) – the DataFrame to join with</p></li>
<li><p><strong>postfix</strong> (<em>string</em>) – postfix to use when renaming join columns</p></li>
<li><p><strong>jointype</strong> (<em>string</em>) – optional jointype. if not specified, <cite>conf.defaultJoinType</cite> is used.  choose one of [‘inner’, ‘outer’, ‘leftouter’, ‘rightouter’, ‘leftsemi’]</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">joindf</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">smvJoinMultipleByKey</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="s1">&#39;inner&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">joinWith</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="s1">&#39;_df2&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">joinWith</span><span class="p">(</span><span class="n">df3</span><span class="p">,</span> <span class="s1">&#39;_df3&#39;</span><span class="p">,</span> <span class="s1">&#39;outer&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>formula of the join. need to call <cite>doJoin()</cite> on it to execute</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(<a class="reference internal" href="#smv.helpers.SmvMultiJoin" title="smv.helpers.SmvMultiJoin">SmvMultiJoin</a>)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="smv.helpers.init_helpers">
<code class="descclassname">smv.helpers.</code><code class="descname">init_helpers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/helpers.html#init_helpers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.helpers.init_helpers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-smv.historical_validators">
<span id="smv-historical-validators-module"></span><h2>smv.historical_validators module<a class="headerlink" href="#module-smv.historical_validators" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="smv.historical_validators.SmvHistoricalValidator">
<em class="property">class </em><code class="descclassname">smv.historical_validators.</code><code class="descname">SmvHistoricalValidator</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/historical_validators.html#SmvHistoricalValidator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.historical_validators.SmvHistoricalValidator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base of all user defined historical validator rules.</p>
<p>Derived classes must override the metadata`, and <cite>validateMetadata</cite> methods.</p>
<dl class="method">
<dt id="smv.historical_validators.SmvHistoricalValidator.metadata">
<code class="descname">metadata</code><span class="sig-paren">(</span><em>df</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/historical_validators.html#SmvHistoricalValidator.metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.historical_validators.SmvHistoricalValidator.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>identical interface to standard dataset <cite>metadata</cite> method</p>
</dd></dl>

<dl class="method">
<dt id="smv.historical_validators.SmvHistoricalValidator.validateMetadata">
<code class="descname">validateMetadata</code><span class="sig-paren">(</span><em>cur</em>, <em>hist</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/historical_validators.html#SmvHistoricalValidator.validateMetadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.historical_validators.SmvHistoricalValidator.validateMetadata" title="Permalink to this definition">¶</a></dt>
<dd><p>identical interface to standard dataset <cite>validateMetadata</cite> method</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="smv.historical_validators.SmvHistoricalValidators">
<code class="descclassname">smv.historical_validators.</code><code class="descname">SmvHistoricalValidators</code><span class="sig-paren">(</span><em>*validators</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/historical_validators.html#SmvHistoricalValidators"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.historical_validators.SmvHistoricalValidators" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to specify set of validators to apply to an SmvGenericModule.</p>
<p>Each validator should specify the standard <cite>metadata</cite> and <cite>validateMetadata</cite>
methods.  In addition, each validator will have a unique key defined that
will determine how it is stored in the final metadata structure.  This
decorator will take care of composing the union of all metadata from validators
and decomposing the full metadata structure into individual pieces for each
validator (hint: the _key() method of each validator is used to key into the
final metadata structure)</p>
</dd></dl>

</div>
<div class="section" id="module-smv.jprops">
<span id="smv-jprops-module"></span><h2>smv.jprops module<a class="headerlink" href="#module-smv.jprops" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="smv.jprops.iter_properties">
<code class="descclassname">smv.jprops.</code><code class="descname">iter_properties</code><span class="sig-paren">(</span><em>fh</em>, <em>comments=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/jprops.html#iter_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.jprops.iter_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Incrementally read properties from a Java .properties file.</p>
<p>Yields tuples of key/value pairs.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">comments</span></code> is <cite>True</cite>, comments will be included with <code class="docutils literal notranslate"><span class="pre">jprops.COMMENT</span></code>
in place of the key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fh</strong> – a readable file-like object</p></li>
<li><p><strong>comments</strong> – should include comments (default: False)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.jprops.load_properties">
<code class="descclassname">smv.jprops.</code><code class="descname">load_properties</code><span class="sig-paren">(</span><em>fh</em>, <em>mapping=&lt;class 'dict'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/jprops.html#load_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.jprops.load_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads properties from a Java .properties file.</p>
<p>Returns a dict (or provided mapping) of properties.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fh</strong> – a readable file-like object</p></li>
<li><p><strong>mapping</strong> – mapping type to load properties into</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.jprops.store_properties">
<code class="descclassname">smv.jprops.</code><code class="descname">store_properties</code><span class="sig-paren">(</span><em>fh</em>, <em>props</em>, <em>comment=None</em>, <em>timestamp=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/jprops.html#store_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.jprops.store_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes properties to the file in Java properties format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fh</strong> – a writable file-like object</p></li>
<li><p><strong>props</strong> – a mapping (dict) or iterable of key/value pairs</p></li>
<li><p><strong>comment</strong> – comment to write to the beginning of the file</p></li>
<li><p><strong>timestamp</strong> – boolean indicating whether to write a timestamp comment</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.jprops.write_comment">
<code class="descclassname">smv.jprops.</code><code class="descname">write_comment</code><span class="sig-paren">(</span><em>fh</em>, <em>comment</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/jprops.html#write_comment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.jprops.write_comment" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a comment to the file in Java properties format.</p>
<p>Newlines in the comment text are automatically turned into a continuation
of the comment by adding a “#” to the beginning of each line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fh</strong> – a writable file-like object</p></li>
<li><p><strong>comment</strong> – comment string to write</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.jprops.write_property">
<code class="descclassname">smv.jprops.</code><code class="descname">write_property</code><span class="sig-paren">(</span><em>fh</em>, <em>key</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/jprops.html#write_property"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.jprops.write_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a single property to the file in Java properties format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fh</strong> – a writable file-like object</p></li>
<li><p><strong>key</strong> – the key to write</p></li>
<li><p><strong>value</strong> – the value to write</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-smv.matcher">
<span id="smv-matcher-module"></span><h2>smv.matcher module<a class="headerlink" href="#module-smv.matcher" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="smv.matcher.ExactLogic">
<code class="descclassname">smv.matcher.</code><code class="descname">ExactLogic</code><span class="sig-paren">(</span><em>colName</em>, <em>expr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/matcher.html#ExactLogic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.matcher.ExactLogic" title="Permalink to this definition">¶</a></dt>
<dd><p>Level match with exact logic</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>colName</strong> (<em>string</em>) – level name used in the output DF</p></li>
<li><p><strong>expr</strong> (<em>Column</em>) – match logic colName</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ExactLogic</span><span class="p">(</span><span class="s2">&quot;First_Name_Match&quot;</span><span class="p">,</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;first_name&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;_first_name&quot;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(ExactLogic)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.matcher.ExactMatchPreFilter">
<code class="descclassname">smv.matcher.</code><code class="descname">ExactMatchPreFilter</code><span class="sig-paren">(</span><em>colName</em>, <em>expr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/matcher.html#ExactMatchPreFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.matcher.ExactMatchPreFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the top-level exact match</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>colName</strong> (<em>string</em>) – level name used in the output DF</p></li>
<li><p><strong>expr</strong> (<em>Column</em>) – match logic condition Column</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ExactMatchPreFilter</span><span class="p">(</span><span class="s2">&quot;Full_Name_Match&quot;</span><span class="p">,</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;full_name&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;_full_name&quot;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(ExactMatchPreFilter)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.matcher.FuzzyLogic">
<code class="descclassname">smv.matcher.</code><code class="descname">FuzzyLogic</code><span class="sig-paren">(</span><em>colName</em>, <em>predicate</em>, <em>valueExpr</em>, <em>threshold</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/matcher.html#FuzzyLogic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.matcher.FuzzyLogic" title="Permalink to this definition">¶</a></dt>
<dd><p>Level match with fuzzy logic</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>colName</strong> (<em>string</em>) – level name used in the output DF</p></li>
<li><p><strong>predicate</strong> (<em>Column</em>) – a condition column, no match if this condition evaluates as false</p></li>
<li><p><strong>valueExpr</strong> (<em>Column</em>) – a value column, which typically return a score. Higher score means higher chance of matching</p></li>
<li><p><strong>threshold</strong> (<em>float</em>) – No match if the evaluated <cite>valueExpr</cite> &lt; threshold</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">FuzzyLogic</span><span class="p">(</span><span class="s2">&quot;Levenshtein_City&quot;</span><span class="p">,</span> <span class="n">lit</span><span class="p">(</span><span class="kc">True</span><span class="p">),</span> <span class="n">normlevenshtein</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;city&quot;</span><span class="p">),</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;_city&quot;</span><span class="p">)),</span> <span class="mf">0.9</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(FuzzyLogic)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.matcher.GroupCondition">
<code class="descclassname">smv.matcher.</code><code class="descname">GroupCondition</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/matcher.html#GroupCondition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.matcher.GroupCondition" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the shared matching condition of all the levels (except the top-level exact match)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expr</strong> (<em>Column</em>) – shared matching condition</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><cite>expr</cite> should be in “left == right” form so that it can really optimize the process by reducing searching space</p>
</div>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">GroupCondition</span><span class="p">(</span><span class="n">soundex</span><span class="p">(</span><span class="s2">&quot;first_name&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">soundex</span><span class="p">(</span><span class="s2">&quot;_first_name&quot;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(GroupCondition)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.matcher.NoOpGroupCondition">
<code class="descclassname">smv.matcher.</code><code class="descname">NoOpGroupCondition</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/matcher.html#NoOpGroupCondition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.matcher.NoOpGroupCondition" title="Permalink to this definition">¶</a></dt>
<dd><p>Always returns None</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.matcher.NoOpPreFilter">
<code class="descclassname">smv.matcher.</code><code class="descname">NoOpPreFilter</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/matcher.html#NoOpPreFilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.matcher.NoOpPreFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Always returns None</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(None)</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="smv.matcher.SmvEntityMatcher">
<em class="property">class </em><code class="descclassname">smv.matcher.</code><code class="descname">SmvEntityMatcher</code><span class="sig-paren">(</span><em>leftId</em>, <em>rightId</em>, <em>exactMatchFilter</em>, <em>groupCondition</em>, <em>levelLogics</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/matcher.html#SmvEntityMatcher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.matcher.SmvEntityMatcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Perform multiple level entity matching with exact and/or fuzzy logic</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>leftId</strong> (<em>string</em>) – id column name of left DF (df1)</p></li>
<li><p><strong>rightId</strong> (<em>string</em>) – id column name of right DF (df2)</p></li>
<li><p><strong>exactMatchFilter</strong> (<em>ExactMatchPreFilter</em>) – exact match condition, if records matched no further tests will be performed</p></li>
<li><p><strong>groupCondition</strong> (<em>GroupCondition</em>) – for exact match leftovers, a deterministic condition to narrow down the search space</p></li>
<li><p><strong>levelLogics</strong> (<em>list</em><em>(</em><em>ExactLogic</em><em> or </em><em>FuzzyLogic</em><em>)</em>) – A list of level match conditions (always weaker than exactMatchFilter), all of them will be tested</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SmvEntityMatcher</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
    <span class="n">ExactMatchPreFilter</span><span class="p">(</span><span class="s2">&quot;Full_Name_Match&quot;</span><span class="p">,</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;full_name&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;_full_name&quot;</span><span class="p">)),</span>
    <span class="n">GroupCondition</span><span class="p">(</span><span class="n">soundex</span><span class="p">(</span><span class="s2">&quot;first_name&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">soundex</span><span class="p">(</span><span class="s2">&quot;_first_name&quot;</span><span class="p">)),</span>
    <span class="p">[</span>
        <span class="n">ExactLogic</span><span class="p">(</span><span class="s2">&quot;First_Name_Match&quot;</span><span class="p">,</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;first_name&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;_first_name&quot;</span><span class="p">)),</span>
        <span class="n">FuzzyLogic</span><span class="p">(</span><span class="s2">&quot;Levenshtein_City&quot;</span><span class="p">,</span> <span class="n">lit</span><span class="p">(</span><span class="kc">True</span><span class="p">),</span> <span class="n">normlevenshtein</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;city&quot;</span><span class="p">),</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;_city&quot;</span><span class="p">)),</span> <span class="mf">0.9</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="smv.matcher.SmvEntityMatcher.doMatch">
<code class="descname">doMatch</code><span class="sig-paren">(</span><em>df1</em>, <em>df2</em>, <em>keepOriginalCols=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/matcher.html#SmvEntityMatcher.doMatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.matcher.SmvEntityMatcher.doMatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply <cite>SmvEntityMatcher</cite> to the 2 DataFrames</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df1</strong> (<em>DataFrame</em>) – DataFrame 1 with an id column with name “id”</p></li>
<li><p><strong>df2</strong> (<em>DataFrame</em>) – DataFrame 2 with an id column with name “id”</p></li>
<li><p><strong>keepOriginalCols</strong> (<em>boolean</em>) – whether to keep all input columns of df1 and df2, defaults to true</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SmvEntityMatcher</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
    <span class="n">ExactMatchPreFilter</span><span class="p">(</span><span class="s2">&quot;Full_Name_Match&quot;</span><span class="p">,</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;full_name&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;_full_name&quot;</span><span class="p">)),</span>
    <span class="n">GroupCondition</span><span class="p">(</span><span class="n">soundex</span><span class="p">(</span><span class="s2">&quot;first_name&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">soundex</span><span class="p">(</span><span class="s2">&quot;_first_name&quot;</span><span class="p">)),</span>
    <span class="p">[</span>
        <span class="n">ExactLogic</span><span class="p">(</span><span class="s2">&quot;First_Name_Match&quot;</span><span class="p">,</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;first_name&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">col</span><span class="p">(</span><span class="s2">&quot;_first_name&quot;</span><span class="p">)),</span>
        <span class="n">FuzzyLogic</span><span class="p">(</span><span class="s2">&quot;Levenshtein_City&quot;</span><span class="p">,</span> <span class="n">lit</span><span class="p">(</span><span class="kc">True</span><span class="p">),</span> <span class="n">normlevenshtein</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;city&quot;</span><span class="p">),</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;_city&quot;</span><span class="p">)),</span> <span class="mf">0.9</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">doMatch</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a DataFrame with df1’s id and df2’s id and match flags of all the levels. For levels with fuzzy logic, the matching score is also provided. A column named “MatchBitmap” also provided to summarize all the matching flags. When keepOriginalCols is true, input columns are also kept</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.modulesvisitor">
<span id="smv-modulesvisitor-module"></span><h2>smv.modulesvisitor module<a class="headerlink" href="#module-smv.modulesvisitor" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="smv.modulesvisitor.ModulesVisitor">
<em class="property">class </em><code class="descclassname">smv.modulesvisitor.</code><code class="descname">ModulesVisitor</code><span class="sig-paren">(</span><em>roots</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/modulesvisitor.html#ModulesVisitor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.modulesvisitor.ModulesVisitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Provides way to do depth and breadth first visit to the sub-graph
of modules given a set of roots</p>
<dl class="method">
<dt id="smv.modulesvisitor.ModulesVisitor.bfs_visit">
<code class="descname">bfs_visit</code><span class="sig-paren">(</span><em>action</em>, <em>state</em>, <em>need_to_run_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/modulesvisitor.html#ModulesVisitor.bfs_visit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.modulesvisitor.ModulesVisitor.bfs_visit" title="Permalink to this definition">¶</a></dt>
<dd><p>Breadth first visit</p>
</dd></dl>

<dl class="method">
<dt id="smv.modulesvisitor.ModulesVisitor.dfs_visit">
<code class="descname">dfs_visit</code><span class="sig-paren">(</span><em>action</em>, <em>state</em>, <em>need_to_run_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/modulesvisitor.html#ModulesVisitor.dfs_visit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.modulesvisitor.ModulesVisitor.dfs_visit" title="Permalink to this definition">¶</a></dt>
<dd><p>Depth first visit</p>
</dd></dl>

<dl class="attribute">
<dt id="smv.modulesvisitor.ModulesVisitor.modules_needed_for_run">
<code class="descname">modules_needed_for_run</code><a class="headerlink" href="#smv.modulesvisitor.ModulesVisitor.modules_needed_for_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.panel">
<span id="smv-panel-module"></span><h2>smv.panel module<a class="headerlink" href="#module-smv.panel" title="Permalink to this headline">¶</a></h2>
<p>SMV PartialTime and TimePanel Framework</p>
<p>This module defines the most used PartialTime including <cite>Day</cite>, <cite>Month</cite>, <cite>Week</cite>, <cite>Quarter</cite>, and the TimePanel</p>
<dl class="simple">
<dt>PartialTime is the base class of</dt><dd><ul class="simple">
<li><p>Day</p></li>
<li><p>Month</p></li>
<li><p>Week</p></li>
<li><p>Quarter</p></li>
</ul>
</dd>
<dt>PartialTime has the following methods</dt><dd><ul class="simple">
<li><p>smvTime(): returns (str), will be the value of the <cite>smvTime</cite> column if added to a DF</p></li>
<li><dl class="simple">
<dt>timeIndex(): returns (int), an integer incremental by one as the PartialTime increase</dt><dd><p>by one unit</p>
</dd>
</dl>
</li>
<li><p>timeLabel(): returns (str), a human readable string</p></li>
<li><p>timeType(): returns (str), the type of the PartialTime</p></li>
</ul>
</dd>
</dl>
<dl class="function">
<dt id="smv.panel.Day">
<code class="descclassname">smv.panel.</code><code class="descname">Day</code><span class="sig-paren">(</span><em>year</em>, <em>month</em>, <em>day</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/panel.html#Day"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.panel.Day" title="Permalink to this definition">¶</a></dt>
<dd><p>Define an smv.panel.Day</p>
<p>Day extends smv.panel.PartialTime base class</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>int</em>) – </p></li>
<li><p><strong>month</strong> (<em>int</em>) – </p></li>
<li><p><strong>day</strong> (<em>int</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">Day</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">smvTime</span><span class="p">()</span>
<span class="go">u&#39;D20120531&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">timeIndex</span><span class="p">()</span>
<span class="go">15491</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">timeLabel</span><span class="p">()</span>
<span class="go">u&#39;2012-05-31&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">timeType</span><span class="p">()</span>
<span class="go">u&#39;day&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(java object smv.panel.Day)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.panel.Month">
<code class="descclassname">smv.panel.</code><code class="descname">Month</code><span class="sig-paren">(</span><em>year</em>, <em>month</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/panel.html#Month"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.panel.Month" title="Permalink to this definition">¶</a></dt>
<dd><p>Define an smv.panel.Month</p>
<p>Month extends smv.panel.PartialTime base class</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>int</em>) – </p></li>
<li><p><strong>month</strong> (<em>int</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">Month</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">smvTime</span><span class="p">()</span>
<span class="go">u&#39;M201205&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">timeIndex</span><span class="p">()</span>
<span class="go">508</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">timeLabel</span><span class="p">()</span>
<span class="go">u&#39;2012-05&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">timeType</span><span class="p">()</span>
<span class="go">u&#39;month&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(java object smv.panel.Month)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.panel.Quarter">
<code class="descclassname">smv.panel.</code><code class="descname">Quarter</code><span class="sig-paren">(</span><em>year</em>, <em>quarter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/panel.html#Quarter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.panel.Quarter" title="Permalink to this definition">¶</a></dt>
<dd><p>Define an smv.panel.Quarter</p>
<p>Quarter extends smv.panel.PartialTime base class</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>int</em>) – </p></li>
<li><p><strong>quarter</strong> (<em>int</em>) – </p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">Quarter</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">smvTime</span><span class="p">()</span>
<span class="go">u&#39;Q201201&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">timeIndex</span><span class="p">()</span>
<span class="go">168</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">timeLabel</span><span class="p">()</span>
<span class="go">u&#39;2012-Q1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">timeType</span><span class="p">()</span>
<span class="go">u&#39;quarter&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(java object smv.panel.Quarter)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.panel.TimePanel">
<code class="descclassname">smv.panel.</code><code class="descname">TimePanel</code><span class="sig-paren">(</span><em>start</em>, <em>end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/panel.html#TimePanel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.panel.TimePanel" title="Permalink to this definition">¶</a></dt>
<dd><p>Define an smv.panel.TimePanel</p>
<blockquote>
<div><p>TimePanel is a consecutive range of PartialTimes
It has a “start” PartialTime and “end” PartialTime, both are inclusive.
“start” and “end” have to have the same timeType</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<em>java object smv.PartialTime</em>) – Quarter, Month, Day etc.</p></li>
<li><p><strong>end</strong> (<em>java object smv.PartialTime</em>) – Quarter, Month, Day etc.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tp</span> <span class="o">=</span> <span class="n">TimePanel</span><span class="p">(</span><span class="n">Day</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">Day</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(java object smv.panel.TimePanel)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.panel.Week">
<code class="descclassname">smv.panel.</code><code class="descname">Week</code><span class="sig-paren">(</span><em>year</em>, <em>month</em>, <em>day</em>, <em>start_on='Monday'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/panel.html#Week"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.panel.Week" title="Permalink to this definition">¶</a></dt>
<dd><p>Define an smv.panel.Week</p>
<p>Week extends smv.panel.PartialTime base class</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>int</em>) – </p></li>
<li><p><strong>month</strong> (<em>int</em>) – </p></li>
<li><p><strong>day</strong> (<em>int</em>) – </p></li>
<li><p><strong>start_on</strong> (<em>str</em>) – Week starts on, valid values: Monday, Tuesday, Wednesday,
Thursday, Friday, Saturday, Sunday. Default value is Monday</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">Week</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">smvTime</span><span class="p">()</span>
<span class="go">u&#39;W20120227&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">timeIndex</span><span class="p">()</span>
<span class="go">2200</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">timeLabel</span><span class="p">()</span>
<span class="go">u&#39;Week of 2012-02-27&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">timeType</span><span class="p">()</span>
<span class="go">u&#39;week&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">Week</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;Sunday&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">timeType</span><span class="p">()</span>
<span class="go">u&#39;week_start_on_Sunday&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">smvTime</span><span class="p">()</span>
<span class="go">u&#39;W(7)20120304&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">timeIndex</span><span class="p">()</span>
<span class="go">2201</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">timeLabel</span><span class="p">()</span>
<span class="go">u&#39;Week of 2012-03-04&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(java object smv.panel.Week)</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-smv.provider">
<span id="smv-provider-module"></span><h2>smv.provider module<a class="headerlink" href="#module-smv.provider" title="Permalink to this headline">¶</a></h2>
<p>SMV Provider API</p>
<p>This module allows user to declare/register providers.</p>
<dl class="class">
<dt id="smv.provider.SmvProvider">
<em class="property">class </em><code class="descclassname">smv.provider.</code><code class="descname">SmvProvider</code><a class="reference internal" href="_modules/smv/provider.html#SmvProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.provider.SmvProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class of all provider classes.</p>
<p>Each provider must inherit from this class and also define <cite>provider_type()</cite> static
method that returns the type as a string.</p>
<p>Note: there is no version agnostic way to enforce derived classes to implement
a static <cite>provider_type()</cite> so the check will be done dynamically (runtime)</p>
<dl class="attribute">
<dt id="smv.provider.SmvProvider.IS_PROVIDER">
<code class="descname">IS_PROVIDER</code><em class="property"> = True</em><a class="headerlink" href="#smv.provider.SmvProvider.IS_PROVIDER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="smv.provider.SmvProvider.provider_type">
<em class="property">static </em><code class="descname">provider_type</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/provider.html#SmvProvider.provider_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.provider.SmvProvider.provider_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="smv.provider.SmvProvider.provider_type_fqn">
<em class="property">classmethod </em><code class="descname">provider_type_fqn</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/provider.html#SmvProvider.provider_type_fqn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.provider.SmvProvider.provider_type_fqn" title="Permalink to this definition">¶</a></dt>
<dd><p>create a hierarchichal provider type fqn for a given provider class based on the
provider class hierarchy.</p>
<dl class="simple">
<dt>Example (assume <cite>provider_type()</cite> for class X is X):</dt><dd><p>class A(SmvProvider)
class B(A)
class C(B)</p>
</dd>
</dl>
<p>In the above example, C’s provider type is just <cite>C</cite> but C’s provider_type_fqn is “A.B.C”</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.runconfig">
<span id="smv-runconfig-module"></span><h2>smv.runconfig module<a class="headerlink" href="#module-smv.runconfig" title="Permalink to this headline">¶</a></h2>
<p>SMV User Run Configuration Parameters</p>
<p>This module defined the SmvRunConfig class which can be mixed-in into an
SmvModule to get user configuration parameters at run-time.</p>
<dl class="class">
<dt id="smv.runconfig.SmvRunConfig">
<em class="property">class </em><code class="descclassname">smv.runconfig.</code><code class="descname">SmvRunConfig</code><a class="reference internal" href="_modules/smv/runconfig.html#SmvRunConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.runconfig.SmvRunConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>DEPRECATED</p>
<p>Run config accessor methods have been absorbed by SmvGenericModule, so <cite>SmvRunConfig</cite> is maintained
to support existing projects. <cite>SmvRunConfig’s</cite> influence on the dataset hash is preserved so that
modules do not have to transition overnight to using <cite>SmvGenericModule.requiresConfig</cite> in order for the
config to influence the dataset hash.</p>
</dd></dl>

</div>
<div class="section" id="module-smv.runinfo">
<span id="smv-runinfo-module"></span><h2>smv.runinfo module<a class="headerlink" href="#module-smv.runinfo" title="Permalink to this headline">¶</a></h2>
<p>Easy Python access to SmvRunInfoCollector and related Scala classes.</p>
<div class="admonition-todo admonition" id="index-0">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>document example use</p></li>
</ul>
</div>
<dl class="class">
<dt id="smv.runinfo.SmvRunInfo">
<em class="property">class </em><code class="descclassname">smv.runinfo.</code><code class="descname">SmvRunInfo</code><span class="sig-paren">(</span><em>meta</em>, <em>metahist</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/runinfo.html#SmvRunInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.runinfo.SmvRunInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>collection of a module’s running info with:</p>
<ul class="simple">
<li><p>metadata</p></li>
<li><p>metahistory</p></li>
</ul>
</dd></dl>

<dl class="class">
<dt id="smv.runinfo.SmvRunInfoCollector">
<em class="property">class </em><code class="descclassname">smv.runinfo.</code><code class="descname">SmvRunInfoCollector</code><a class="reference internal" href="_modules/smv/runinfo.html#SmvRunInfoCollector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.runinfo.SmvRunInfoCollector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A list of SmvRunInfos from a run transaction, and methods
to help reporting on them</p>
<dl class="method">
<dt id="smv.runinfo.SmvRunInfoCollector.add_runinfo">
<code class="descname">add_runinfo</code><span class="sig-paren">(</span><em>fqn</em>, <em>meta</em>, <em>meta_hist</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/runinfo.html#SmvRunInfoCollector.add_runinfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.runinfo.SmvRunInfoCollector.add_runinfo" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.runinfo.SmvRunInfoCollector.dqm_state">
<code class="descname">dqm_state</code><span class="sig-paren">(</span><em>ds_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/runinfo.html#SmvRunInfoCollector.dqm_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.runinfo.SmvRunInfoCollector.dqm_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the DQM state for a given dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dictionary representation of the dqm state</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>py4j.protocol.Py4JError</strong> – if there is java call error or
    there is no validation result or dqm state for the
    specified dataset (e.g. caused by a typo in the name)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.runinfo.SmvRunInfoCollector.dqm_validation">
<code class="descname">dqm_validation</code><span class="sig-paren">(</span><em>ds_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/runinfo.html#SmvRunInfoCollector.dqm_validation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.runinfo.SmvRunInfoCollector.dqm_validation" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the DQM validation result for a given dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dictionary representation of the dqm validation result</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>py4j.protocol.Py4JError</strong> – if there is java call error or
    there is no validation result for the specified dataset
    (e.g. caused by a typo in the name)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.runinfo.SmvRunInfoCollector.fqns">
<code class="descname">fqns</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/runinfo.html#SmvRunInfoCollector.fqns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.runinfo.SmvRunInfoCollector.fqns" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of FQNs for all datasets that ran</p>
</dd></dl>

<dl class="method">
<dt id="smv.runinfo.SmvRunInfoCollector.metadata">
<code class="descname">metadata</code><span class="sig-paren">(</span><em>ds_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/runinfo.html#SmvRunInfoCollector.metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.runinfo.SmvRunInfoCollector.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the metadata for a given dataset as a dict</p>
</dd></dl>

<dl class="method">
<dt id="smv.runinfo.SmvRunInfoCollector.metadata_history">
<code class="descname">metadata_history</code><span class="sig-paren">(</span><em>ds_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/runinfo.html#SmvRunInfoCollector.metadata_history"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.runinfo.SmvRunInfoCollector.metadata_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the metadata history for a given dataset as a list(dict)</p>
</dd></dl>

<dl class="method">
<dt id="smv.runinfo.SmvRunInfoCollector.show_report">
<code class="descname">show_report</code><span class="sig-paren">(</span><em>ds_name=None</em>, <em>show_history=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/runinfo.html#SmvRunInfoCollector.show_report"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.runinfo.SmvRunInfoCollector.show_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Print detailed report of information collected</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ds_name</strong> (<em>str</em>) – report only of named ds if not None</p></li>
<li><p><strong>show_history</strong> (<em>bool</em>) – include metadata history in report if True (default False)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.schema_meta_ops">
<span id="smv-schema-meta-ops-module"></span><h2>smv.schema_meta_ops module<a class="headerlink" href="#module-smv.schema_meta_ops" title="Permalink to this headline">¶</a></h2>
<p>SMV Schema Meta Operations</p>
<p>Provides helper functions for SmvDesc and SmvLabel operations</p>
<dl class="class">
<dt id="smv.schema_meta_ops.SchemaMetaOps">
<em class="property">class </em><code class="descclassname">smv.schema_meta_ops.</code><code class="descname">SchemaMetaOps</code><span class="sig-paren">(</span><em>df</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/schema_meta_ops.html#SchemaMetaOps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.schema_meta_ops.SchemaMetaOps" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="smv.schema_meta_ops.SchemaMetaOps.addDesc">
<code class="descname">addDesc</code><span class="sig-paren">(</span><em>*colDescs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/schema_meta_ops.html#SchemaMetaOps.addDesc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.schema_meta_ops.SchemaMetaOps.addDesc" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds column descriptions</p>
</dd></dl>

<dl class="method">
<dt id="smv.schema_meta_ops.SchemaMetaOps.addLabel">
<code class="descname">addLabel</code><span class="sig-paren">(</span><em>colNames</em>, <em>labels</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/schema_meta_ops.html#SchemaMetaOps.addLabel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.schema_meta_ops.SchemaMetaOps.addLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds labels to the specified columns</p>
<p>If colNames are empty, adds the same set of labels to all columns</p>
</dd></dl>

<dl class="method">
<dt id="smv.schema_meta_ops.SchemaMetaOps.colsWithLabel">
<code class="descname">colsWithLabel</code><span class="sig-paren">(</span><em>labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/schema_meta_ops.html#SchemaMetaOps.colsWithLabel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.schema_meta_ops.SchemaMetaOps.colsWithLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all column names in the data frame that contain all the specified labels</p>
<p>If labels are empty, returns names of unlabeled columns</p>
</dd></dl>

<dl class="method">
<dt id="smv.schema_meta_ops.SchemaMetaOps.getDesc">
<code class="descname">getDesc</code><span class="sig-paren">(</span><em>colName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/schema_meta_ops.html#SchemaMetaOps.getDesc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.schema_meta_ops.SchemaMetaOps.getDesc" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns column description(s)</p>
<p>If colName is empty, returns descriptions for all columns</p>
</dd></dl>

<dl class="method">
<dt id="smv.schema_meta_ops.SchemaMetaOps.getLabel">
<code class="descname">getLabel</code><span class="sig-paren">(</span><em>colName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/schema_meta_ops.html#SchemaMetaOps.getLabel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.schema_meta_ops.SchemaMetaOps.getLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of column label(s)</p>
<p>If colName is empty, returns labels for all columns</p>
</dd></dl>

<dl class="method">
<dt id="smv.schema_meta_ops.SchemaMetaOps.removeDesc">
<code class="descname">removeDesc</code><span class="sig-paren">(</span><em>*colNames</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/schema_meta_ops.html#SchemaMetaOps.removeDesc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.schema_meta_ops.SchemaMetaOps.removeDesc" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes description for the given columns from the Dataframe</p>
<p>If colNames are empty, removes descriptions of all columns</p>
</dd></dl>

<dl class="method">
<dt id="smv.schema_meta_ops.SchemaMetaOps.removeLabel">
<code class="descname">removeLabel</code><span class="sig-paren">(</span><em>colNames=None</em>, <em>labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/schema_meta_ops.html#SchemaMetaOps.removeLabel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.schema_meta_ops.SchemaMetaOps.removeLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes labels from the specified columns</p>
<p>If colNames are empty, removes the same set of labels from all columns
If labels are empty, removes all labels from the given columns
If they are both empty, removes all labels from all columns</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.smvapp">
<span id="smv-smvapp-module"></span><h2>smv.smvapp module<a class="headerlink" href="#module-smv.smvapp" title="Permalink to this headline">¶</a></h2>
<p>SmvApp entry class
This module provides the main SMV Python entry point <code class="docutils literal notranslate"><span class="pre">SmvPy</span></code> class and a singleton <cite>smvApp</cite>.
It is equivalent to <code class="docutils literal notranslate"><span class="pre">SmvApp</span></code> on Scala side</p>
<dl class="class">
<dt id="smv.smvapp.SmvApp">
<em class="property">class </em><code class="descclassname">smv.smvapp.</code><code class="descname">SmvApp</code><span class="sig-paren">(</span><em>arglist</em>, <em>_sparkSession</em>, <em>py_module_hotload=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The Python representation of SMV.</p>
<p>Its singleton instance is created later in the containing module
and is named smvApp</p>
<p>Adds <cite>java_imports</cite> to the namespace in the JVM gateway in
SparkContext (in pyspark).  It also creates an instance of
SmvPyClient.</p>
<dl class="attribute">
<dt id="smv.smvapp.SmvApp.SEMI_PRIVATE_LIB_PREFIX">
<code class="descname">SEMI_PRIVATE_LIB_PREFIX</code><em class="property"> = 'dsalib'</em><a class="headerlink" href="#smv.smvapp.SmvApp.SEMI_PRIVATE_LIB_PREFIX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="smv.smvapp.SmvApp.SRC_LIB_PATH">
<code class="descname">SRC_LIB_PATH</code><em class="property"> = 'library'</em><a class="headerlink" href="#smv.smvapp.SmvApp.SRC_LIB_PATH" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="smv.smvapp.SmvApp.SRC_PROJECT_PATH">
<code class="descname">SRC_PROJECT_PATH</code><em class="property"> = 'src/main/python'</em><a class="headerlink" href="#smv.smvapp.SmvApp.SRC_PROJECT_PATH" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.abs_path_for_project_path">
<code class="descname">abs_path_for_project_path</code><span class="sig-paren">(</span><em>project_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.abs_path_for_project_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.abs_path_for_project_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.all_data_dirs">
<code class="descname">all_data_dirs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.all_data_dirs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.all_data_dirs" title="Permalink to this definition">¶</a></dt>
<dd><p>All the config data dirs as an object.
Could be dynamic, so calculate each time when use</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.appDir">
<code class="descname">appDir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.appDir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.appDir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.appId">
<code class="descname">appId</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.appId"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.appId" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.appName">
<code class="descname">appName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.appName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.appName" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.copyToHdfs">
<code class="descname">copyToHdfs</code><span class="sig-paren">(</span><em>fileobj</em>, <em>destination</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.copyToHdfs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.copyToHdfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies the content of a file object to an HDFS location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fileobj</strong> (<em>file object</em>) – a file-like object whose content is to be copied,
such as one returned by open(), or StringIO</p></li>
<li><p><strong>destination</strong> (<em>str</em>) – specifies the destination path in the hadoop file system</p></li>
</ul>
</dd>
</dl>
<p>The file object is expected to have been opened in binary read mode.</p>
<p>The file object is closed when this function completes.</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.createDF">
<code class="descname">createDF</code><span class="sig-paren">(</span><em>schema</em>, <em>data=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.createDF"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.createDF" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.createDFWithLogger">
<code class="descname">createDFWithLogger</code><span class="sig-paren">(</span><em>schema</em>, <em>data</em>, <em>readerLogger</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.createDFWithLogger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.createDFWithLogger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="smv.smvapp.SmvApp.createInstance">
<em class="property">classmethod </em><code class="descname">createInstance</code><span class="sig-paren">(</span><em>arglist</em>, <em>_sparkSession</em>, <em>py_module_hotload=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.createInstance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.createInstance" title="Permalink to this definition">¶</a></dt>
<dd><p>Create singleton instance. Also returns the instance.</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.defaultCsvWithHeader">
<code class="descname">defaultCsvWithHeader</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.defaultCsvWithHeader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.defaultCsvWithHeader" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.defaultTsv">
<code class="descname">defaultTsv</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.defaultTsv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.defaultTsv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.defaultTsvWithHeader">
<code class="descname">defaultTsvWithHeader</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.defaultTsvWithHeader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.defaultTsvWithHeader" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.discoverSchemaAsSmvSchema">
<code class="descname">discoverSchemaAsSmvSchema</code><span class="sig-paren">(</span><em>path</em>, <em>csvAttributes</em>, <em>n=100000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.discoverSchemaAsSmvSchema"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.discoverSchemaAsSmvSchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Discovers the schema of a .csv file and returns a Scala SmvSchema instance</p>
<p>path — path to csvfile
n — number of records used to discover schema (optional)
csvAttributes — Scala CsvAttributes instance (optional)</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.exception_handling">
<code class="descname">exception_handling</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.exception_handling"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.exception_handling" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator function to catch Py4JJavaError and raise SmvDqmValidationError if any.
Otherwise just pass through the original exception</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.getConf">
<code class="descname">getConf</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.getConf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.getConf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.getCurrentProperties">
<code class="descname">getCurrentProperties</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.getCurrentProperties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.getCurrentProperties" title="Permalink to this definition">¶</a></dt>
<dd><p>Python dict of current megred props
defaultProps ++ appConfProps ++ homeConfProps ++ usrConfProps ++ cmdLineProps ++ dynamicRunConfig
Where right wins out in map merge.</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.getDsHash">
<code class="descname">getDsHash</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.getDsHash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.getDsHash" title="Permalink to this definition">¶</a></dt>
<dd><p>The current hashOfHash for the named module as a hex string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The uniquen name of a module. Does not have to be the FQN.</p></li>
<li><p><strong>runConfig</strong> (<em>dict</em>) – runConfig to apply when collecting info. If module
was run with a config, the same config needs to be
specified here to retrieve the correct hash.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The hashOfHash of the named module</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.getFileNamesByType">
<code class="descname">getFileNamesByType</code><span class="sig-paren">(</span><em>ftype</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.getFileNamesByType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.getFileNamesByType" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of file names which has the postfix ftype</p>
</dd></dl>

<dl class="classmethod">
<dt id="smv.smvapp.SmvApp.getInstance">
<em class="property">classmethod </em><code class="descname">getInstance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.getInstance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.getInstance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.getMetadataHistoryJson">
<code class="descname">getMetadataHistoryJson</code><span class="sig-paren">(</span><em>fqn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.getMetadataHistoryJson"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.getMetadataHistoryJson" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the metadata history for a given fqn</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.getMetadataJson">
<code class="descname">getMetadataJson</code><span class="sig-paren">(</span><em>fqn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.getMetadataJson"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.getMetadataJson" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the metadata for a given fqn</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.getModuleResult">
<code class="descname">getModuleResult</code><span class="sig-paren">(</span><em>fqn</em>, <em>forceRun=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.getModuleResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.getModuleResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Run module and get its result, which may not be a DataFrame</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.getRunInfo">
<code class="descname">getRunInfo</code><span class="sig-paren">(</span><em>fqn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.getRunInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.getRunInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the run information of a module and all its dependencies
from the last run.</p>
<p>Unlike the runModule() method, which returns the run
information just for that run, this method returns the run
information from the last run.</p>
<p>If no module was run (e.g. the code did not change, so the
data is read from persistent storage), the SmRunInfoCollector
returned from the runModule() method would be empty.  But the
SmvRunInfoCollector returned from this method would contain
all latest run information about all dependent modules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fqn</strong> (<em>str</em>) – fqn of target module</p></li>
<li><p><strong>runConfig</strong> (<em>dict</em>) – runConfig to apply when collecting info. If module
was run with a config, the same config needs to be
specified here to retrieve the info.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SmvRunInfoCollector</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.getRunInfoByPartialName">
<code class="descname">getRunInfoByPartialName</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.getRunInfoByPartialName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.getRunInfoByPartialName" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the run information of a module and all its dependencies
from the last run.</p>
<p>Unlike the runModule() method, which returns the run
information just for that run, this method returns the run
information from the last run.</p>
<p>If no module was run (e.g. the code did not change, so the
data is read from persistent storage), the SmRunInfoCollector
returned from the runModule() method would be empty.  But the
SmvRunInfoCollector returned from this method would contain
all latest run information about all dependent modules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – unique suffix to fqn of target module</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SmvRunInfoCollector</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.getSchemaByDataFileAsSmvSchema">
<code class="descname">getSchemaByDataFileAsSmvSchema</code><span class="sig-paren">(</span><em>data_file_name</em>, <em>path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.getSchemaByDataFileAsSmvSchema"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.getSchemaByDataFileAsSmvSchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the schema of a data file from its path and returns a Scala SmvSchema instance.
The result will be None if the corresponding schema file does not exist or is invalid.</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.getStageFromModuleFqn">
<code class="descname">getStageFromModuleFqn</code><span class="sig-paren">(</span><em>fqn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.getStageFromModuleFqn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.getStageFromModuleFqn" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the stage name for a given fqn</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.get_all_connection_names">
<code class="descname">get_all_connection_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.get_all_connection_names"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.get_all_connection_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all connetions defined in the app, return a list of names</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.get_connection_by_name">
<code class="descname">get_connection_by_name</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.get_connection_by_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.get_connection_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get connection instance from name</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.get_graph_json">
<code class="descname">get_graph_json</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.get_graph_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.get_graph_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a json string representing the dependency graph.</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.get_module_state_json">
<code class="descname">get_module_state_json</code><span class="sig-paren">(</span><em>fqns</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.get_module_state_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.get_module_state_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a json string for modules’ needToRun state of the app</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fqns</strong> (<em>list</em><em>(</em><em>string</em><em>)</em>) – module fqn list to get state for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>json string. E.g. {“stage.mymod”: {“needsToRun” : True}}</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.get_need_to_run">
<code class="descname">get_need_to_run</code><span class="sig-paren">(</span><em>roots</em>, <em>keep_roots=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.get_need_to_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.get_need_to_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of target modules to run, return a list of modules which
will run and be persisted in the order of how they should run. This
is a sub-set of modules_needed_for_run, but only keep the
non-ephemeral and not-persisted-yet modules.
Please note that some of the roots may not be in this list, to include
all roots, set <cite>keep_roots</cite> to True</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.get_provider_by_fqn">
<code class="descname">get_provider_by_fqn</code><span class="sig-paren">(</span><em>fqn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.get_provider_by_fqn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.get_provider_by_fqn" title="Permalink to this definition">¶</a></dt>
<dd><p>Return provider class from provider name fqn</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.get_providers_by_prefix">
<code class="descname">get_providers_by_prefix</code><span class="sig-paren">(</span><em>fqn_prefix</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.get_providers_by_prefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.get_providers_by_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Discover all providers in user lib and smv lib that have an provider type fqn
starting with the given prefix.</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.inputDir">
<code class="descname">inputDir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.inputDir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.inputDir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.input_connection">
<code class="descname">input_connection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.input_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.input_connection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.jdbcDriver">
<code class="descname">jdbcDriver</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.jdbcDriver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.jdbcDriver" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.jdbcUrl">
<code class="descname">jdbcUrl</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.jdbcUrl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.jdbcUrl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.load_single_ds">
<code class="descname">load_single_ds</code><span class="sig-paren">(</span><em>fqn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.load_single_ds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.load_single_ds" title="Permalink to this definition">¶</a></dt>
<dd><p>Return ds from fqn</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.outputDir">
<code class="descname">outputDir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.outputDir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.outputDir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.prependDefaultDirs">
<code class="descname">prependDefaultDirs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.prependDefaultDirs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.prependDefaultDirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that mods in src/main/python and library/ are discoverable.
If we add more default dirs, we’ll make this a set</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.prepend_source">
<code class="descname">prepend_source</code><span class="sig-paren">(</span><em>project_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.prepend_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.prepend_source" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.publishModuleToHiveByName">
<code class="descname">publishModuleToHiveByName</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.publishModuleToHiveByName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.publishModuleToHiveByName" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.quickRunModule">
<code class="descname">quickRunModule</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.quickRunModule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.quickRunModule" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.refresh_provider_cache">
<code class="descname">refresh_provider_cache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.refresh_provider_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.refresh_provider_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Re-discover providers and set provider_cache</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.removeDefaultDirs">
<code class="descname">removeDefaultDirs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.removeDefaultDirs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.removeDefaultDirs" title="Permalink to this definition">¶</a></dt>
<dd><p>The cleanup version of prependDefaultDirs</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.remove_source">
<code class="descname">remove_source</code><span class="sig-paren">(</span><em>project_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.remove_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.remove_source" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.runModule">
<code class="descname">runModule</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.runModule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.runModule" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.runModuleByName">
<code class="descname">runModuleByName</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.runModuleByName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.runModuleByName" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.scalaNone">
<code class="descname">scalaNone</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.scalaNone"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.scalaNone" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a Scala None value</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.scalaOption">
<code class="descname">scalaOption</code><span class="sig-paren">(</span><em>val</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.scalaOption"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.scalaOption" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a Scala Option containing the value</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.semiLibs">
<code class="descname">semiLibs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.semiLibs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.semiLibs" title="Permalink to this definition">¶</a></dt>
<dd><p>Use introspection to determine list of availabe semiprivate libs.</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.setAppDir">
<code class="descname">setAppDir</code><span class="sig-paren">(</span><em>appDir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.setAppDir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.setAppDir" title="Permalink to this definition">¶</a></dt>
<dd><p>SMV’s equivalent of ‘cd’ for app dirs.</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.setDynamicRunConfig">
<code class="descname">setDynamicRunConfig</code><span class="sig-paren">(</span><em>runConfig</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.setDynamicRunConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.setDynamicRunConfig" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="smv.smvapp.SmvApp.setInstance">
<em class="property">classmethod </em><code class="descname">setInstance</code><span class="sig-paren">(</span><em>app</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.setInstance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.setInstance" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the singleton instance.</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.smvLibs">
<code class="descname">smvLibs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.smvLibs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.smvLibs" title="Permalink to this definition">¶</a></dt>
<dd><p>Use introspection to determine list of availabe smv builtin libs.</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.smvVersion">
<code class="descname">smvVersion</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.smvVersion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.smvVersion" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.stages">
<code class="descname">stages</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.stages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.stages" title="Permalink to this definition">¶</a></dt>
<dd><p>Stages is a function as they can be set dynamically on an SmvApp instance</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvapp.SmvApp.userLibs">
<code class="descname">userLibs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvapp.html#SmvApp.userLibs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvapp.SmvApp.userLibs" title="Permalink to this definition">¶</a></dt>
<dd><p>Use introspection to determine list of availabe user libs.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.smvappinfo">
<span id="smv-smvappinfo-module"></span><h2>smv.smvappinfo module<a class="headerlink" href="#module-smv.smvappinfo" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="smv.smvappinfo.SmvAppInfo">
<em class="property">class </em><code class="descclassname">smv.smvappinfo.</code><code class="descname">SmvAppInfo</code><span class="sig-paren">(</span><em>smvApp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvappinfo.html#SmvAppInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvappinfo.SmvAppInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Provides SmvApp module list, dependency graph etc. for shell and plot.
This class is mainly for CLI and GUI. The functions are not core to
SmvApp.</p>
<dl class="method">
<dt id="smv.smvappinfo.SmvAppInfo.create_graph_dot">
<code class="descname">create_graph_dot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvappinfo.html#SmvAppInfo.create_graph_dot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvappinfo.SmvAppInfo.create_graph_dot" title="Permalink to this definition">¶</a></dt>
<dd><p>Create graphviz dot graph string for the whole app</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvappinfo.SmvAppInfo.create_graph_json">
<code class="descname">create_graph_json</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvappinfo.html#SmvAppInfo.create_graph_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvappinfo.SmvAppInfo.create_graph_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Create dependency graph Json string
Dependency graph does not have modules’ state info</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvappinfo.SmvAppInfo.create_module_state_json">
<code class="descname">create_module_state_json</code><span class="sig-paren">(</span><em>fqns</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvappinfo.html#SmvAppInfo.create_module_state_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvappinfo.SmvAppInfo.create_module_state_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Create all modules needToRun state Json string</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvappinfo.SmvAppInfo.ls">
<code class="descname">ls</code><span class="sig-paren">(</span><em>stage=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvappinfo.html#SmvAppInfo.ls"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvappinfo.SmvAppInfo.ls" title="Permalink to this definition">¶</a></dt>
<dd><p>List all modules, under their stages</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvappinfo.SmvAppInfo.ls_ancestors">
<code class="descname">ls_ancestors</code><span class="sig-paren">(</span><em>mname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvappinfo.html#SmvAppInfo.ls_ancestors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvappinfo.SmvAppInfo.ls_ancestors" title="Permalink to this definition">¶</a></dt>
<dd><p>List given module’s ancestors, under their stages</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvappinfo.SmvAppInfo.ls_dead">
<code class="descname">ls_dead</code><span class="sig-paren">(</span><em>stage=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvappinfo.html#SmvAppInfo.ls_dead"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvappinfo.SmvAppInfo.ls_dead" title="Permalink to this definition">¶</a></dt>
<dd><p>List all dead modules, under their stages</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvappinfo.SmvAppInfo.ls_descendants">
<code class="descname">ls_descendants</code><span class="sig-paren">(</span><em>mname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvappinfo.html#SmvAppInfo.ls_descendants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvappinfo.SmvAppInfo.ls_descendants" title="Permalink to this definition">¶</a></dt>
<dd><p>List given module’s descendants, under their stages</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvappinfo.SmvAppInfo.ls_stage">
<code class="descname">ls_stage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvappinfo.html#SmvAppInfo.ls_stage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvappinfo.SmvAppInfo.ls_stage" title="Permalink to this definition">¶</a></dt>
<dd><p>list all stage names</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.smvconfig">
<span id="smv-smvconfig-module"></span><h2>smv.smvconfig module<a class="headerlink" href="#module-smv.smvconfig" title="Permalink to this headline">¶</a></h2>
<p>Handle command line args and props files</p>
<dl class="class">
<dt id="smv.smvconfig.SmvConfig">
<em class="property">class </em><code class="descclassname">smv.smvconfig.</code><code class="descname">SmvConfig</code><span class="sig-paren">(</span><em>arglist</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Smv configurations
Including:</p>
<blockquote>
<div><ul class="simple">
<li><p>command line parsing</p></li>
<li><p>read in property files</p></li>
<li><p>dynamic configuration handling</p></li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="smv.smvconfig.SmvConfig.all_data_dirs">
<code class="descname">all_data_dirs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.all_data_dirs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.all_data_dirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Create all the data dir configs</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvconfig.SmvConfig.app_id">
<code class="descname">app_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.app_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.app_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvconfig.SmvConfig.app_name">
<code class="descname">app_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.app_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.app_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvconfig.SmvConfig.df_persist_format">
<code class="descname">df_persist_format</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.df_persist_format"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.df_persist_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Spark DF’s default persisted format. Available values:</p>
<ul class="simple">
<li><p>smvcsv_on_hdfs</p></li>
<li><p>parquet_on_hdfs (default)</p></li>
</ul>
</dd></dl>

<dl class="method">
<dt id="smv.smvconfig.SmvConfig.force_edd">
<code class="descname">force_edd</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.force_edd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.force_edd" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvconfig.SmvConfig.get_run_config">
<code class="descname">get_run_config</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.get_run_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.get_run_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Run config will be accessed within client modules. Return
run-config value of the given key.</p>
<dl class="simple">
<dt>2 possible sources of run-config:</dt><dd><ul class="simple">
<li><p>dynamic_props (which passed in by client code)</p></li>
<li><p>props files/command-line parameters</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvconfig.SmvConfig.get_run_config_keys">
<code class="descname">get_run_config_keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.get_run_config_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.get_run_config_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all the run-config keys</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvconfig.SmvConfig.infer_stage_full_name">
<code class="descname">infer_stage_full_name</code><span class="sig-paren">(</span><em>part_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.infer_stage_full_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.infer_stage_full_name" title="Permalink to this definition">¶</a></dt>
<dd><p>For a given partial stage name, infer full stage name</p>
</dd></dl>

<dl class="staticmethod">
<dt id="smv.smvconfig.SmvConfig.load">
<em class="property">static </em><code class="descname">load</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.load" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvconfig.SmvConfig.merged_props">
<code class="descname">merged_props</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.merged_props"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.merged_props" title="Permalink to this definition">¶</a></dt>
<dd><p>All the props (static + dynamic)</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvconfig.SmvConfig.read_props_from_app_dir">
<code class="descname">read_props_from_app_dir</code><span class="sig-paren">(</span><em>_app_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.read_props_from_app_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.read_props_from_app_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>For a given app dir, read in the prop files</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvconfig.SmvConfig.read_props_from_kernel_config_file">
<code class="descname">read_props_from_kernel_config_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.read_props_from_kernel_config_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.read_props_from_kernel_config_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Read props from the kernel config file
The specfic props <cite>smv.kernelConfigFile</cite> defines the relative path of kernel config file
against the current app dir</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvconfig.SmvConfig.set_app_dir">
<code class="descname">set_app_dir</code><span class="sig-paren">(</span><em>new_app_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.set_app_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.set_app_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Dynamic reset of app dir, so that the location of app and user
conf files. Re-read the props files</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvconfig.SmvConfig.set_dynamic_props">
<code class="descname">set_dynamic_props</code><span class="sig-paren">(</span><em>new_d_props</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.set_dynamic_props"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.set_dynamic_props" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset dynamic props
Overwrite entire dynamic props fully each reset
Ignore reset if new_d_props is None</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvconfig.SmvConfig.spark_sql_props">
<code class="descname">spark_sql_props</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.spark_sql_props"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.spark_sql_props" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvconfig.SmvConfig.stage_names">
<code class="descname">stage_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.stage_names"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.stage_names" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvconfig.SmvConfig.use_lock">
<code class="descname">use_lock</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvconfig.html#SmvConfig.use_lock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvconfig.SmvConfig.use_lock" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.smvdriver">
<span id="smv-smvdriver-module"></span><h2>smv.smvdriver module<a class="headerlink" href="#module-smv.smvdriver" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="smv.smvdriver.SmvDriver">
<em class="property">class </em><code class="descclassname">smv.smvdriver.</code><code class="descname">SmvDriver</code><a class="reference internal" href="_modules/smv/smvdriver.html#SmvDriver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvdriver.SmvDriver" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Driver for an SMV application</p>
<p>SmvDriver handles the boiler plate around parsing driver args, constructing an SmvApp, and running an application.
To use SmvDriver, override <cite>main</cite> and in the main block of your driver script call construct your driver and
call <cite>run</cite>.</p>
<dl class="method">
<dt id="smv.smvdriver.SmvDriver.create_smv_app">
<code class="descname">create_smv_app</code><span class="sig-paren">(</span><em>smv_args</em>, <em>driver_args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvdriver.html#SmvDriver.create_smv_app"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvdriver.SmvDriver.create_smv_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this to define how this driver’s SmvApp is created</p>
<p>Default is just SmvApp.createInstance(smv_args). Note that it’s important to use <cite>createInstance</cite> to ensure that
the singleton app is set.</p>
<p>SmvDriver will parse the full CLI args to distinguish the SMV args from from the args to your driver.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>smv_args</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – CLI args for SMV - should be passed to <cite>SmvApp</cite>)</p></li>
<li><p><strong>driver_args</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – CLI args for the driver</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvdriver.SmvDriver.main">
<code class="descname">main</code><span class="sig-paren">(</span><em>app</em>, <em>driver_args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvdriver.html#SmvDriver.main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvdriver.SmvDriver.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this to define the driver logic</p>
<p>Default is to just call <cite>run</cite> onthe <cite>SmvApp</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> (<a class="reference internal" href="#smv.smvapp.SmvApp" title="smv.smvapp.SmvApp"><em>SmvApp</em></a>) – app which was constructed</p></li>
<li><p><strong>driver_args</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – CLI args for the driver</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvdriver.SmvDriver.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvdriver.html#SmvDriver.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvdriver.SmvDriver.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the driver</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.smvgenericmodule">
<span id="smv-smvgenericmodule-module"></span><h2>smv.smvgenericmodule module<a class="headerlink" href="#module-smv.smvgenericmodule" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="smv.smvgenericmodule.SmvGenericModule">
<em class="property">class </em><code class="descclassname">smv.smvgenericmodule.</code><code class="descname">SmvGenericModule</code><span class="sig-paren">(</span><em>smvApp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Abstract base class for all SMV modules, including dataset and task modules</p>
<dl class="attribute">
<dt id="smv.smvgenericmodule.SmvGenericModule.IsSmvDataSet">
<code class="descname">IsSmvDataSet</code><em class="property"> = True</em><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.IsSmvDataSet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="smv.smvgenericmodule.SmvGenericModule.RunParams">
<em class="property">class </em><code class="descname">RunParams</code><span class="sig-paren">(</span><em>fqn2df</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.RunParams"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.RunParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Map from SmvGenericModule to resulting DataFrame</p>
<p>We need to simulate a dict from ds to df where the same object can be
keyed by different datasets with the same fqn. For example, in the
module</p>
<dl class="simple">
<dt>class X(SmvModule):</dt><dd><p>def requiresDS(self): return [Foo]
def run(self, i): return i[Foo]</p>
</dd>
</dl>
<p>the i argument of the run method should map Foo to
the correct DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>(</strong><strong>dict</strong><strong>)</strong> – a map from fqn to DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvGenericModule.description">
<code class="descname">description</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.description"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvGenericModule.doRun">
<code class="descname">doRun</code><span class="sig-paren">(</span><em>known</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.doRun"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.doRun" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the real data calculation or the task of this module</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvGenericModule.dsType">
<code class="descname">dsType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.dsType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.dsType" title="Permalink to this definition">¶</a></dt>
<dd><p>Return SmvGenericModule’s type</p>
</dd></dl>

<dl class="classmethod">
<dt id="smv.smvgenericmodule.SmvGenericModule.fqn">
<em class="property">classmethod </em><code class="descname">fqn</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.fqn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.fqn" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the fully qualified name</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvGenericModule.instanceValHash">
<code class="descname">instanceValHash</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.instanceValHash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.instanceValHash" title="Permalink to this definition">¶</a></dt>
<dd><p>Hash computed based on instance values of the dataset, such as the timestamp of an input file</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(int)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvGenericModule.isEphemeral">
<code class="descname">isEphemeral</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.isEphemeral"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.isEphemeral" title="Permalink to this definition">¶</a></dt>
<dd><p>Should this SmvGenericModule skip persisting its data?</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if this SmvGenericModule should not persist its data, false otherwise</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(bool)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvGenericModule.isSmvOutput">
<code class="descname">isSmvOutput</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.isSmvOutput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.isSmvOutput" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvGenericModule.metaStrategy">
<code class="descname">metaStrategy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.metaStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.metaStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an SmvIoStrategy for metadata persisting</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvGenericModule.metadata">
<code class="descname">metadata</code><span class="sig-paren">(</span><em>df</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined metadata</p>
<p>Override this method to define metadata that will be logged with your module’s results.
Defaults to empty dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>DataFrame</em>) – result of running the module, used to generate metadata</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary of serializable metadata</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvGenericModule.metadataHistorySize">
<code class="descname">metadataHistorySize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.metadataHistorySize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.metadataHistorySize" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to define the maximum size of the metadata history for this module</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>size</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(int)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvGenericModule.needsToRun">
<code class="descname">needsToRun</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.needsToRun"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.needsToRun" title="Permalink to this definition">¶</a></dt>
<dd><p>For non-ephemeral module, when persisted, no need to run
for ephemeral module if all its requiresDS no need to run,
also no need to run</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvGenericModule.persistStrategy">
<code class="descname">persistStrategy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.persistStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.persistStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an SmvIoStrategy for data persisting</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvGenericModule.requiresDS">
<code class="descname">requiresDS</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.requiresDS"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.requiresDS" title="Permalink to this definition">¶</a></dt>
<dd><p>User-specified list of dependencies</p>
<p>Override this method to specify the SmvGenericModule needed as inputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of dependencies</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(list(<a class="reference internal" href="#smv.smvgenericmodule.SmvGenericModule" title="smv.smvgenericmodule.SmvGenericModule">SmvGenericModule</a>))</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvGenericModule.validateMetadata">
<code class="descname">validateMetadata</code><span class="sig-paren">(</span><em>current</em>, <em>history</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.validateMetadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.validateMetadata" title="Permalink to this definition">¶</a></dt>
<dd><p>User-defined metadata validation</p>
<p>Override this method to define validation rules for metadata given
the current metadata and historical metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>current</strong> (<em>dict</em>) – current metadata kv</p></li>
<li><p><strong>history</strong> (<em>list</em><em>(</em><em>dict</em><em>)</em>) – list of historical metadata kv’s</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Validation failure message. Return None (or omit a return statement) if
successful.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvGenericModule.version">
<code class="descname">version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvGenericModule.version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.version" title="Permalink to this definition">¶</a></dt>
<dd><p>Version number
Deprecated!</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>version number of this SmvGenericModule</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="smv.smvgenericmodule.SmvGenericModule.versioned_fqn">
<code class="descname">versioned_fqn</code><a class="headerlink" href="#smv.smvgenericmodule.SmvGenericModule.versioned_fqn" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smvgenericmodule.SmvProcessModule">
<em class="property">class </em><code class="descclassname">smv.smvgenericmodule.</code><code class="descname">SmvProcessModule</code><span class="sig-paren">(</span><em>smvApp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvProcessModule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvProcessModule" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smvgenericmodule.SmvGenericModule" title="smv.smvgenericmodule.SmvGenericModule"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smvgenericmodule.SmvGenericModule</span></code></a></p>
<p>Base class for all intermediate data process modules</p>
<p>This is a sub-class of SmvGenericModule and as a sibling class of
SmvIoModule.</p>
<blockquote>
<div><ul class="simple">
<li><p>SmvProcessModule: multiple input, single output</p></li>
<li><p>SmvInput: non-input, single output</p></li>
<li><p>SmvOutput: single-input, non-output</p></li>
</ul>
</div></blockquote>
<p>User need to implement:</p>
<blockquote>
<div><ul class="simple">
<li><p>requiresDS</p></li>
<li><p>run</p></li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="smv.smvgenericmodule.SmvProcessModule.doRun">
<code class="descname">doRun</code><span class="sig-paren">(</span><em>known</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvProcessModule.doRun"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvProcessModule.doRun" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute this dataset, and return the dataframe</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvProcessModule.isEphemeral">
<code class="descname">isEphemeral</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvProcessModule.isEphemeral"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvProcessModule.isEphemeral" title="Permalink to this definition">¶</a></dt>
<dd><p>Default SmvProcessModule’s ephemeral flag to false
so when mixin SmvOutput, will still be non-ephemeral</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvProcessModule.requiresConfig">
<code class="descname">requiresConfig</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvProcessModule.requiresConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvProcessModule.requiresConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>User-specified list of config keys this module depends on</p>
<p>The given keys and their values will influence the dataset hash</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvProcessModule.requiresLib">
<code class="descname">requiresLib</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvProcessModule.requiresLib"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvProcessModule.requiresLib" title="Permalink to this definition">¶</a></dt>
<dd><p>User-specified list of ‘library’ dependencies. These are code, other than
the DataSet’s run method that impact its output or behaviour.</p>
<p>Override this method to assist in re-running this module based on changes
in other python objects (functions, classes, packages).</p>
<p>Limitations: For python modules and packages, the ‘requiresLib()’ method is
limited to registering changes on the main file of the package (for module
‘foo’, that’s ‘foo.py’, for package ‘bar’, that’s ‘bar/__init__.py’). This
means that if a module or package imports other modules, the imported
module’s changes will not impact DataSet hashes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of library dependencies</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(list(module))</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvProcessModule.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvProcessModule.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvProcessModule.run" title="Permalink to this definition">¶</a></dt>
<dd><p>User-specified definition of the operations of this SmvModule</p>
<p>Override this method to define the output of this module, given a map
‘i’ from input SmvGenericModule to resulting DataFrame. ‘i’ will have a
mapping for each SmvGenericModule listed in requiresDS. E.g.</p>
<dl class="simple">
<dt>def requiresDS(self):</dt><dd><p>return [MyDependency]</p>
</dd>
<dt>def run(self, i):</dt><dd><p>return i[MyDependency].select(“importantColumn”)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>(</strong><strong>RunParams</strong><strong>)</strong> – mapping from input SmvGenericModule to DataFrame</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>output of this SmvModule</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvProcessModule.smvGetRunConfig">
<code class="descname">smvGetRunConfig</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvProcessModule.smvGetRunConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvProcessModule.smvGetRunConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>return the current user run configuration value for the given key.</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvProcessModule.smvGetRunConfigAsBool">
<code class="descname">smvGetRunConfigAsBool</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvProcessModule.smvGetRunConfigAsBool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvProcessModule.smvGetRunConfigAsBool" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvgenericmodule.SmvProcessModule.smvGetRunConfigAsInt">
<code class="descname">smvGetRunConfigAsInt</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvgenericmodule.html#SmvProcessModule.smvGetRunConfigAsInt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvgenericmodule.SmvProcessModule.smvGetRunConfigAsInt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.smvhdfs">
<span id="smv-smvhdfs-module"></span><h2>smv.smvhdfs module<a class="headerlink" href="#module-smv.smvhdfs" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="smv.smvhdfs.SmvHDFS">
<em class="property">class </em><code class="descclassname">smv.smvhdfs.</code><code class="descname">SmvHDFS</code><span class="sig-paren">(</span><em>j_smvHDFS</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvhdfs.html#SmvHDFS"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvhdfs.SmvHDFS" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="smv.smvhdfs.SmvHDFS.writeToFile">
<code class="descname">writeToFile</code><span class="sig-paren">(</span><em>py_fileobj</em>, <em>file_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvhdfs.html#SmvHDFS.writeToFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvhdfs.SmvHDFS.writeToFile" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.smvinput">
<span id="smv-smvinput-module"></span><h2>smv.smvinput module<a class="headerlink" href="#module-smv.smvinput" title="Permalink to this headline">¶</a></h2>
<p>SMV DataSet Framework’s SmvInputBase interface</p>
<p>This module defines the abstract classes which formed the SmvGenericModule’s
input DS Framework for clients’ projects</p>
<dl class="class">
<dt id="smv.smvinput.SmvMultiCsvFiles">
<em class="property">class </em><code class="descclassname">smv.smvinput.</code><code class="descname">SmvMultiCsvFiles</code><span class="sig-paren">(</span><em>smvApp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvMultiCsvFiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvMultiCsvFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="smv.iomod.html#smv.iomod.inputs.SmvMultiCsvInputFiles" title="smv.iomod.inputs.SmvMultiCsvInputFiles"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.iomod.inputs.SmvMultiCsvInputFiles</span></code></a></p>
<p>Raw input from multiple csv files sharing single schema</p>
<p>Instead of a single input file, specify a data dir with files which share
the same schema.</p>
<dl class="method">
<dt id="smv.smvinput.SmvMultiCsvFiles.connectionName">
<code class="descname">connectionName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvMultiCsvFiles.connectionName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvMultiCsvFiles.connectionName" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the connection to read/write</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvinput.SmvMultiCsvFiles.dir">
<code class="descname">dir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvMultiCsvFiles.dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvMultiCsvFiles.dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the directory containing the csv files and their schema</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>path</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvinput.SmvMultiCsvFiles.dirName">
<code class="descname">dirName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvMultiCsvFiles.dirName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvMultiCsvFiles.dirName" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the directory containing the csv files
relative to the path defined in the connection</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvinput.SmvMultiCsvFiles.doRun">
<code class="descname">doRun</code><span class="sig-paren">(</span><em>known</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvMultiCsvFiles.doRun"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvMultiCsvFiles.doRun" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the real data calculation or the task of this module</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvinput.SmvMultiCsvFiles.get_connection">
<code class="descname">get_connection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvMultiCsvFiles.get_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvMultiCsvFiles.get_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Get data connection instance from connectionName()</p>
<p>Connetion should be configured in conf file with at least a class FQN</p>
<p>Ex: smv.conn.con_name.class=smv.conn.SmvJdbcConnectionInfo</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvinput.SmvMultiCsvFiles.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>df</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvMultiCsvFiles.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvMultiCsvFiles.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smvinput.SmvCsvFile">
<em class="property">class </em><code class="descclassname">smv.smvinput.</code><code class="descname">SmvCsvFile</code><span class="sig-paren">(</span><em>smvApp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvCsvFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvCsvFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="smv.iomod.html#smv.iomod.inputs.SmvCsvInputFile" title="smv.iomod.inputs.SmvCsvInputFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.iomod.inputs.SmvCsvInputFile</span></code></a></p>
<p>Input from a file in CSV format
Base class for CSV file input.
User need to define path method.</p>
<p>Example:
&gt;&gt;&gt; class MyCsvFile(SmvCsvFile):
&gt;&gt;&gt;     def path(self):
&gt;&gt;&gt;         return “path/relative/to/smvInputDir/file.csv”</p>
<dl class="method">
<dt id="smv.smvinput.SmvCsvFile.connectionName">
<code class="descname">connectionName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvCsvFile.connectionName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvCsvFile.connectionName" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the connection to read/write</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvinput.SmvCsvFile.doRun">
<code class="descname">doRun</code><span class="sig-paren">(</span><em>known</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvCsvFile.doRun"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvCsvFile.doRun" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the real data calculation or the task of this module</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvinput.SmvCsvFile.fileName">
<code class="descname">fileName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvCsvFile.fileName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvCsvFile.fileName" title="Permalink to this definition">¶</a></dt>
<dd><p>User-specified file name relative to the path defined in the connection</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(string)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvinput.SmvCsvFile.get_connection">
<code class="descname">get_connection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvCsvFile.get_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvCsvFile.get_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Get data connection instance from connectionName()</p>
<p>Connetion should be configured in conf file with at least a class FQN</p>
<p>Ex: smv.conn.con_name.class=smv.conn.SmvJdbcConnectionInfo</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvinput.SmvCsvFile.path">
<code class="descname">path</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvCsvFile.path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvCsvFile.path" title="Permalink to this definition">¶</a></dt>
<dd><p>relative path to csv file</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvinput.SmvCsvFile.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>df</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvCsvFile.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvCsvFile.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smvinput.SmvSqlCsvFile">
<em class="property">class </em><code class="descclassname">smv.smvinput.</code><code class="descname">SmvSqlCsvFile</code><span class="sig-paren">(</span><em>smvApp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvSqlCsvFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvSqlCsvFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smvinput.SmvCsvFile" title="smv.smvinput.SmvCsvFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smvinput.SmvCsvFile</span></code></a></p>
<p>Input from a file in CSV format and using a SQL query to access it</p>
<dl class="method">
<dt id="smv.smvinput.SmvSqlCsvFile.query">
<code class="descname">query</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvSqlCsvFile.query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvSqlCsvFile.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Query used to extract data from the table which reads the CSV file</p>
<p>Override this to specify your own query (optional). Default is
equivalent to ‘select * from ‘ + tableName.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>query</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvinput.SmvSqlCsvFile.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>df</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvSqlCsvFile.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvSqlCsvFile.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="smv.smvinput.SmvSqlCsvFile.tableName">
<code class="descname">tableName</code><em class="property"> = 'df'</em><a class="headerlink" href="#smv.smvinput.SmvSqlCsvFile.tableName" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smvinput.SmvCsvStringData">
<em class="property">class </em><code class="descclassname">smv.smvinput.</code><code class="descname">SmvCsvStringData</code><span class="sig-paren">(</span><em>smvApp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvCsvStringData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvCsvStringData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="smv.iomod.html#smv.iomod.inputs.SmvCsvStringInputData" title="smv.iomod.inputs.SmvCsvStringInputData"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.iomod.inputs.SmvCsvStringInputData</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="smv.smvinput.SmvHiveTable">
<em class="property">class </em><code class="descclassname">smv.smvinput.</code><code class="descname">SmvHiveTable</code><span class="sig-paren">(</span><em>smvApp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvHiveTable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvHiveTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="smv.iomod.html#smv.iomod.inputs.SmvHiveInputTable" title="smv.iomod.inputs.SmvHiveInputTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.iomod.inputs.SmvHiveInputTable</span></code></a></p>
<p>Input from a Hive table
This is for backward compatability. Will be deprecated. Please use
iomod.SmvHiveInputTable instead.</p>
<p>User need to implement:</p>
<blockquote>
<div><ul class="simple">
<li><p>tableName</p></li>
</ul>
</div></blockquote>
<p>Custom query at reading is no more supported, please use downstream
module to process data</p>
<dl class="method">
<dt id="smv.smvinput.SmvHiveTable.connectionName">
<code class="descname">connectionName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvHiveTable.connectionName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvHiveTable.connectionName" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the connection to read/write</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvinput.SmvHiveTable.get_connection">
<code class="descname">get_connection</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvHiveTable.get_connection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvHiveTable.get_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Get data connection instance from connectionName()</p>
<p>Connetion should be configured in conf file with at least a class FQN</p>
<p>Ex: smv.conn.con_name.class=smv.conn.SmvJdbcConnectionInfo</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvinput.SmvHiveTable.tableName">
<code class="descname">tableName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvinput.html#SmvHiveTable.tableName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvinput.SmvHiveTable.tableName" title="Permalink to this definition">¶</a></dt>
<dd><p>User-specified name Hive hive table to extract input from</p>
<p>Override this to specify your own table name.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>table name</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(str)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.smviostrategy">
<span id="smv-smviostrategy-module"></span><h2>smv.smviostrategy module<a class="headerlink" href="#module-smv.smviostrategy" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="smv.smviostrategy.SmvCsvOnHdfsIoStrategy">
<em class="property">class </em><code class="descclassname">smv.smviostrategy.</code><code class="descname">SmvCsvOnHdfsIoStrategy</code><span class="sig-paren">(</span><em>smvApp</em>, <em>path</em>, <em>smvSchema</em>, <em>logger</em>, <em>write_mode='overwrite'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvCsvOnHdfsIoStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvCsvOnHdfsIoStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smviostrategy.SmvIoStrategy" title="smv.smviostrategy.SmvIoStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smviostrategy.SmvIoStrategy</span></code></a></p>
<p>Simply read/write of csv, given schema. Not for persisting,
which should be handled by SmvCsvPersistenceStrategy</p>
<dl class="method">
<dt id="smv.smviostrategy.SmvCsvOnHdfsIoStrategy.read">
<code class="descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvCsvOnHdfsIoStrategy.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvCsvOnHdfsIoStrategy.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read data from persisted</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvCsvOnHdfsIoStrategy.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>raw_data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvCsvOnHdfsIoStrategy.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvCsvOnHdfsIoStrategy.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write data to persist file/db</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smviostrategy.SmvCsvPersistenceStrategy">
<em class="property">class </em><code class="descclassname">smv.smviostrategy.</code><code class="descname">SmvCsvPersistenceStrategy</code><span class="sig-paren">(</span><em>smvApp</em>, <em>versioned_fqn</em>, <em>file_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvCsvPersistenceStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvCsvPersistenceStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy" title="smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy</span></code></a></p>
<p>Persist strategy for using Smv CSV IO handler</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>smvApp</strong> (<a class="reference internal" href="#smv.smvapp.SmvApp" title="smv.smvapp.SmvApp"><em>SmvApp</em></a>) – </p></li>
<li><p><strong>versioned_fqn</strong> (<em>str</em>) – data/module’s FQN/Name with hash_of_hash</p></li>
<li><p><strong>file_path</strong> (<em>str</em>) – parameter “versioned_fqn” is used to create
a data file path. However if “file_path” is provided, all the other 2
parameters are ignored</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="smv.smviostrategy.SmvCsvPersistenceStrategy.isPersisted">
<code class="descname">isPersisted</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvCsvPersistenceStrategy.isPersisted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvCsvPersistenceStrategy.isPersisted" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the data got successfully persisted before</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvCsvPersistenceStrategy.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvCsvPersistenceStrategy.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvCsvPersistenceStrategy.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove persisted file(s)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy">
<em class="property">class </em><code class="descclassname">smv.smviostrategy.</code><code class="descname">SmvFileOnHdfsPersistenceStrategy</code><span class="sig-paren">(</span><em>smvApp</em>, <em>versioned_fqn=None</em>, <em>postfix=None</em>, <em>file_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvFileOnHdfsPersistenceStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smviostrategy.SmvPersistenceStrategy" title="smv.smviostrategy.SmvPersistenceStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smviostrategy.SmvPersistenceStrategy</span></code></a></p>
<p>Abstract class for persisting data to Hdfs file system
handling general tasks as file name creation, locking when write, etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>smvApp</strong> (<a class="reference internal" href="#smv.smvapp.SmvApp" title="smv.smvapp.SmvApp"><em>SmvApp</em></a>) – </p></li>
<li><p><strong>versioned_fqn</strong> (<em>str</em>) – data/module’s FQN/Name with hash_of_hash</p></li>
<li><p><strong>postfix</strong> (<em>str</em>) – persisted file’s postfix</p></li>
<li><p><strong>file_path</strong> (<em>str</em>) – parameters “versioned_fqn” and “postfix” are used to create
a data file path. However if “file_path” is provided, all the other 3
parameters are ignored</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy.isPersisted">
<code class="descname">isPersisted</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvFileOnHdfsPersistenceStrategy.isPersisted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy.isPersisted" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the data got successfully persisted before</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy.read">
<code class="descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvFileOnHdfsPersistenceStrategy.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read data from persisted</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvFileOnHdfsPersistenceStrategy.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove persisted file(s)</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>dataframe</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvFileOnHdfsPersistenceStrategy.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write data to persist file/db</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smviostrategy.SmvHiveIoStrategy">
<em class="property">class </em><code class="descclassname">smv.smviostrategy.</code><code class="descname">SmvHiveIoStrategy</code><span class="sig-paren">(</span><em>smvApp</em>, <em>conn_info</em>, <em>table_name</em>, <em>write_mode='errorifexists'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvHiveIoStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvHiveIoStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smviostrategy.SmvIoStrategy" title="smv.smviostrategy.SmvIoStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smviostrategy.SmvIoStrategy</span></code></a></p>
<p>Persist strategy for spark Hive IO</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>smvApp</strong> (<a class="reference internal" href="#smv.smvapp.SmvApp" title="smv.smvapp.SmvApp"><em>SmvApp</em></a>) – </p></li>
<li><p><strong>conn_info</strong> (<a class="reference internal" href="smv.conn.html#smv.conn.smvconnectioninfo.SmvConnectionInfo" title="smv.conn.smvconnectioninfo.SmvConnectionInfo"><em>SmvConnectionInfo</em></a>) – Hive connection info</p></li>
<li><p><strong>table_name</strong> (<em>str</em>) – the table to read from/write to</p></li>
<li><p><strong>write_mode</strong> (<em>str</em>) – spark df writer’s SaveMode</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="smv.smviostrategy.SmvHiveIoStrategy.read">
<code class="descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvHiveIoStrategy.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvHiveIoStrategy.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read data from persisted</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvHiveIoStrategy.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>raw_data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvHiveIoStrategy.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvHiveIoStrategy.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write data to persist file/db</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smviostrategy.SmvIoStrategy">
<em class="property">class </em><code class="descclassname">smv.smviostrategy.</code><code class="descname">SmvIoStrategy</code><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvIoStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvIoStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Base class for all module I/O, including read, write and persistence</p>
<dl class="method">
<dt id="smv.smviostrategy.SmvIoStrategy.read">
<code class="descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvIoStrategy.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvIoStrategy.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read data from persisted</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvIoStrategy.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>raw_data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvIoStrategy.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvIoStrategy.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write data to persist file/db</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smviostrategy.SmvJdbcIoStrategy">
<em class="property">class </em><code class="descclassname">smv.smviostrategy.</code><code class="descname">SmvJdbcIoStrategy</code><span class="sig-paren">(</span><em>smvApp</em>, <em>conn_info</em>, <em>table_name</em>, <em>write_mode='errorifexists'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvJdbcIoStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvJdbcIoStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smviostrategy.SmvIoStrategy" title="smv.smviostrategy.SmvIoStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smviostrategy.SmvIoStrategy</span></code></a></p>
<p>Persist strategy for spark JDBC IO</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>smvApp</strong> (<a class="reference internal" href="#smv.smvapp.SmvApp" title="smv.smvapp.SmvApp"><em>SmvApp</em></a>) – </p></li>
<li><p><strong>conn_info</strong> (<a class="reference internal" href="smv.conn.html#smv.conn.smvconnectioninfo.SmvConnectionInfo" title="smv.conn.smvconnectioninfo.SmvConnectionInfo"><em>SmvConnectionInfo</em></a>) – Jdbc connection info</p></li>
<li><p><strong>table_name</strong> (<em>str</em>) – the table to read from/write to</p></li>
<li><p><strong>write_mode</strong> (<em>str</em>) – spark df writer’s SaveMode</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="smv.smviostrategy.SmvJdbcIoStrategy.read">
<code class="descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvJdbcIoStrategy.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvJdbcIoStrategy.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read data from persisted</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvJdbcIoStrategy.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>raw_data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvJdbcIoStrategy.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvJdbcIoStrategy.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write data to persist file/db</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smviostrategy.SmvJsonOnHdfsPersistenceStrategy">
<em class="property">class </em><code class="descclassname">smv.smviostrategy.</code><code class="descname">SmvJsonOnHdfsPersistenceStrategy</code><span class="sig-paren">(</span><em>smvApp</em>, <em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvJsonOnHdfsPersistenceStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvJsonOnHdfsPersistenceStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy" title="smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="smv.smviostrategy.SmvNonOpPersistenceStrategy">
<em class="property">class </em><code class="descclassname">smv.smviostrategy.</code><code class="descname">SmvNonOpPersistenceStrategy</code><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvNonOpPersistenceStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvNonOpPersistenceStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smviostrategy.SmvPersistenceStrategy" title="smv.smviostrategy.SmvPersistenceStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smviostrategy.SmvPersistenceStrategy</span></code></a></p>
<p>Never persist, isPersisted always returns false</p>
<dl class="method">
<dt id="smv.smviostrategy.SmvNonOpPersistenceStrategy.isPersisted">
<code class="descname">isPersisted</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvNonOpPersistenceStrategy.isPersisted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvNonOpPersistenceStrategy.isPersisted" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the data got successfully persisted before</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvNonOpPersistenceStrategy.read">
<code class="descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvNonOpPersistenceStrategy.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvNonOpPersistenceStrategy.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read data from persisted</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvNonOpPersistenceStrategy.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvNonOpPersistenceStrategy.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvNonOpPersistenceStrategy.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove persisted file(s)</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvNonOpPersistenceStrategy.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>raw_data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvNonOpPersistenceStrategy.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvNonOpPersistenceStrategy.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write data to persist file/db</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smviostrategy.SmvParquetPersistenceStrategy">
<em class="property">class </em><code class="descclassname">smv.smviostrategy.</code><code class="descname">SmvParquetPersistenceStrategy</code><span class="sig-paren">(</span><em>smvApp</em>, <em>versioned_fqn</em>, <em>file_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvParquetPersistenceStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvParquetPersistenceStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy" title="smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy</span></code></a></p>
<p>Persist strategy for using Spark native parquet</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>smvApp</strong> (<a class="reference internal" href="#smv.smvapp.SmvApp" title="smv.smvapp.SmvApp"><em>SmvApp</em></a>) – </p></li>
<li><p><strong>versioned_fqn</strong> (<em>str</em>) – data/module’s FQN/Name with hash_of_hash</p></li>
<li><p><strong>file_path</strong> (<em>str</em>) – parameter “versioned_fqn” is used to create
a data file path. However if “file_path” is provided, all the other 2
parameters are ignored</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="smv.smviostrategy.SmvParquetPersistenceStrategy.isPersisted">
<code class="descname">isPersisted</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvParquetPersistenceStrategy.isPersisted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvParquetPersistenceStrategy.isPersisted" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the data got successfully persisted before</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvParquetPersistenceStrategy.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvParquetPersistenceStrategy.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvParquetPersistenceStrategy.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove persisted file(s)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smviostrategy.SmvPersistenceStrategy">
<em class="property">class </em><code class="descclassname">smv.smviostrategy.</code><code class="descname">SmvPersistenceStrategy</code><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvPersistenceStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvPersistenceStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smviostrategy.SmvIoStrategy" title="smv.smviostrategy.SmvIoStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smviostrategy.SmvIoStrategy</span></code></a></p>
<p>Base class for IO strategy which used for persisting data</p>
<dl class="method">
<dt id="smv.smviostrategy.SmvPersistenceStrategy.isPersisted">
<code class="descname">isPersisted</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvPersistenceStrategy.isPersisted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvPersistenceStrategy.isPersisted" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the data got successfully persisted before</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvPersistenceStrategy.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvPersistenceStrategy.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvPersistenceStrategy.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove persisted file(s)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smviostrategy.SmvPicklablePersistenceStrategy">
<em class="property">class </em><code class="descclassname">smv.smviostrategy.</code><code class="descname">SmvPicklablePersistenceStrategy</code><span class="sig-paren">(</span><em>smvApp</em>, <em>versioned_fqn</em>, <em>file_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvPicklablePersistenceStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvPicklablePersistenceStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy" title="smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smviostrategy.SmvFileOnHdfsPersistenceStrategy</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="smv.smviostrategy.SmvSchemaOnHdfsIoStrategy">
<em class="property">class </em><code class="descclassname">smv.smviostrategy.</code><code class="descname">SmvSchemaOnHdfsIoStrategy</code><span class="sig-paren">(</span><em>smvApp</em>, <em>path</em>, <em>write_mode='overwrite'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvSchemaOnHdfsIoStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvSchemaOnHdfsIoStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smviostrategy.SmvIoStrategy" title="smv.smviostrategy.SmvIoStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smviostrategy.SmvIoStrategy</span></code></a></p>
<p>Read/write of an SmvSchema file on Hdfs</p>
<dl class="method">
<dt id="smv.smviostrategy.SmvSchemaOnHdfsIoStrategy.read">
<code class="descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvSchemaOnHdfsIoStrategy.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvSchemaOnHdfsIoStrategy.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read data from persisted</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvSchemaOnHdfsIoStrategy.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>smvSchema</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvSchemaOnHdfsIoStrategy.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvSchemaOnHdfsIoStrategy.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write data to persist file/db</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smviostrategy.SmvTextOnHdfsIoStrategy">
<em class="property">class </em><code class="descclassname">smv.smviostrategy.</code><code class="descname">SmvTextOnHdfsIoStrategy</code><span class="sig-paren">(</span><em>smvApp</em>, <em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvTextOnHdfsIoStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvTextOnHdfsIoStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smviostrategy.SmvIoStrategy" title="smv.smviostrategy.SmvIoStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smviostrategy.SmvIoStrategy</span></code></a></p>
<p>Simple read/write a small text file on Hdfs</p>
<dl class="method">
<dt id="smv.smviostrategy.SmvTextOnHdfsIoStrategy.read">
<code class="descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvTextOnHdfsIoStrategy.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvTextOnHdfsIoStrategy.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read data from persisted</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvTextOnHdfsIoStrategy.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>rawdata</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvTextOnHdfsIoStrategy.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvTextOnHdfsIoStrategy.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write data to persist file/db</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smviostrategy.SmvXmlOnHdfsIoStrategy">
<em class="property">class </em><code class="descclassname">smv.smviostrategy.</code><code class="descname">SmvXmlOnHdfsIoStrategy</code><span class="sig-paren">(</span><em>smvApp</em>, <em>path</em>, <em>rowTag</em>, <em>schema=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvXmlOnHdfsIoStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvXmlOnHdfsIoStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smviostrategy.SmvIoStrategy" title="smv.smviostrategy.SmvIoStrategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smviostrategy.SmvIoStrategy</span></code></a></p>
<p>Read/write Xml file on Hdfs using Spark DF reader/writer</p>
<dl class="method">
<dt id="smv.smviostrategy.SmvXmlOnHdfsIoStrategy.read">
<code class="descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvXmlOnHdfsIoStrategy.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvXmlOnHdfsIoStrategy.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read data from persisted</p>
</dd></dl>

<dl class="method">
<dt id="smv.smviostrategy.SmvXmlOnHdfsIoStrategy.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>rawdata</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smviostrategy.html#SmvXmlOnHdfsIoStrategy.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smviostrategy.SmvXmlOnHdfsIoStrategy.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write data to persist file/db</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.smvlock">
<span id="smv-smvlock-module"></span><h2>smv.smvlock module<a class="headerlink" href="#module-smv.smvlock" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="smv.smvlock.NonOpLock">
<em class="property">class </em><code class="descclassname">smv.smvlock.</code><code class="descname">NonOpLock</code><a class="reference internal" href="_modules/smv/smvlock.html#NonOpLock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvlock.NonOpLock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="class">
<dt id="smv.smvlock.SmvLock">
<em class="property">class </em><code class="descclassname">smv.smvlock.</code><code class="descname">SmvLock</code><span class="sig-paren">(</span><em>_jvm</em>, <em>_lock_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvlock.html#SmvLock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvlock.SmvLock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Create a lock context</p>
</dd></dl>

</div>
<div class="section" id="module-smv.smvmetadata">
<span id="smv-smvmetadata-module"></span><h2>smv.smvmetadata module<a class="headerlink" href="#module-smv.smvmetadata" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="smv.smvmetadata.SmvMetaData">
<em class="property">class </em><code class="descclassname">smv.smvmetadata.</code><code class="descname">SmvMetaData</code><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="smv.smvmetadata.SmvMetaData.addApplicationContext">
<code class="descname">addApplicationContext</code><span class="sig-paren">(</span><em>smvApp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaData.addApplicationContext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaData.addApplicationContext" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmetadata.SmvMetaData.addDependencyMetadata">
<code class="descname">addDependencyMetadata</code><span class="sig-paren">(</span><em>deps</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaData.addDependencyMetadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaData.addDependencyMetadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmetadata.SmvMetaData.addDqmValidationResult">
<code class="descname">addDqmValidationResult</code><span class="sig-paren">(</span><em>result_json</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaData.addDqmValidationResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaData.addDqmValidationResult" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmetadata.SmvMetaData.addDuration">
<code class="descname">addDuration</code><span class="sig-paren">(</span><em>name</em>, <em>duration</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaData.addDuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaData.addDuration" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmetadata.SmvMetaData.addEddResult">
<code class="descname">addEddResult</code><span class="sig-paren">(</span><em>edd_result_json_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaData.addEddResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaData.addEddResult" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmetadata.SmvMetaData.addFQN">
<code class="descname">addFQN</code><span class="sig-paren">(</span><em>fqn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaData.addFQN"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaData.addFQN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmetadata.SmvMetaData.addSchemaMetadata">
<code class="descname">addSchemaMetadata</code><span class="sig-paren">(</span><em>df</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaData.addSchemaMetadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaData.addSchemaMetadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmetadata.SmvMetaData.addSystemMeta">
<code class="descname">addSystemMeta</code><span class="sig-paren">(</span><em>mod</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaData.addSystemMeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaData.addSystemMeta" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmetadata.SmvMetaData.addTimestamp">
<code class="descname">addTimestamp</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaData.addTimestamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaData.addTimestamp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmetadata.SmvMetaData.addUserMeta">
<code class="descname">addUserMeta</code><span class="sig-paren">(</span><em>user_meta</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaData.addUserMeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaData.addUserMeta" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmetadata.SmvMetaData.addVerHex">
<code class="descname">addVerHex</code><span class="sig-paren">(</span><em>ver_hex</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaData.addVerHex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaData.addVerHex" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmetadata.SmvMetaData.fromJson">
<code class="descname">fromJson</code><span class="sig-paren">(</span><em>meta_json</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaData.fromJson"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaData.fromJson" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmetadata.SmvMetaData.getEddResult">
<code class="descname">getEddResult</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaData.getEddResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaData.getEddResult" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmetadata.SmvMetaData.toJson">
<code class="descname">toJson</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaData.toJson"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaData.toJson" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smvmetadata.SmvMetaHistory">
<em class="property">class </em><code class="descclassname">smv.smvmetadata.</code><code class="descname">SmvMetaHistory</code><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaHistory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaHistory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="smv.smvmetadata.SmvMetaHistory.fromJson">
<code class="descname">fromJson</code><span class="sig-paren">(</span><em>hist_json</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaHistory.fromJson"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaHistory.fromJson" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmetadata.SmvMetaHistory.toJson">
<code class="descname">toJson</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaHistory.toJson"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaHistory.toJson" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmetadata.SmvMetaHistory.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>new_meta</em>, <em>max_size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmetadata.html#SmvMetaHistory.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmetadata.SmvMetaHistory.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.smvmodule">
<span id="smv-smvmodule-module"></span><h2>smv.smvmodule module<a class="headerlink" href="#module-smv.smvmodule" title="Permalink to this headline">¶</a></h2>
<p>SMV DataSet Framework interface</p>
<p>This module defines the abstract classes which formed the SmvModule Framework for clients’ projects</p>
<dl class="class">
<dt id="smv.smvmodule.SmvOutput">
<em class="property">class </em><code class="descclassname">smv.smvmodule.</code><code class="descname">SmvOutput</code><a class="reference internal" href="_modules/smv/smvmodule.html#SmvOutput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Mixin which marks an SmvModule as one of the output of its stage
SmvOutputs are distinct from other SmvModule in that</p>
<blockquote>
<div><ul class="simple">
<li><p>The -s and –run-app options of smv-run only run SmvOutputs and their dependencies.</p></li>
</ul>
</div></blockquote>
<p>Deprecated. Will be replaced by sub-classed of smv.io.SmvOutput.</p>
<dl class="attribute">
<dt id="smv.smvmodule.SmvOutput.IsSmvOutput">
<code class="descname">IsSmvOutput</code><em class="property"> = True</em><a class="headerlink" href="#smv.smvmodule.SmvOutput.IsSmvOutput" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmodule.SmvOutput.tableName">
<code class="descname">tableName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvOutput.tableName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvOutput.tableName" title="Permalink to this definition">¶</a></dt>
<dd><p>The user-specified table name used when exporting data to Hive (optional)
:returns: (string)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smvmodule.SmvModule">
<em class="property">class </em><code class="descclassname">smv.smvmodule.</code><code class="descname">SmvModule</code><span class="sig-paren">(</span><em>smvApp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvModule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvModule" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smvmodule.SmvSparkDfModule</span></code></p>
<p>SmvModule is the same as SmvSparkDfModule. Since it was used in all the
SMV projects, we will not change the its name for backward compatibility.
May deprecate when the full SmvGenericModule framework get adopted</p>
</dd></dl>

<dl class="class">
<dt id="smv.smvmodule.SmvSqlModule">
<em class="property">class </em><code class="descclassname">smv.smvmodule.</code><code class="descname">SmvSqlModule</code><span class="sig-paren">(</span><em>smvApp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvSqlModule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvSqlModule" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smvmodule.SmvModule" title="smv.smvmodule.SmvModule"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smvmodule.SmvModule</span></code></a></p>
<p>An SMV module which executes a SQL query in place of a run method</p>
<dl class="method">
<dt id="smv.smvmodule.SmvSqlModule.query">
<code class="descname">query</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvSqlModule.query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvSqlModule.query" title="Permalink to this definition">¶</a></dt>
<dd><p>User-specified SQL query defining the behavior of this module</p>
<p>Before the query is executed, all dependencies will be registered as
tables with the names specified in the tables method.</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvmodule.SmvSqlModule.requiresDS">
<code class="descname">requiresDS</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvSqlModule.requiresDS"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvSqlModule.requiresDS" title="Permalink to this definition">¶</a></dt>
<dd><p>User-specified list of dependencies</p>
<p>Override this method to specify the SmvGenericModule needed as inputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of dependencies</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(list(<a class="reference internal" href="#smv.smvgenericmodule.SmvGenericModule" title="smv.smvgenericmodule.SmvGenericModule">SmvGenericModule</a>))</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvmodule.SmvSqlModule.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvSqlModule.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvSqlModule.run" title="Permalink to this definition">¶</a></dt>
<dd><p>User-specified definition of the operations of this SmvModule</p>
<p>Override this method to define the output of this module, given a map
‘i’ from input SmvGenericModule to resulting DataFrame. ‘i’ will have a
mapping for each SmvGenericModule listed in requiresDS. E.g.</p>
<dl class="simple">
<dt>def requiresDS(self):</dt><dd><p>return [MyDependency]</p>
</dd>
<dt>def run(self, i):</dt><dd><p>return i[MyDependency].select(“importantColumn”)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>(</strong><strong>RunParams</strong><strong>)</strong> – mapping from input SmvGenericModule to DataFrame</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>output of this SmvModule</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvmodule.SmvSqlModule.tables">
<code class="descname">tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvSqlModule.tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvSqlModule.tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Dict of dependencies by table name.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smvmodule.SmvModel">
<em class="property">class </em><code class="descclassname">smv.smvmodule.</code><code class="descname">SmvModel</code><span class="sig-paren">(</span><em>smvApp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smvgenericmodule.SmvProcessModule" title="smv.smvgenericmodule.SmvProcessModule"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smvgenericmodule.SmvProcessModule</span></code></a></p>
<p>SmvModule whose result is a data model</p>
<p>The result must be picklable - see
<a class="reference external" href="https://docs.python.org/2/library/pickle.html#what-can-be-pickled-and-unpickled">https://docs.python.org/2/library/pickle.html#what-can-be-pickled-and-unpickled</a>.</p>
<dl class="method">
<dt id="smv.smvmodule.SmvModel.dsType">
<code class="descname">dsType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvModel.dsType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvModel.dsType" title="Permalink to this definition">¶</a></dt>
<dd><p>Return SmvGenericModule’s type</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvmodule.SmvModel.persistStrategy">
<code class="descname">persistStrategy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvModel.persistStrategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvModel.persistStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an SmvIoStrategy for data persisting</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="smv.smvmodule.SmvModelExec">
<em class="property">class </em><code class="descclassname">smv.smvmodule.</code><code class="descname">SmvModelExec</code><span class="sig-paren">(</span><em>smvApp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvModelExec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvModelExec" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#smv.smvmodule.SmvModule" title="smv.smvmodule.SmvModule"><code class="xref py py-class docutils literal notranslate"><span class="pre">smv.smvmodule.SmvModule</span></code></a></p>
<p>SmvModule that runs a model produced by an SmvModel</p>
<dl class="method">
<dt id="smv.smvmodule.SmvModelExec.doRun">
<code class="descname">doRun</code><span class="sig-paren">(</span><em>known</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvModelExec.doRun"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvModelExec.doRun" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute this dataset, and return the dataframe</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvmodule.SmvModelExec.dsType">
<code class="descname">dsType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvModelExec.dsType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvModelExec.dsType" title="Permalink to this definition">¶</a></dt>
<dd><p>Return SmvGenericModule’s type</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvmodule.SmvModelExec.requiresModel">
<code class="descname">requiresModel</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvModelExec.requiresModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvModelExec.requiresModel" title="Permalink to this definition">¶</a></dt>
<dd><p>User-specified SmvModel module</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the SmvModel this module depends on</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(<a class="reference internal" href="#smv.smvmodule.SmvModel" title="smv.smvmodule.SmvModel">SmvModel</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="smv.smvmodule.SmvModelExec.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>i</em>, <em>model</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvModelExec.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvModelExec.run" title="Permalink to this definition">¶</a></dt>
<dd><p>User-specified definition of the operations of this SmvModule</p>
<p>Override this method to define the output of this module, given a map
‘i’ from input SmvGenericModule to resulting DataFrame. ‘i’ will have a
mapping for each SmvGenericModule listed in requiresDS. E.g.</p>
<dl class="simple">
<dt>def requiresDS(self):</dt><dd><p>return [MyDependency]</p>
</dd>
<dt>def run(self, i):</dt><dd><p>return i[MyDependency].select(“importantColumn”)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong> (<a class="reference internal" href="#smv.smvgenericmodule.SmvGenericModule.RunParams" title="smv.smvgenericmodule.SmvGenericModule.RunParams"><em>RunParams</em></a>) – mapping from input SmvGenericModule to DataFrame</p></li>
<li><p><strong>model</strong> (<a class="reference internal" href="#smv.smvmodule.SmvModel" title="smv.smvmodule.SmvModel"><em>SmvModel</em></a>) – the model this module depends on</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>picklable output of this SmvModule</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(object)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="smv.smvmodule.SmvModuleLink">
<code class="descclassname">smv.smvmodule.</code><code class="descname">SmvModuleLink</code><span class="sig-paren">(</span><em>target</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodule.html#SmvModuleLink"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodule.SmvModuleLink" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-smv.smvmodulerunner">
<span id="smv-smvmodulerunner-module"></span><h2>smv.smvmodulerunner module<a class="headerlink" href="#module-smv.smvmodulerunner" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="smv.smvmodulerunner.SmvModuleRunner">
<em class="property">class </em><code class="descclassname">smv.smvmodulerunner.</code><code class="descname">SmvModuleRunner</code><span class="sig-paren">(</span><em>modules</em>, <em>smvApp</em>, <em>runMonitorCallback=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodulerunner.html#SmvModuleRunner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodulerunner.SmvModuleRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Represent the run-transaction. Provides the single entry point to run
a group of modules</p>
<dl class="method">
<dt id="smv.smvmodulerunner.SmvModuleRunner.get_runinfo">
<code class="descname">get_runinfo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodulerunner.html#SmvModuleRunner.get_runinfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodulerunner.SmvModuleRunner.get_runinfo" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmodulerunner.SmvModuleRunner.publish">
<code class="descname">publish</code><span class="sig-paren">(</span><em>publish_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodulerunner.html#SmvModuleRunner.publish"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodulerunner.SmvModuleRunner.publish" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmodulerunner.SmvModuleRunner.publish_local">
<code class="descname">publish_local</code><span class="sig-paren">(</span><em>local_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodulerunner.html#SmvModuleRunner.publish_local"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodulerunner.SmvModuleRunner.publish_local" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmodulerunner.SmvModuleRunner.publish_to_hive">
<code class="descname">publish_to_hive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodulerunner.html#SmvModuleRunner.publish_to_hive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodulerunner.SmvModuleRunner.publish_to_hive" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmodulerunner.SmvModuleRunner.publish_to_jdbc">
<code class="descname">publish_to_jdbc</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodulerunner.html#SmvModuleRunner.publish_to_jdbc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodulerunner.SmvModuleRunner.publish_to_jdbc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmodulerunner.SmvModuleRunner.purge_persisted">
<code class="descname">purge_persisted</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodulerunner.html#SmvModuleRunner.purge_persisted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodulerunner.SmvModuleRunner.purge_persisted" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmodulerunner.SmvModuleRunner.quick_run">
<code class="descname">quick_run</code><span class="sig-paren">(</span><em>forceRun=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodulerunner.html#SmvModuleRunner.quick_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodulerunner.SmvModuleRunner.quick_run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvmodulerunner.SmvModuleRunner.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>forceRun=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvmodulerunner.html#SmvModuleRunner.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvmodulerunner.SmvModuleRunner.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.smvschema">
<span id="smv-smvschema-module"></span><h2>smv.smvschema module<a class="headerlink" href="#module-smv.smvschema" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="smv.smvschema.SmvSchema">
<em class="property">class </em><code class="descclassname">smv.smvschema.</code><code class="descname">SmvSchema</code><span class="sig-paren">(</span><em>j_smv_schema</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvschema.html#SmvSchema"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvschema.SmvSchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The Python representation of SmvSchema scala class.</p>
<p>Most of the work is still being done on the scala side and this is just a pass through.</p>
<dl class="staticmethod">
<dt id="smv.smvschema.SmvSchema.discover">
<em class="property">static </em><code class="descname">discover</code><span class="sig-paren">(</span><em>csv_path</em>, <em>csvAttributes</em>, <em>n=100000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvschema.html#SmvSchema.discover"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvschema.SmvSchema.discover" title="Permalink to this definition">¶</a></dt>
<dd><p>Discover schema from CSV file with given csv attributes</p>
</dd></dl>

<dl class="staticmethod">
<dt id="smv.smvschema.SmvSchema.fromFile">
<em class="property">static </em><code class="descname">fromFile</code><span class="sig-paren">(</span><em>schema_file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvschema.html#SmvSchema.fromFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvschema.SmvSchema.fromFile" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="smv.smvschema.SmvSchema.fromString">
<em class="property">static </em><code class="descname">fromString</code><span class="sig-paren">(</span><em>schema_str</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvschema.html#SmvSchema.fromString"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvschema.SmvSchema.fromString" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="smv.smvschema.SmvSchema.saveToLocalFile">
<code class="descname">saveToLocalFile</code><span class="sig-paren">(</span><em>schema_file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvschema.html#SmvSchema.saveToLocalFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvschema.SmvSchema.saveToLocalFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Save schema to local (driver) file</p>
</dd></dl>

<dl class="method">
<dt id="smv.smvschema.SmvSchema.toValue">
<code class="descname">toValue</code><span class="sig-paren">(</span><em>i</em>, <em>str_val</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvschema.html#SmvSchema.toValue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvschema.SmvSchema.toValue" title="Permalink to this definition">¶</a></dt>
<dd><p>convert the string value to native value based on type defined in schema.</p>
<p>For example, if first column was of type Int, then call of <cite>toValue(0, “55”)</cite>
would return integer 55.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-smv.smvshell">
<span id="smv-smvshell-module"></span><h2>smv.smvshell module<a class="headerlink" href="#module-smv.smvshell" title="Permalink to this headline">¶</a></h2>
<p>Helper functions available in SMV’s Python shell</p>
<dl class="function">
<dt id="smv.smvshell.quickRun">
<code class="descclassname">smv.smvshell.</code><code class="descname">quickRun</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#quickRun"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.quickRun" title="Permalink to this definition">¶</a></dt>
<dd><p>Run module and return result.
No persist, but use existing persisted if possible.
No DQM</p>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.fullRun">
<code class="descclassname">smv.smvshell.</code><code class="descname">fullRun</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#fullRun"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.fullRun" title="Permalink to this definition">¶</a></dt>
<dd><p>Run module and return result.
Persist and run DQM if given</p>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.df">
<code class="descclassname">smv.smvshell.</code><code class="descname">df</code><span class="sig-paren">(</span><em>name</em>, <em>forceRun=False</em>, <em>quickRun=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#df"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.df" title="Permalink to this definition">¶</a></dt>
<dd><p>The DataFrame result of running the named module</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The unique name of a module. Does not have to be the FQN.</p></li>
<li><p><strong>forceRun</strong> (<em>bool</em>) – True if the module should be forced to run even if it has persisted output. False otherwise.</p></li>
<li><p><strong>quickRun</strong> (<em>bool</em>) – skip computing dqm+metadata and persisting csv</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The result of running the named module.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.dshash">
<code class="descclassname">smv.smvshell.</code><code class="descname">dshash</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#dshash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.dshash" title="Permalink to this definition">¶</a></dt>
<dd><p>The current hashOfHash for the named module as a hex string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The uniquen name of a module. Does not have to be the FQN.</p></li>
<li><p><strong>runConfig</strong> (<em>dict</em>) – runConfig to apply when collecting info. If module
was run with a config, the same config needs to be
specified here to retrieve the correct hash.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The hashOfHash of the named module</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(int)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.getModel">
<code class="descclassname">smv.smvshell.</code><code class="descname">getModel</code><span class="sig-paren">(</span><em>name</em>, <em>forceRun=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#getModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.getModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the result of running the named SmvModel module</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The name of a module. Does not have to be the FQN.</p></li>
<li><p><strong>forceRun</strong> (<em>bool</em>) – True if the module should be forced to run even if it has persisted output. False otherwise.</p></li>
<li><p><strong>version</strong> (<em>str</em>) – The name of the published version to load from</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The result of running the named module</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(object)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.openHive">
<code class="descclassname">smv.smvshell.</code><code class="descname">openHive</code><span class="sig-paren">(</span><em>tableName</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#openHive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.openHive" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in a Hive table as a DataFrame</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tableName</strong> (<em>str</em>) – The name of the Hive table</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The resulting DataFrame</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.openCsv">
<code class="descclassname">smv.smvshell.</code><code class="descname">openCsv</code><span class="sig-paren">(</span><em>path</em>, <em>validate=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#openCsv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.openCsv" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in a CSV file as a DataFrame</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The path of the CSV file</p></li>
<li><p><strong>validate</strong> (<em>bool</em>) – If true, validate the CSV before return DataFrame (raise error if malformatted)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The resulting DataFrame</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.help">
<code class="descclassname">smv.smvshell.</code><code class="descname">help</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#help"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.help" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a list of the SMV helper functions available in the shell</p>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.lsStage">
<code class="descclassname">smv.smvshell.</code><code class="descname">lsStage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#lsStage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.lsStage" title="Permalink to this definition">¶</a></dt>
<dd><p>List all the stages</p>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.ls">
<code class="descclassname">smv.smvshell.</code><code class="descname">ls</code><span class="sig-paren">(</span><em>stageName=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#ls"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.ls" title="Permalink to this definition">¶</a></dt>
<dd><p>List all datasets in a stage</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>stageName</strong> (<em>str</em>) – The name of the stage. Defaults to None, in which ase all datasets in all stages will be listed.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.lsDead">
<code class="descclassname">smv.smvshell.</code><code class="descname">lsDead</code><span class="sig-paren">(</span><em>stageName=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#lsDead"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.lsDead" title="Permalink to this definition">¶</a></dt>
<dd><p>List dead datasets in a stage</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>stageName</strong> (<em>str</em>) – The name of the stage. Defaults to None, in which ase all datasets in all stages will be listed.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.props">
<code class="descclassname">smv.smvshell.</code><code class="descname">props</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#props"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.props" title="Permalink to this definition">¶</a></dt>
<dd><p>The current app propertied used by SMV after the app, user, command-line
and dynamic props are merged.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The ‘mergedProps’ or final props used by SMV</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>(dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.exportToHive">
<code class="descclassname">smv.smvshell.</code><code class="descname">exportToHive</code><span class="sig-paren">(</span><em>dsname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#exportToHive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.exportToHive" title="Permalink to this definition">¶</a></dt>
<dd><p>Export dataset’s running result to a Hive table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dsname</strong> (<em>str</em>) – The name of an SmvModule</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.ancestors">
<code class="descclassname">smv.smvshell.</code><code class="descname">ancestors</code><span class="sig-paren">(</span><em>dsname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#ancestors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.ancestors" title="Permalink to this definition">¶</a></dt>
<dd><p>List all ancestors of a dataset</p>
<p>Ancestors of a dataset are the dataset it depends on, directly or
in-directly, including datasets from other stages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dsname</strong> (<em>str</em>) – The name of an SmvGenericModule</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.descendants">
<code class="descclassname">smv.smvshell.</code><code class="descname">descendants</code><span class="sig-paren">(</span><em>dsname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#descendants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.descendants" title="Permalink to this definition">¶</a></dt>
<dd><p>List all descendants of a dataset</p>
<p>Descendants of a dataset are the datasets which depend on it directly or
in-directly, including datasets from other stages</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dsname</strong> (<em>str</em>) – The name of an SmvGenericModule</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.now">
<code class="descclassname">smv.smvshell.</code><code class="descname">now</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#now"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.now" title="Permalink to this definition">¶</a></dt>
<dd><p>Print current time</p>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.smvDiscoverSchemaToFile">
<code class="descclassname">smv.smvshell.</code><code class="descname">smvDiscoverSchemaToFile</code><span class="sig-paren">(</span><em>path</em>, <em>n=100000</em>, <em>ca=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#smvDiscoverSchemaToFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.smvDiscoverSchemaToFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Try best to discover Schema from raw Csv file</p>
<p>Will save a schema file with postfix “.toBeReviewed” in local directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – Path to the CSV file</p></li>
<li><p><strong>n</strong> (<em>int</em>) – Number of records to check for schema discovery, default 100k</p></li>
<li><p><strong>ca</strong> (<em>CsvAttributes</em>) – Defaults to CsvWithHeader</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.run_test">
<code class="descclassname">smv.smvshell.</code><code class="descname">run_test</code><span class="sig-paren">(</span><em>test_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#run_test"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.run_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a test with the given name without creating new Spark context</p>
<p>First reloads SMV and the test from source, then runs the test.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>test_name</strong> (<em>str</em>) – Name of the test to run</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.show_run_info">
<code class="descclassname">smv.smvshell.</code><code class="descname">show_run_info</code><span class="sig-paren">(</span><em>collector</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#show_run_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.show_run_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Inspects the SmvRunInfoCollector object returned by smvApp.runModule</p>
</dd></dl>

<dl class="function">
<dt id="smv.smvshell.get_run_info">
<code class="descclassname">smv.smvshell.</code><code class="descname">get_run_info</code><span class="sig-paren">(</span><em>name</em>, <em>runConfig=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/smvshell.html#get_run_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.smvshell.get_run_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the SmvRunInfoCollector with full information about a module and its dependencies</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – name of the module whose information to collect</p></li>
<li><p><strong>runConfig</strong> (<em>dict</em>) – runConfig to apply when collecting info. If module
was run with a config, the same config needs to be
specified here to retrieve the info.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-smv.utils">
<span id="smv-utils-module"></span><h2>smv.utils module<a class="headerlink" href="#module-smv.utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="smv.utils.check_socket">
<code class="descclassname">smv.utils.</code><code class="descname">check_socket</code><span class="sig-paren">(</span><em>port</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/utils.html#check_socket"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.utils.check_socket" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the given port is open to bind</p>
</dd></dl>

<dl class="function">
<dt id="smv.utils.infer_full_name_from_part">
<code class="descclassname">smv.utils.</code><code class="descname">infer_full_name_from_part</code><span class="sig-paren">(</span><em>full_names</em>, <em>part_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/utils.html#infer_full_name_from_part"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.utils.infer_full_name_from_part" title="Permalink to this definition">¶</a></dt>
<dd><p>For a given partial name (postfix), infer full name from a list</p>
</dd></dl>

<dl class="function">
<dt id="smv.utils.is_string">
<code class="descclassname">smv.utils.</code><code class="descname">is_string</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/utils.html#is_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.utils.is_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether object is a string type with Python 2 and Python 3 compatibility</p>
</dd></dl>

<dl class="function">
<dt id="smv.utils.lazy_property">
<code class="descclassname">smv.utils.</code><code class="descname">lazy_property</code><span class="sig-paren">(</span><em>fn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/utils.html#lazy_property"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.utils.lazy_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator that makes a property lazy-evaluated.</p>
</dd></dl>

<dl class="function">
<dt id="smv.utils.list_distinct">
<code class="descclassname">smv.utils.</code><code class="descname">list_distinct</code><span class="sig-paren">(</span><em>l</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/utils.html#list_distinct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.utils.list_distinct" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a the distinct version of the input list, perserve order</p>
</dd></dl>

<dl class="function">
<dt id="smv.utils.scala_seq_to_list">
<code class="descclassname">smv.utils.</code><code class="descname">scala_seq_to_list</code><span class="sig-paren">(</span><em>_jvm</em>, <em>j_seq</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/utils.html#scala_seq_to_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.utils.scala_seq_to_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Scala Seq to Python list</p>
</dd></dl>

<dl class="function">
<dt id="smv.utils.smv_copy_array">
<code class="descclassname">smv.utils.</code><code class="descname">smv_copy_array</code><span class="sig-paren">(</span><em>sc</em>, <em>*cols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/utils.html#smv_copy_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.utils.smv_copy_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy Python list to appropriate Java array</p>
</dd></dl>

<dl class="function">
<dt id="smv.utils.smvhash">
<code class="descclassname">smv.utils.</code><code class="descname">smvhash</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/smv/utils.html#smvhash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#smv.utils.smvhash" title="Permalink to this definition">¶</a></dt>
<dd><p>Python’s hash function will return different numbers from run to
from, starting from 3.  Provide a deterministic hash function for
use to calculate sourceCodeHash.</p>
</dd></dl>

</div>
<div class="section" id="module-smv">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-smv" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">smv package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-smv.csv_attributes">smv.csv_attributes module</a></li>
<li><a class="reference internal" href="#module-smv.datasetmgr">smv.datasetmgr module</a></li>
<li><a class="reference internal" href="#module-smv.datasetrepo">smv.datasetrepo module</a></li>
<li><a class="reference internal" href="#module-smv.datasetresolver">smv.datasetresolver module</a></li>
<li><a class="reference internal" href="#module-smv.dqm">smv.dqm module</a></li>
<li><a class="reference internal" href="#module-smv.error">smv.error module</a></li>
<li><a class="reference internal" href="#module-smv.functions">smv.functions module</a></li>
<li><a class="reference internal" href="#module-smv.helpers">smv.helpers module</a></li>
<li><a class="reference internal" href="#module-smv.historical_validators">smv.historical_validators module</a></li>
<li><a class="reference internal" href="#module-smv.jprops">smv.jprops module</a></li>
<li><a class="reference internal" href="#module-smv.matcher">smv.matcher module</a></li>
<li><a class="reference internal" href="#module-smv.modulesvisitor">smv.modulesvisitor module</a></li>
<li><a class="reference internal" href="#module-smv.panel">smv.panel module</a></li>
<li><a class="reference internal" href="#module-smv.provider">smv.provider module</a></li>
<li><a class="reference internal" href="#module-smv.runconfig">smv.runconfig module</a></li>
<li><a class="reference internal" href="#module-smv.runinfo">smv.runinfo module</a></li>
<li><a class="reference internal" href="#module-smv.schema_meta_ops">smv.schema_meta_ops module</a></li>
<li><a class="reference internal" href="#module-smv.smvapp">smv.smvapp module</a></li>
<li><a class="reference internal" href="#module-smv.smvappinfo">smv.smvappinfo module</a></li>
<li><a class="reference internal" href="#module-smv.smvconfig">smv.smvconfig module</a></li>
<li><a class="reference internal" href="#module-smv.smvdriver">smv.smvdriver module</a></li>
<li><a class="reference internal" href="#module-smv.smvgenericmodule">smv.smvgenericmodule module</a></li>
<li><a class="reference internal" href="#module-smv.smvhdfs">smv.smvhdfs module</a></li>
<li><a class="reference internal" href="#module-smv.smvinput">smv.smvinput module</a></li>
<li><a class="reference internal" href="#module-smv.smviostrategy">smv.smviostrategy module</a></li>
<li><a class="reference internal" href="#module-smv.smvlock">smv.smvlock module</a></li>
<li><a class="reference internal" href="#module-smv.smvmetadata">smv.smvmetadata module</a></li>
<li><a class="reference internal" href="#module-smv.smvmodule">smv.smvmodule module</a></li>
<li><a class="reference internal" href="#module-smv.smvmodulerunner">smv.smvmodulerunner module</a></li>
<li><a class="reference internal" href="#module-smv.smvschema">smv.smvschema module</a></li>
<li><a class="reference internal" href="#module-smv.smvshell">smv.smvshell module</a></li>
<li><a class="reference internal" href="#module-smv.utils">smv.utils module</a></li>
<li><a class="reference internal" href="#module-smv">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to smv’s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="smv.conn.html"
                        title="next chapter">smv.conn package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/smv.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="smv.conn.html" title="smv.conn package"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to smv’s documentation!"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Spark Modularized View v2r12 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, TresAmigosSD.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.0.1.
    </div>
  </body>
</html>